(self.webpackChunk_swarm_swarm=self.webpackChunk_swarm_swarm||[]).push([[6140],{8532:(e,t,n)=>{var o={"./CRPool.json":20806,"./CRPoolProxy.json":27194};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=s,e.exports=i,i.id=8532},53903:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var o=n(66790),i=n(76958);const s=(e,t,n)=>e?t:n;var l=n(63392),a=n(83843),r=n(54121),d=n(1107),c=n(86668),u=n(636),p=n(51861),h=n(24537);const m=e=>{var t,n,m,x,v,g,A,k;let{isOpen:f=!1,onClose:y,onConfirm:j,tokenIn:w,tokenOut:b}=e;const{t:T}=(0,a.B)("modals"),S=null!==(t=null===w||void 0===w||null===(n=w.xToken)||void 0===n?void 0:n.cpkBalance)&&void 0!==t?t:i.f2,C=null!==(m=null===b||void 0===b||null===(x=b.xToken)||void 0===x?void 0:x.cpkBalance)&&void 0!==m?m:i.f2;return(0,h.jsxs)(l.A,{isOpen:f,width:["100%","540px"],height:"auto",maxHeight:"80%",onClose:y,p:2,children:[(0,h.jsx)(d.A,{as:"h4",fontSize:4,fontWeight:5,mt:0,children:T("cbkBalance.pleaseNote")}),(0,h.jsx)(c.A.span,{color:"grey",children:s(!w&&!b,T("cbkBalance.tokenInNoAmountDescription"),s(S.gt(0),s(C.gt(0),(0,h.jsx)(r.x,{ns:"modals",i18nKey:"cbkBalance.tokenInOutDescription",components:{br:(0,h.jsx)("br",{})},values:{tokenIn:null!==(v=null===w||void 0===w?void 0:w.symbol)&&void 0!==v?v:"UNKNOWN",amountIn:(0,o.GM)(S),tokenOut:null!==(g=null===b||void 0===b?void 0:b.symbol)&&void 0!==g?g:"UNKNOWN",amountOut:(0,o.GM)(C)}}),T("cbkBalance.tokenInDescription",{tokenIn:null!==(A=null===w||void 0===w?void 0:w.symbol)&&void 0!==A?A:"UNKNOWN",amount:(0,o.GM)(S)})),T("cbkBalance.tokenOutDescription",{tokenOut:null!==(k=null===b||void 0===b?void 0:b.symbol)&&void 0!==k?k:"UNKNOWN",amount:(0,o.GM)(C)})))}),(0,h.jsxs)(u.A,{mt:"24px",children:[(0,h.jsx)(p.A.Outline,{borderColor:"primary",border:"1.5px solid",fontWeight:4,onClick:y,children:"Back"}),(0,h.jsx)(p.A,{ml:3,fontWeight:4,onClick:j,children:"Continue"})]})]})}},47405:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var o=n(58768),i=n(51978),s=n(76958),l=n(62491),a=n(35005),r=n(82488),d=n(41902),c=n(8214),u=n(38256),p=n(40076),h=n(88150),m=n(7329),x=n(96363),v=n(87585),g=n(96326),A=n(85105),k=n.n(A),f=n(92109),y=n(83843),j=n(1107),w=n(86668),b=n(4155),T=n(636),S=n(24537);const C=e=>{var t,n,A,C,W,I,M,P,F,B,O,N,L;let{isOpen:R,onClose:E,asset:z,withoutPortal:D=!1}=e;const{t:q}=(0,y.B)(["invest","popups","common","errors"]),{addError:U}=(0,v.dh)(),{track:_}=(0,o.A)(),G=(0,r.F7)(),[X,H]=(0,f.useState)(null!==G&&void 0!==G?G:null),[K,V]=(0,f.useState)(s.f2),Z=(0,f.useMemo)((()=>{var e;return K.times(null!==(e=null===z||void 0===z?void 0:z.exchangeRate)&&void 0!==e?e:0)}),[K,null===z||void 0===z?void 0:z.exchangeRate]),[$,J]=(0,f.useState)(!1),Q=(0,f.useCallback)(((e,t)=>{Number.isNaN(e)||V((0,s.lW)(t))}),[V]),Y=(0,f.useCallback)((e=>{e&&e.value&&H(e.value)}),[]),ee=(0,f.useCallback)((()=>{V(s.f2),null===E||void 0===E||E()}),[E]),te=(0,f.useCallback)((async()=>{if(X)try{var e;J(!0);const t=await(null===z||void 0===z||null===(e=z.requestRedeem)||void 0===e?void 0:e.call(z,(0,s.NU)(K,null===z||void 0===z?void 0:z.decimals),X));await _(t,{confirm:{secondaryMessage:q("invest:redeemModal.success")}}),await(0,l.A)(2e3),V(s.f2)}catch{}finally{J(!1)}else U(q("invest:redeemModal.noAddress"))}),[U,K,z,X,q,_]),ne=(null===z||void 0===z||null===(t=z.balance)||void 0===t?void 0:t.eq(0))||K.eq(0)||(null===z||void 0===z||null===(n=z.balance)||void 0===n?void 0:n.lt(K))||(null===K||void 0===K?void 0:K.eq(0))||(0,s.lW)(null===z||void 0===z?void 0:z.minimumRedemptionAmount).gt(K);return(0,S.jsx)(d.A,{isOpen:R,onClose:ee,width:["100%","550px"],minHeight:"400px",maxHeight:["90%","80%"],height:"auto",justifyContent:"stretch",alignItems:"stretch",withoutPortal:D,children:(0,S.jsxs)(u.A,{loading:!1,size:"40px",children:[(0,S.jsx)(j.A,{as:"h4",fontSize:4,fontWeight:5,mt:0,mb:"20px",color:"text",children:q("invest:redeemModal.title",{tokenIn:null!==(A=null===z||void 0===z?void 0:z.symbol)&&void 0!==A?A:"UNKNOWN",tokenOut:"USDC"})}),(0,S.jsx)(w.A.p,{mt:0,color:"text",children:"bond"===(null===z||void 0===z?void 0:z.assetType)||"stock"===(null===z||void 0===z?void 0:z.assetType)?q("invest:redeemModal.stockBondDescription",{tokenIn:null!==(C=null===z||void 0===z?void 0:z.symbol)&&void 0!==C?C:"UNKNOWN",tokenOut:"USDC",network:k()(null!==(W=null===z||void 0===z||null===(I=z.kyaInformation)||void 0===I?void 0:I.blockchain)&&void 0!==W?W:"UNKNOWN NETWORK")}):q("invest:redeemModal.description",{tokenIn:null!==(M=null===z||void 0===z?void 0:z.symbol)&&void 0!==M?M:"UNKNOWN",tokenOut:"USDC",network:k()(null!==(P=null===z||void 0===z||null===(F=z.kyaInformation)||void 0===F?void 0:F.blockchain)&&void 0!==P?P:"UNKNOWN NETWORK")})}),(0,S.jsxs)(b.A,{children:[(0,S.jsxs)(T.A,{width:"100%",justifyContent:"space-between",children:[(0,S.jsx)(w.A.span,{color:"near-black",fontSize:1,textAlign:"right",children:q("invest:redeemModal.amount")}),(0,S.jsxs)(w.A.span,{color:"near-black",fontSize:1,textAlign:"right",mr:2,children:[q("invest:redeemModal.balance")," ",(0,S.jsx)(g.A,{tokenAddress:null===z||void 0===z?void 0:z.id,account:X,symbol:null===z||void 0===z?void 0:z.symbol,wrapper:w.A.span})]})]}),(0,S.jsx)(x.A,{height:"48px",mb:3,max:null!==(B=null===z||void 0===z||null===(O=z.balance)||void 0===O?void 0:O.toFixed(z.decimals))&&void 0!==B?B:"0",decimalScale:z&&(0,a.H)(z),value:K,onChange:Q,disabled:$,error:(()=>{if(K.gt(0)&&z&&z.balance&&z.minimumRedemptionAmount){if(K.gt(z.balance))return q("errors:amountExceedsBalance");if(K.lt(z.minimumRedemptionAmount))return q("errors:amountLowerThanAllowed",{minRedemptionAmount:z.minimumRedemptionAmount.toString(),assetSymbol:z.symbol})}})(),reportError:!0})]}),(0,S.jsx)(p.A,{height:"48px",label:q("invest:redeemModal.selectAddress"),onChange:Y,selectedAddress:X,isDisabled:$}),(0,S.jsx)(c.A,{mb:0}),(0,S.jsx)(w.A.span,{textAlign:"center",mt:2,fontSize:3,color:"text",title:"".concat(null!==(N=null===Z||void 0===Z?void 0:Z.round(6))&&void 0!==N?N:"--"," USDC"),children:q("invest:redeemModal.youWillReceive",{tokenOut:"USDC",amount:(0,i.G)(Z,2)})}),(0,S.jsx)(w.A.span,{textAlign:"center",fontSize:0,color:"text",title:void 0===(null===z||void 0===z?void 0:z.exchangeRate)?"--":"".concat(z.exchangeRate," USDC"),children:q("invest:redeemModal.currentMarketValue",{amount:(0,i.G)(null!==(L=null===z||void 0===z?void 0:z.exchangeRate)&&void 0!==L?L:0,2)})}),(0,S.jsxs)(T.A,{justifyContent:"center",style:{gap:"16px"},mt:3,children:[(0,S.jsx)(h.A,{size:"small",onClick:ee,children:q("popups:actions.close")}),(0,S.jsx)(m.A,{requireInitiated:!0,requireAccount:!0,size:"small",disabled:ne,onClick:te,children:q("common:token.redeem")})]})]})})}},14623:(e,t,n)=>{"use strict";n.d(t,{A:()=>De});var o=n(97266),i=n(17689),s=n(39318),l=n(26678),a=n(40040),r=n(66790),d=n(76958),c=n(63392),u=n(5767),p=n(51937),h=n(25518),m=n(92109),x=n(83843),v=n(636),g=n(9336),A=n(4155),k=n(86668),f=n(51861),y=n(1107),j=n(24537);const w=e=>{let{text:t}=e;return(0,j.jsx)(y.A,{as:"h4",mt:0,mb:3,display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",color:"grey",fontWeight:5,children:t})};var b=n(16823),T=n(35979),S=n(90479);const C=S.Ay.ul(["list-style:none;padding:0;padding-right:8px;overflow-y:auto;flex:1 1 auto;scroll-snap-type:y mandatory;scroll-behavior:smooth;& > li{padding:16px 0;border-bottom:1px solid ",";scroll-snap-align:start;& input{outline:none;}&:first-child{padding-top:0;}}"],(e=>{let{theme:t}=e;return t.colors["light-gray"]}));var W=n(82130),I=n(848),M=n(96845),P=n(54066),F=n.n(P),B=n(50539);const O=e=>(0,j.jsxs)("span",{...e,children:[(0,j.jsx)("span",{className:"bar"}),(0,j.jsx)("span",{className:"bar"}),(0,j.jsx)("span",{className:"bar"})]}),N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";return n=>{let{variant:o}=n;return o?e.palette.augmentColor({main:B.Q1[o]})[t]:e.palette.primary[t]}},L=(0,I.A)((e=>({root:{color:N(e)},active:{},rail:{height:4,backgroundColor:"#cccccc",opacity:"unset"},track:{height:4,backgroundColor:N(e)},thumb:{height:20,width:20,backgroundColor:"#ffffff",top:"50%",transform:"translate(-25%, -50%)",marginTop:1,border:"1px solid #cccccc","&:hover, &:active":{backgroundColor:N(e,"dark"),boxShadow:"none"},"&:focus":{boxShadow:"none"},disabled:{height:20,width:20}},disabled:{"&$thumb":{height:20,width:20,top:"50%",transform:"translate(-25%, -50%)",marginTop:1,backgroundColor:N(e,"light")({variant:"grey"})}}})))(M.A),R=e=>{let{variant:t="primary",onChange:n,...o}=e;const{min:i=0,max:s=Number.MAX_SAFE_INTEGER}=o,l=(s-i)/4;(0,m.useMemo)((()=>F()(i,s+l,l).map((e=>({value:e})))),[i,s,l]);return(0,j.jsx)(L,{ThumbComponent:O,variant:t,onChange:(e,t)=>{n&&"number"===typeof t&&(null===n||void 0===n||n(t))},...o})};var E=n(96363);const z=e=>{let{value:t=0,max:n,min:o,onChange:i,endAdornment:s,sliderOptions:l={step:1,variant:"primary"},disabled:a=!1,...r}=e;return(0,j.jsxs)(v.A,{flexDirection:"column",mt:"24px",px:3,flex:"0 1 auto",alignItems:"center",...r,children:[(0,j.jsx)(E.A,{mb:1,endAdornment:s,onChange:i,value:t,max:n,min:o,disabled:a}),(0,j.jsx)(R,{max:n,min:o,value:t,onChange:i,step:null===l||void 0===l?void 0:l.step,variant:null===l||void 0===l?void 0:l.variant,disabled:a})]})},D=e=>{let{checked:t=!1,value:n,onSelect:o,onChange:i,disabled:s=!1}=e;const{t:l}=(0,x.B)("liquidityModals"),{resetForm:a}=(0,h.j7)(),r=(0,m.useCallback)((()=>{a(),o("all")}),[o,a]);return(0,j.jsxs)(v.A,{width:"100%",justifyContent:"space-between",alignItems:"center",height:"96px",px:2,borderBottom:"1px solid",borderColor:"light-gray",flex:"1 0 96px",children:[(0,j.jsxs)(v.A,{children:[(0,j.jsx)(W.A,{onChange:r,checked:t,disabled:s}),(0,j.jsxs)(v.A,{flexDirection:"column",color:s?"grey":"black",children:[(0,j.jsx)(A.A,{children:(0,j.jsx)(k.A.span,{fontWeight:5,lineHeight:"24px",children:l("add.addMultipleTitle")})}),(0,j.jsx)(k.A.span,{color:"grey",fontSize:1,lineHeight:"20px",children:l("add.addMultipleSubtitle")})]})]}),t&&(0,j.jsx)(z,{value:n,width:"200px",onChange:i,endAdornment:"%",min:0,max:100,disabled:s})]})};var q=n(21870),U=n(56133),_=n(2409),G=n(59838);const X=e=>{var t;let{checked:n=!1,disabled:o=!1,multiple:i=!1,token:s,value:l,onSelect:a,onChange:c}=e;const{t:u}=(0,x.B)("liquidityModals"),p=(null===(t=s.balance)||void 0===t?void 0:t.round(4,1).toNumber())||0,g=Math.min(p,(1-q.qZ)*Number(s.poolBalance||0)/2),[f,,y]=(0,h.Mt)({name:"liquidityIn.".concat(s.address),validate:(w=g,b=u("errors.poolLimitExceeded"),e=>{if(e>w)return b}),disabled:!n});var w,b;const T=(0,m.useCallback)((()=>a(s)),[a,s]),S=(0,d.lW)(l).round(4,1).toNumber(),C=(0,d.lW)(l).times((null===s||void 0===s?void 0:s.exchangeRate)||0).round(2,1).toNumber(),I=o||0===p,M=(0,m.useMemo)((()=>(0,U.E6)(s.balance||0,s.cpkAllowance||0)),[s.balance,s.cpkAllowance]);return(0,j.jsx)("li",{children:(0,j.jsxs)(v.A,{width:"100%",justifyContent:"space-between",alignItems:"center",height:"96px",px:2,children:[(0,j.jsxs)(v.A,{alignItems:"center",children:[(0,j.jsx)(W.A,{onChange:T,checked:n,disabled:I}),(0,j.jsx)(G.A,{height:"28px",width:"28px",symbol:s.symbol,name:s.name,mr:2,disabled:I}),(0,j.jsxs)(v.A,{flexDirection:"column",color:I?"grey":"black",children:[(0,j.jsxs)(A.A,{children:[(0,j.jsx)(k.A.span,{fontWeight:5,lineHeight:"24px",children:s.symbol})," ",(0,j.jsx)(k.A.span,{lineHeight:"24px",children:s.name}),(0,j.jsx)(k.A.span,{ml:1,children:s&&(0,j.jsx)(_.A,{allowanceStatus:M})})]}),(0,j.jsxs)(k.A.span,{color:"grey",fontSize:1,lineHeight:"20px",children:[(0,r.GM)(p,4)," available"]})]})]}),n&&(0,j.jsxs)(v.A,{flexDirection:"column",alignItems:"center",children:[(0,j.jsx)(z,{width:"200px",max:Math.min(p,(1-q.qZ)*Number(s.poolBalance||0)/2),min:0,value:f.value,sliderOptions:{step:1e-4},onChange:e=>{null===c||void 0===c||c(e),y.setValue(e)},disabled:I}),(0,j.jsxs)(k.A.span,{px:3,width:"100%",color:"grey",fontSize:1,textAlign:"right",children:["$",(0,r.GM)(C)]})]}),i&&(0,j.jsxs)(v.A,{flexDirection:"column",children:[(0,j.jsxs)(A.A,{textAlign:"right",children:[(0,j.jsxs)(k.A.span,{fontWeight:5,children:[S," ",s.symbol]})," "]}),(0,j.jsxs)(k.A.span,{color:"grey",fontSize:1,textAlign:"right",children:["$",(0,r.GM)(C)]})]})]})})},{poolsAddLiquidity:H}=b.Ay.resources.docs.coreConcepts,K=e=>{let{tokens:t,selected:n,value:o=0,maxAmountsIn:i,onChange:s,onSelection:l,disabled:a=!1}=e;const{t:r}=(0,x.B)("liquidityModals"),d=t.some((e=>{let{address:t}=e;return 0===i[t]})),c="all"===n&&!d;return(0,j.jsxs)(j.Fragment,{children:[d&&(0,j.jsxs)(k.A.span,{color:"near-black",children:[r("add.addMultipleInstructions")," ",(0,j.jsx)(T.A,{href:H,target:"_blank",rel:"noopener",children:r("learnHow")})]}),!d&&(0,j.jsx)(D,{onSelect:l,checked:"all"===n,onChange:s,value:o,disabled:a}),(0,j.jsx)(C,{children:t.map((e=>(0,j.jsx)(X,{token:e,checked:n===e.id,onSelect:l,onChange:s,value:c?o*i[e.id]/100:o,multiple:c,disabled:a||!i[e.id]},e.id)))})]})};var V=n(29007),Z=n(17705),$=n(56279),J=n(60614),Q=n(26602),Y=n(53787);const ee=S.Ay.span(["display:inline-block;background-color:",";width:8px;height:8px;border-radius:50%;margin-right:","px;"],(e=>{let{color:t}=e;return t}),(e=>{let{theme:t}=e;return t.space[1]}));var te=n(45704);const ne=S.Ay.ul(["list-style:none;margin:0;padding:0;"," & > li{display:flex;align-items:center;font-size:","px;padding:8px 0;}"],te.Lc,(e=>{let{theme:t}=e;return t.fontSizes[1]})),oe=["#F2994A","#27AE60","#56CCF2","#EB5757","#904af2","#f2cb4a","#4af2af","#4a98f2","#f24a77","#554af2"],ie=e=>{let{tokens:t}=e;const n=t.map((e=>({id:e.id,name:e.symbol,value:Math.round(1e3*(e.weight||0))/10})));return(0,j.jsxs)(A.A,{my:"24px",children:[(0,j.jsxs)($.r,{width:100,height:100,children:[(0,j.jsx)(J.m,{allowEscapeViewBox:{x:!0,y:!0},content:e=>{let{payload:t,active:n}=e;return n?(0,j.jsxs)("div",{style:{backgroundColor:B.Q1.greyDark,borderRadius:"4px",padding:"8px",color:"#fff",whiteSpace:"nowrap"},children:[null===t||void 0===t?void 0:t[0].name," ",null===t||void 0===t?void 0:t[0].value,"%"]}):null}}),(0,j.jsx)(Q.F,{data:n,dataKey:"value",labelLine:!1,outerRadius:50,startAngle:90,endAngle:450,children:n.map(((e,t)=>(0,j.jsx)(Y.f,{fill:oe[t%oe.length],stroke:"none"},e.id)))})]}),(0,j.jsx)(ne,{mt:3,children:n.map(((e,t)=>(0,j.jsxs)("li",{children:[(0,j.jsx)(ee,{color:oe[t%oe.length]})," ",(0,j.jsxs)(k.A.span,{fontSize:1,children:[e.value,"%"," ",(0,j.jsx)(k.A.span,{fontWeight:5,fontSize:1,children:e.name})]})]},e.id)))})]})};var se=n(51710);const le=e=>{let{title:t,children:n,...o}=e;return(0,j.jsxs)(A.A,{mb:3,...o,children:[(0,j.jsx)(y.A,{as:"h5",mt:0,mb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",color:"grey",fontWeight:4,lineHeight:"20px",children:t}),n]})},ae=e=>{let{tokens:t,poolTokensToIssue:n,userPoolTokenBalance:o,totalShares:i,swapFee:s,id:l,action:a}=e;const{t:r}=(0,x.B)("liquidityModals"),c="add"===a,u=(0,d.lW)(i),p=u.eq(0)?0:(0,Z.f)(o.div(u).times(100)),[h,m]=c?[o.add(n),u.add(n)]:[o.sub(n),u.sub(n)],v=m.eq(0)||h.eq(0)?0:(0,Z.f)(h.div(m).times(100));return(0,j.jsxs)(A.A,{width:"200px",borderRight:"1px solid",borderColor:"light-gray",pr:"24px",children:[(0,j.jsx)(w,{text:r("poolOverview")}),(0,j.jsx)(le,{title:r("poolAddress"),children:(0,j.jsx)(k.A,{color:"black",title:l,lineHeight:"24px",children:(0,V.hA)(l)})}),(0,j.jsxs)(le,{title:r("yourShare"),children:[(0,j.jsxs)(k.A.span,{color:"black",lineHeight:"24px",children:[p,"%"]}),(0,j.jsxs)(k.A.span,{color:!!a&&se.o[a],fontWeight:5,lineHeight:"24px",opacity:p===v?0:1,children:[" -> "," ",v,"%"]})]}),(0,j.jsx)(le,{title:r("swapFee"),children:(0,j.jsxs)(k.A.span,{color:"black",lineHeight:"24px",children:[(0,d.lW)(s).times(100).toString(),"%"]})}),(0,j.jsx)(ie,{tokens:t})]})};var re=n(35839),de=n(61336),ce=n(58768),ue=n(173),pe=n(15627);var he=n(62491),me=n(38024),xe=n(23083),ve=n(82488),ge=n(7329),Ae=n(87585),ke=n(75966),fe=n(48372),ye=n(53903),je=n(77686),we=n(91164);const be=function(e,t,n,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q.qZ;return o?(0,l.XC)(t,e,n,i):(0,l.fO)(t,e,n,i)},Te=e=>{var t,n;let{multiple:o,selectedOption:i,pool:s,amountOut:l,reload:a,loading:r=!1,isDisabled:c=!1,setTransactionLoading:u}=e;const{t:p}=(0,x.B)(["common","liquidityModals"]),v=(0,ve.F7)(),A=(0,de.or)(),[k,f]=(0,m.useState)(null),y=(0,ue.A)(!1),[w,b]=(0,m.useState)(!1),{reportError:T}=(0,Ae.dh)(),{track:S}=(0,ce.A)(),{isValid:C}=(0,h.j7)(),W=(0,m.useMemo)((()=>{return o?s.tokens:"undefined"===typeof(e=i)?[]:[e];var e}),[o,s.tokens,i]),I=(0,m.useMemo)((()=>(0,xe.cx)(W,v)),[v,W]),M=(0,m.useMemo)((()=>I?void 0:W.find((e=>(0,xe.ln)(e,(0,d.S8)(be(l,s,e,o),e.decimals))))),[l,I,o,s,W]),P=o?s.tokens.some((e=>{var t,n;return null===(t=e.xToken)||void 0===t||null===(n=t.cpkBalance)||void 0===n?void 0:n.gt(0)})):null===i||void 0===i||null===(t=i.xToken)||void 0===t||null===(n=t.cpkBalance)||void 0===n?void 0:n.gt(0),F=(0,m.useCallback)((async e=>{f(e);try{var t;const n=await(null===(t=e.contract)||void 0===t?void 0:t.enableToken((null===A||void 0===A?void 0:A.address)||""));await S(n,{confirm:{secondaryMessage:p("common:token.enabled",{token:e.name})}}),await(0,he.A)(2e3)}catch(n){T(n)}finally{f(null)}}),[null===A||void 0===A?void 0:A.address,S,p,T]),B=(0,m.useCallback)((async()=>{if(v)if(!P||y.isOpen||w){b(!1),u(!0);try{const e=await je.F.joinPool(v,s,o?s.tokens:i,l);e&&(await S(e,{confirm:{secondaryMessage:p("liquidityModals:addSuccess",{amount:(0,me.A)(l)})}}),setTimeout((()=>null===a||void 0===a?void 0:a()),q.Td))}catch(e){T(e)}finally{u(!1)}}else y.open()}),[v,l,y,w,o,s,a,T,i,u,p,S,P]),O=(0,m.useCallback)((async()=>{if(v)if(!P||y.isOpen||w){b(!1),u(!0);try{const e=await we.G.getInstance();let t;o?t=await e.joinPool(v,s.controller,s.tokensList,s.tokensList.map((e=>{const t=s.tokens.find((t=>{var n;return(0,ve.af)(null===(n=t.xToken)||void 0===n?void 0:n.id,e)}));return void 0===t?ke.gH.from(0):ke.gH.from(be(l,s,t,!0).toFixed(0))})),fe.parseUnits((0,d.lW)(l).toFixed(q.Fx),q.Fx)):void 0!==i&&(t=await e.joinswapExternAmountIn(v,s.controller,i.address,ke.gH.from(be(l,s,i,!1).toFixed(0)),fe.parseUnits((0,d.lW)(l).toFixed(q.Fx),q.Fx))),void 0!==t&&(await S(t,{confirm:{secondaryMessage:p("liquidityModals:addSuccess",{amount:(0,me.A)(l)})}}),setTimeout((()=>null===a||void 0===a?void 0:a()),q.Td))}catch(e){T(e)}finally{u(!1)}}else y.open()}),[v,l,y,w,o,s,a,T,i,u,p,S,P]),N=(0,m.useCallback)((async()=>{y.close(),b(!0),s.crp?await O():await B()}),[B,O,y,s.crp]),L=(0,m.useCallback)((async()=>void 0!==M?F(M):s.crp?O():B()),[M,s.crp,O,B,F]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ge.A,{requireInitiated:!0,requireAccount:!0,requireTier:pe.Ju.tier1,mr:3,disabled:r||I||void 0===M&&(0,d.lW)(l).eq(0)||!C||c,loading:r||I,onClick:L,loadingText:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.A,{mr:2,color:"white"}),null!==k?p("common:token.enabling",{token:k.symbol}):p("liquidityModals:add.header")]}),children:void 0!==M?p("common:token.enable",{token:M.symbol}):p("liquidityModals:add.header")}),(0,j.jsx)(ye.A,{onClose:y.close,isOpen:y.isOpen,onConfirm:N,tokenIn:o?void 0:i})]})},Se=(0,S.Ay)(k.A.span)(["white-space:break-spaces;"]),Ce=e=>{const t=(()=>{const{errors:e,isValid:t}=(0,h.j7)();if(t)return null;let n=e;for(;n;){const e=Object.keys(n);if("string"===typeof n[e[0]])return n[e[0]];n=n[e[0]]}return null})();return(0,j.jsx)(Se,{color:"danger",...e,children:t||" "})},We={},Ie=e=>{var t;let{pool:n,isOpen:o=!1,onClose:i,reload:s,loading:y=!1}=e;const{t:b}=(0,x.B)(["liquidityModals","navigation"]),[T,S]=(0,m.useState)("all"),C=(0,m.useRef)([]);(0,m.useEffect)((()=>{const e=n.tokens.map((e=>({address:e.address,usdBalance:void 0!==e.usdBalance?e.usdBalance:0})));if(n.tokens.some((e=>{const t=C.current.find((0,a.Lj)("address",e.address));return void 0===t||t.usdBalance!==e.usdBalance})))return;C.current=e;const t=n.tokens.every((e=>{let{usdBalance:t}=e;return!!t})),o=n.tokens.find((e=>{let{usdBalance:t}=e;return!!t}));t?S("all"):o&&S(o)}),[n.tokens]),(0,m.useEffect)((()=>{if("all"!==T){const e=n.tokens.find((0,a.Lj)("address",null===T||void 0===T?void 0:T.address));e&&T!==e&&S(e)}}),[n.tokens,T]);const[W,I]=(0,m.useState)(0),[M,P]=(0,m.useState)(!1),F="all"===T,B=(0,m.useMemo)((()=>(0,l.wn)(n.tokens)),[n.tokens]),O=F&&null!==(t=n.tokens)&&void 0!==t&&t.length?W/100*(0,re.cs)(n.tokens):0,N=F?(0,l.YP)(O,n.totalShares):(0,l.sb)(W,T,n),L=(0,d.lW)(null===n||void 0===n?void 0:n.userShare),R=N.add(L),E={poolTokensToIssue:N,userPoolTokenBalance:L,tokens:n.tokens,id:n.id||"",swapFee:n.swapFee,totalShares:n.totalShares||"0",action:"add"},z=(0,re.yl)(n),D=!1===z&&(0,re.yl)({cap:n.cap,totalShares:(0,d.lW)(n.totalShares).add(N).toFixed(0)});return(0,j.jsxs)(c.A,{isOpen:o,width:["100%","auto"],minWidth:[0,0,"800px"],onClose:i,title:b("liquidityModals:add.header"),p:"24px",children:[(0,j.jsx)(p.A,{}),z?(0,j.jsx)(u.A,{title:b("add.liquidityCapAlert.title"),controls:null,children:b("add.liquidityCapAlert.content")}):null,D?(0,j.jsx)(u.A,{title:b("add.futureLiquidityCapAlert.title"),controls:null,children:b("add.futureLiquidityCapAlert.content")}):null,(0,j.jsxs)(v.A,{overflow:"hidden",display:"flex",flexDirection:"row",children:[(0,j.jsx)(ae,{...E,action:"add"}),(0,j.jsx)(h.l1,{initialValues:We,onSubmit:()=>{},children:(0,j.jsxs)(v.A,{pl:"24px",flex:"1 1 auto",flexDirection:"column",children:[(0,j.jsx)(w,{text:b("add.selectAssetsToAdd")}),n.tokens.length?(0,j.jsx)(K,{tokens:n.tokens,selected:"all"===T?T:null===T||void 0===T?void 0:T.address,onSelection:e=>{I(0),S(e)},value:W,onChange:I,maxAmountsIn:B,disabled:M}):(0,j.jsx)(v.A,{justifyContent:"center",alignItems:"center",height:"100%",children:(0,j.jsx)(g.A,{size:"48px"})}),(0,j.jsxs)(A.A,{width:"100%",px:2,mb:"24px",children:[(0,j.jsxs)(v.A,{justifyContent:"space-between",height:"24px",children:[(0,j.jsx)(k.A.span,{children:"SPT amount:"}),(0,j.jsxs)(k.A.span,{color:N.eq(0)?"grey":"success",fontWeight:5,children:[N.eq(0)?0:"+ ".concat((0,r.GM)(N))," ","SPT"]})]}),(0,j.jsxs)(v.A,{justifyContent:"space-between",children:[(0,j.jsx)(k.A.span,{color:"grey",children:"Your new SPT balance:"}),(0,j.jsxs)(k.A.span,{color:"grey",fontWeight:5,children:[(0,r.GM)(R)," SPT"]})]})]}),(0,j.jsx)(Ce,{px:2,mb:3}),(0,j.jsxs)(v.A,{alignItems:"center",children:[(0,j.jsx)(Te,{pool:n,multiple:F,selectedOption:F?void 0:T,reload:()=>{null===s||void 0===s||s(),I(0),null===i||void 0===i||i()},amountOut:N,loading:y||M,isDisabled:z,setTransactionLoading:P}),(0,j.jsx)(f.A.Outline,{color:"primary",borderColor:"primary",border:"1.5px solid",onClick:i,children:b("navigation:back")})]})]})})]})]})};var Me=n(12361);const Pe=function(e,t,n,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q.qZ;return o?(0,l.Ss)(t,e,n,i):(0,l._Y)(t,e,n,i)},Fe=e=>{var t,n;let{label:o,pool:i,reload:s,multiple:l,loading:a,selectedOption:r,amountOut:c,setTransactionLoading:u}=e;const p=(0,ve.F7)(),{t:h}=(0,x.B)(["liquidityModals","errors"]),{reportError:v}=(0,Ae.dh)(),{track:A}=(0,ce.A)(),k=(0,m.useMemo)((()=>(0,d.lW)(c)),[c]),f=k.eq(0)||a,y=(0,ue.A)(!1),[w,b]=(0,m.useState)(!1),T=l?i.tokens.some((e=>{var t,n;return null===(t=e.xToken)||void 0===t||null===(n=t.cpkBalance)||void 0===n?void 0:n.gt(0)})):null===r||void 0===r||null===(t=r.xToken)||void 0===t||null===(n=t.cpkBalance)||void 0===n?void 0:n.gt(0),S=(0,m.useCallback)((async()=>{if(p)if(!T||y.isOpen||w){b(!1),u(!0);try{const e=await je.F.exitPool(p,i,l?i.tokens:r,k);e&&(await A(e,{confirm:{secondaryMessage:h("liquidityModals:removeSuccess",{amount:(0,me.A)(k)})}}),setTimeout((()=>null===s||void 0===s?void 0:s()),q.Td))}catch(e){v(e)}finally{u(!1)}}else y.open()}),[p,T,y,w,u,i,l,r,k,A,h,s,v]),C=(0,m.useCallback)((async()=>{if(p)if(!T||y.isOpen||w){b(!1),u(!0);try{const e=await we.G.getInstance();let t;l?t=await e.exitPool(p,i.controller,i.tokensList,fe.parseUnits((0,d.lW)(c).toFixed(0),q.Fx),i.tokensList.map((e=>{const t=i.tokens.find((t=>{var n;return(0,ve.af)(null===(n=t.xToken)||void 0===n?void 0:n.id,e)}));return void 0===t?ke.gH.from(0):ke.gH.from(Pe(k,i,t,!0).toFixed(0))}))):void 0!==r&&(t=await e.exitswapPoolAmountIn(p,i.controller,r.address,fe.parseUnits((0,d.lW)(c).toFixed(q.Fx),q.Fx),ke.gH.from(Pe(k,i,r,!1).toFixed(0)))),void 0!==t&&(await A(t,{confirm:{secondaryMessage:h("liquidityModals:addSuccess",{amount:(0,me.A)(c)})}}),setTimeout((()=>null===s||void 0===s?void 0:s()),q.Td))}catch(e){v(e)}finally{u(!1)}}else y.open()}),[p,k,c,y,w,l,i,s,v,r,u,h,A,T]),W=(0,m.useCallback)((async()=>{y.close(),b(!0),i.crp?await C():await S()}),[y,i.crp,S,C]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ge.A,{requireInitiated:!0,requireAccount:!0,requireTier:pe.Ju.tier1,mr:3,disabled:f,loading:a,onClick:i.crp?C:S,loadingText:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.A,{mr:2,color:"white"}),o]}),children:o}),(0,j.jsx)(ye.A,{onClose:y.close,isOpen:y.isOpen,onConfirm:W,tokenOut:l?void 0:r})]})};var Be=n(18158);const Oe=e=>{let{checked:t=!1,onSelect:n,onChange:o,value:i,disabled:s=!1}=e;const{t:l}=(0,Be.A)("liquidityModals",["remove"]);return(0,j.jsxs)(v.A,{width:"100%",justifyContent:"space-between",alignItems:"center",height:"96px",px:2,borderBottom:"1px solid",borderColor:"light-gray",flex:"1 0 96px",children:[(0,j.jsxs)(v.A,{children:[(0,j.jsx)(W.A,{onChange:n,checked:t,disabled:s}),(0,j.jsxs)(v.A,{flexDirection:"column",color:s?"grey":"black",children:[(0,j.jsxs)(A.A,{children:[(0,j.jsx)(k.A.span,{fontWeight:5,lineHeight:"24px",children:l("removeMultipleTitle")})," "]}),(0,j.jsx)(k.A.span,{color:"grey",fontSize:1,lineHeight:"20px",children:l("removeMultipleSubtitle")})]})]}),t&&(0,j.jsx)(z,{value:i,width:"200px",onChange:o,endAdornment:"%",min:0,max:100,sliderOptions:{variant:"danger"},disabled:s})]})},Ne=e=>{const{confirmButton:t,isOpen:n,onClose:o}=e,{t:i}=(0,x.B)(["liquidityModals","navigation"]);return(0,j.jsxs)(c.A,{isOpen:n,width:["100%","500px"],onClose:o,title:i("liquidityModals:removeRemainingConfirmation.header"),p:"24px",children:[(0,j.jsx)(k.A.p,{marginTop:0,marginBottom:4,children:i("liquidityModals:removeRemainingConfirmation.body")}),(0,j.jsxs)(v.A,{justifyContent:"start",alignItems:"center",children:[t,(0,j.jsx)(f.A.Outline,{color:"primary",borderColor:"primary",border:"1.5px solid",onClick:o,children:i("liquidityModals:removeRemainingConfirmation.cancel")})]})]})},Le=e=>{var t;let{token:n,checked:o=!1,value:i=0,multiple:s=!1,onSelect:l,onChange:a,sptToRemove:c,disabled:u=!1}=e;const{t:p}=(0,x.B)("liquidityModals"),h=(0,m.useMemo)((()=>(0,d.lW)(i).times(c).div(100)),[i,c]),g=(0,m.useMemo)((()=>h.times((null===n||void 0===n?void 0:n.exchangeRate)||0)),[h,null===n||void 0===n?void 0:n.exchangeRate]);return(0,j.jsx)("li",{title:null!==(t=n.xToken)&&void 0!==t&&t.paused?p("remove.assetNotAvailableForRemoveLiquidity"):void 0,children:(0,j.jsxs)(v.A,{width:"100%",justifyContent:"space-between",alignItems:"center",height:"96px",px:2,children:[(0,j.jsxs)(v.A,{alignItems:"center",children:[(0,j.jsx)(W.A,{onChange:l,checked:o,disabled:u}),(0,j.jsx)(G.A,{disabled:u,height:"28px",width:"28px",symbol:n.symbol,name:n.name,mr:2}),(0,j.jsxs)(v.A,{flexDirection:"column",color:u?"grey":"black",children:[(0,j.jsxs)(A.A,{children:[(0,j.jsxs)(k.A.span,{fontWeight:5,lineHeight:"24px",children:[n.symbol," "]}),(0,j.jsx)(k.A.span,{lineHeight:"24px",children:n.name})]}),(0,j.jsxs)(k.A.span,{color:"grey",fontSize:1,lineHeight:"20px",display:o||s?"inline":"none",children:[(0,r.GM)((0,d.lW)(i),4)," available to receive"]})]})]}),o&&(0,j.jsxs)(v.A,{flexDirection:"column",alignItems:"center",children:[(0,j.jsx)(z,{width:"200px",min:0,max:100,value:c,sliderOptions:{variant:"danger"},onChange:a,endAdornment:"%",disabled:u}),(0,j.jsxs)(k.A.span,{px:3,width:"100%",color:"grey",fontSize:1,textAlign:"right",children:[(0,r.GM)(h,4)," ",n.symbol," ($",(0,r.GM)(g),")"]})]}),s&&(0,j.jsxs)(v.A,{flexDirection:"column",children:[(0,j.jsx)(A.A,{textAlign:"right",children:(0,j.jsxs)(k.A.span,{fontWeight:5,children:[(0,r.GM)(h,4)," ",n.symbol]})}),(0,j.jsxs)(k.A.span,{color:"grey",fontSize:1,textAlign:"right",children:["$",(0,r.GM)(g)]})]})]})})},{isProduction:Re}=b.Ay,Ee=e=>{let{pool:t,isOpen:n=!1,onClose:o,reload:i,loading:s=!1}=e;const{t:a}=(0,x.B)(["liquidityModals","navigation","pools"]),[u,p]=(0,m.useState)("all"),[h,y]=(0,m.useState)(0),[b,T]=(0,m.useState)(!1),[S,W]=(0,m.useState)(!1),I=e=>{y(0),p(e)},M=Number((null===t||void 0===t?void 0:t.totalShares)||0),P=(0,m.useMemo)((()=>(0,d.lW)(null===t||void 0===t?void 0:t.userShare)),[null===t||void 0===t?void 0:t.userShare]),F=M?P.div(M).toNumber():0;(0,m.useEffect)((()=>{if(null!==t&&void 0!==t&&t.isAnyAssetPaused&&F>0){const e=t.tokens.find((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.xToken)&&void 0!==t&&t.paused)}));e&&p(e)}}),[null===t||void 0===t?void 0:t.isAnyAssetPaused,t.tokens,F]);const B="all"===u,O=(0,m.useMemo)((()=>B?P:(0,d.jk)((0,l.Cj)(t,u),P)),[B,t,u,P]).times(h/100),N=()=>{null===i||void 0===i||i(),y(0),null===o||void 0===o||o()},L=P.minus(O),R={poolTokensToIssue:O,userPoolTokenBalance:P,tokens:t.tokens,id:t.id||"",swapFee:t.swapFee,totalShares:t.totalShares||"0"},E=1===parseInt(t.holdersCount,10)&&100===h;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.A,{isOpen:n,width:["100%","auto"],minWidth:[0,0,"800px"],onClose:o,title:a("liquidityModals:remove.header"),p:"24px",children:(0,j.jsxs)(v.A,{overflow:"hidden",display:"flex",flexDirection:"row",children:[(0,j.jsx)(ae,{...R,action:"remove"}),(0,j.jsxs)(v.A,{pl:"24px",flex:"1 1 auto",flexDirection:"column",children:[(0,j.jsx)(w,{text:P.gt(0)?!0===(null===t||void 0===t?void 0:t.isAnyAssetPaused)?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Me.A,{name:"Warning"}),(0,j.jsx)(k.A.span,{color:"warning",pl:2,children:a("pools:suspendedSoonWarning")})]}):a("remove.selectAssetsToRemove"):a("remove.noAssetsToRemove")}),t.tokens.length?(0,j.jsxs)(j.Fragment,{children:[!!F&&!(null!==t&&void 0!==t&&t.isAnyAssetPaused)&&(0,j.jsx)(Oe,{onSelect:()=>I("all"),value:h,checked:"all"===u,onChange:y,disabled:b}),(0,j.jsx)(C,{children:t.tokens.map((e=>{var n;return(0,j.jsx)(Le,{token:e,sptToRemove:h,checked:"all"!==u&&(null===u||void 0===u?void 0:u.address)===e.address,onSelect:()=>I(e),onChange:y,multiple:B,value:(0,d.S8)((0,l.yS)(t,P,e,B,0),e.decimals).toNumber(),disabled:Re()&&!(null!==t&&void 0!==t&&t.isAnyAssetPaused)||!(null===e||void 0===e||null===(n=e.xToken)||void 0===n||!n.paused)||b||!F},e.address)}))})]}):(0,j.jsx)(v.A,{justifyContent:"center",alignItems:"center",height:"100%",children:(0,j.jsx)(g.A,{size:"48px"})}),(0,j.jsxs)(A.A,{width:"100%",px:2,mb:"24px",children:[(0,j.jsxs)(v.A,{justifyContent:"space-between",height:"24px",children:[(0,j.jsx)(k.A.span,{children:"SPT amount:"}),(0,j.jsxs)(k.A.span,{color:O.eq(0)?"grey":"danger",fontWeight:5,children:[O.eq(0)?0:"- ".concat((0,r.GM)(O))," ","SPT"]})]}),(0,j.jsxs)(v.A,{justifyContent:"space-between",children:[(0,j.jsx)(k.A.span,{color:"grey",children:"Your new SPT balance:"}),(0,j.jsxs)(k.A.span,{color:"grey",fontWeight:5,children:[(0,r.GM)(L)," SPT"]})]})]}),(0,j.jsxs)(A.A,{children:[E?(0,j.jsx)(f.A,{color:"primary",mr:3,disabled:O.eq(0),onClick:()=>{W(!0)},children:a("liquidityModals:remove.header")}):(0,j.jsx)(Fe,{label:a("liquidityModals:remove.header"),amountOut:O,multiple:B,pool:t,setTransactionLoading:T,loading:s||b,reload:N,selectedOption:B?void 0:u}),(0,j.jsx)(f.A.Outline,{color:"primary",borderColor:"primary",border:"1.5px solid",onClick:o,children:a("navigation:back")})]})]})]})}),(0,j.jsx)(Ne,{confirmButton:(0,j.jsx)(Fe,{label:a("liquidityModals:removeRemainingConfirmation.confirm"),amountOut:O,multiple:B,pool:t,setTransactionLoading:T,loading:s||b,reload:N,selectedOption:B?void 0:u}),isOpen:S,onClose:()=>{W(!1)}})]})};var ze=n(18923);const De=e=>{let{openModal:t,onClose:n,loading:l=!1,reload:a,pool:r}=e;const{pool:d,loading:c,refetch:u}=(0,ze.A)(t&&"string"===typeof r?r:void 0),p="string"===typeof r?d:r,h=()=>{u(),null===a||void 0===a||a()};return!!p&&(0,s.A)(t).equals("add").then((0,j.jsx)(i.A,{name:o.A.addLiqudity,children:(0,j.jsx)(Ie,{isOpen:!0,onClose:()=>n("add"),pool:p,reload:h,loading:l||c||!p})})).equals("remove").then((0,j.jsx)(Ee,{isOpen:!0,onClose:()=>n("remove"),pool:p,reload:h,loading:l||c||!p})).else(null)}},40905:(e,t,n)=>{"use strict";n.d(t,{A:()=>yt});var o=n(92109),i=n(71310),s=n(81746);var l=n(53840),a=n(76958),r=n(82488),d=n(8214),c=n(12361),u=n(83843),p=n(4155),h=n(25421),m=n(636),x=n(86668),v=n(14623),g=n(98251),A=n(35839),k=n(90479),f=n(66790),y=n(17705),j=n(4269),w=n(24537);const b=(0,k.Ay)(x.A)(["font-weight:700;font-size:22px;line-height:28px;"]),T=(0,k.Ay)(x.A.span)(["color:",";font-weight:400;font-size:14px;line-height:20px;"],(e=>{let{theme:t}=e;return t.colors.grey})),S=e=>{let{liquidity:t,myPoolShare:n,swapFee:o,volume:i}=e;const{t:s}=(0,u.B)("poolDetails");return(0,w.jsxs)(j.A,{gridTemplateColumns:["1fr 1fr","1fr 1fr","1fr 1fr 1fr 1fr"],gridGap:["48px","32px"],mx:"1",mt:"2",mb:"4",children:[(0,w.jsxs)(p.A,{children:[(0,w.jsxs)(b,{title:"$".concat((0,f.GM)(t)),children:["$",(0,f.x4)(t)]}),(0,w.jsx)(T,{children:s("poolBoxes.liquidity")})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsxs)(b,{title:"$".concat((0,f.GM)(i)),children:["$",(0,f.x4)(i)]}),(0,w.jsx)(T,{children:s("poolBoxes.volume")})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsxs)(b,{children:[(0,y.f)(o),"%"]}),(0,w.jsx)(T,{children:s("poolBoxes.swapFee")})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsxs)(b,{children:[(0,y.f)(100*n),"%"]}),(0,w.jsx)(T,{children:s("poolBoxes.myPoolShare")})]})]})};var C=n(27958),W=n(50539),I=n(3921),M=n(71168),P=n(90055),F=n(60614),B=n(55315),O=n(53787),N=n(16512),L=n(93086),R=n(78998);const E={axisLine:!1,tickLine:!1,tickMargin:10,stroke:"#9FA3BC",strokeWidth:2},z=e=>{let{data:t,yAxisTickFormatter:n,children:i}=e;const s=(0,o.useRef)(null),[l,a]=(0,o.useState)(40*t.length);return(0,o.useEffect)((()=>{s.current&&(s.current.scrollTo({top:0,left:l}),s.current.clientWidth>l&&a(s.current.clientWidth))}),[l]),(0,w.jsxs)(m.A,{width:"100%",height:"100%",justifyContent:"flex-end",children:[(0,w.jsx)(N.A,{innerRef:s,style:{width:"inherit"},children:(0,w.jsx)(L.u,{width:l,children:i})}),(0,w.jsx)(p.A,{height:"100%",width:70,children:(0,w.jsx)(L.u,{children:(0,w.jsxs)(R.b,{data:t,margin:{right:15},children:[(0,w.jsx)(P.W,{dataKey:"time",width:0}),(0,w.jsx)(M.h,{...E,dataKey:"value",domain:["auto","auto"],orientation:"right",tickFormatter:n})]})})})]})},D=e=>{let{metrics:t,timestamps:n,yAxisTickFormatter:i,tooltipFormatter:s}=e;const[l,a]=(0,o.useState)(null),r=(0,o.useMemo)((()=>(0,C.Wd)(n,t)),[t,n]);return(0,w.jsx)(z,{data:r,yAxisTickFormatter:i,children:(0,w.jsxs)(I.E,{data:r,margin:{right:10},barCategoryGap:2,children:[(0,w.jsx)(M.h,{domain:["auto","auto"],width:0,orientation:"right"}),(0,w.jsx)(P.W,{...E,dataKey:"time",interval:1,tickFormatter:C.Mm}),(0,w.jsx)(F.m,{isAnimationActive:!1,allowEscapeViewBox:{x:!1,y:!1},labelFormatter:()=>"",itemStyle:{color:"#fff"},cursor:!1,contentStyle:{backgroundColor:W.Q1.greyDark,borderRadius:"4px",padding:"8px",visibility:null!==l?"visible":"hidden"},separator:"",formatter:e=>[s(e),""]}),(0,w.jsx)(B.y,{dataKey:"value",fill:W.Ay.colors.primary,onMouseEnter:(e,t)=>a(t),onMouseLeave:()=>a(null),children:r.map(((e,t)=>{let{time:n}=e;return(0,w.jsx)(O.f,{style:{transition:".5s"},fill:null===l||t===l?W.Ay.colors.primary:"".concat(W.Ay.colors.primary,"30")},n)}))})]})})};var q=n(29007),U=n(17099),_=n(25185);const G=e=>{let{metrics:t,timestamps:n,yAxisTickFormatter:i,tooltipFormatter:s}=e;const l=(0,o.useMemo)((()=>(0,q.Wd)(n,t)),[t,n]);return(0,w.jsx)(z,{data:l,yAxisTickFormatter:i,children:(0,w.jsxs)(U.Q,{data:l,margin:{right:10},children:[(0,w.jsx)(M.h,{domain:["auto","auto"],width:0,orientation:"right"}),(0,w.jsx)(P.W,{...E,dataKey:"time",interval:1,tickFormatter:q.Mm}),(0,w.jsx)(_.G,{strokeWidth:2,type:"linear",dataKey:"value",fill:"#fef5ed",stroke:"#F2994A"}),(0,w.jsx)(F.m,{isAnimationActive:!1,cursor:{stroke:"grey",strokeWidth:1,strokeDasharray:"4"},allowEscapeViewBox:{x:!1,y:!1},labelFormatter:()=>"",itemStyle:{color:"#fff"},contentStyle:{backgroundColor:W.Q1.greyDark,borderRadius:"4px",padding:"8px"},separator:"",formatter:e=>[s(e),""]})]})})};var X=n(18508),H=n(28008),K=n(39318),V=n(9336),Z=n(1500),$=n(38006),J=n(95921),Q=n(68996),Y=n(2090),ee=n(37729),te=n(46083);const ne=(e,t)=>+e.replace("stamp_","")-+t.replace("stamp_",""),oe=(e,t)=>{const{current:n}=(0,o.useRef)((0,J.A)()),i=(0,o.useMemo)((()=>[...Array.from({length:31})].reduce(((t,o,i)=>{const s=(0,Q.default)(n,i),l=(0,Y.A)(s);return{...t,["stamp_".concat(l)]:{__aliasFor:"swaps",__args:{first:1,orderBy:"timestamp",orderDirection:"desc",where:{poolAddress:e,timestamp_gt:l,timestamp_lt:(0,Y.A)((0,ee.default)(s,1))}},poolTotalSwapVolume:!0,poolTotalSwapFee:!0,poolLiquidity:!0}}}),{})),[e,n]),s=(0,te.jsonToGraphQLQuery)({query:i}),{data:l,loading:r,error:d}=(0,Z.I)((0,$.J1)(s),{skip:!s,fetchPolicy:"no-cache"}),c=(0,o.useMemo)((()=>Object.keys(l||{}).sort(ne)),[l]),u=(0,o.useMemo)((()=>c.map((e=>+e.replace("stamp_","")))),[c]),p=(0,o.useMemo)((()=>null===c||void 0===c?void 0:c.reduce(((e,t,n)=>({...e,[u[n]]:null!==l&&void 0!==l&&l[t].length?null===l||void 0===l?void 0:l[t][0]:e[u[n-1]]||{}})),{})),[l,c,u]),h=(0,o.useMemo)((()=>u.reduce(((e,n)=>({...e,[n]:0===(0,a.lW)(null===p||void 0===p?void 0:p[n].poolLiquidity).toNumber()?0:t.mul((0,a.lW)(null===p||void 0===p?void 0:p[n].poolLiquidity)).toNumber()})),{})),[t,p,u]),m=(0,o.useMemo)((()=>u.reduce(((e,n,o)=>{var i;if(0===o)return e;const s=(0,a.lW)(null===p||void 0===p?void 0:p[n].poolTotalSwapVolume),l=(0,a.lW)(null===p||void 0===p||null===(i=p[u[o-1]])||void 0===i?void 0:i.poolTotalSwapVolume);return{...e,[n]:s.minus(l).mul(t).toNumber()}}),{})),[t,p,u]),x=(0,o.useMemo)((()=>u.reduce(((e,t,n)=>{var o;if(0===n)return e;const i=(0,a.lW)(null===p||void 0===p?void 0:p[t].poolTotalSwapFee).toNumber()-(0,a.lW)(null===p||void 0===p||null===(o=p[u[n-1]])||void 0===o?void 0:o.poolTotalSwapFee).toNumber(),s=h[t];return{...e,[t]:i/s*365*100||0}}),{})),[p,u,h]);return{timestamps:u.slice(1),liquidityMetrics:h,volumeMetrics:m,swapFeeMetrics:x,loading:r,error:d}},ie=e=>{let{poolAddress:t,liquidityMultiplier:n}=e;const{t:i}=(0,u.B)("poolDetails"),[s,l]=(0,o.useState)(0),{timestamps:a,liquidityMetrics:r,swapFeeMetrics:d,volumeMetrics:c,loading:h,error:m}=oe(t,n),x=(0,o.useCallback)(((e,t)=>{t!==s&&l(t)}),[s]),v=(0,o.useMemo)((()=>({timestamps:a,yAxisTickFormatter:e=>"$".concat((0,f.x4)(e)),tooltipFormatter:e=>"$ ".concat((0,f.GM)(e))})),[a]),g=(0,o.useMemo)((()=>({timestamps:a,metrics:d,yAxisTickFormatter:e=>"".concat(e,"%"),tooltipFormatter:e=>"".concat((0,y.f)(e),"%")})),[d,a]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(X.s,{value:s,onChange:x,"aria-label":"chart tabs",children:[(0,w.jsx)(H.A,{label:i("charts.liquidity")}),(0,w.jsx)(H.A,{label:i("charts.volume")}),(0,w.jsx)(H.A,{label:i("charts.feeReturns")})]}),(0,w.jsx)(p.A,{role:"tabpanel",height:"285px",children:h&&(0,w.jsx)(V.A,{m:"auto"})||m&&"An error occurred!"||(0,K.A)(s).equals(0).then((0,w.jsx)(G,{metrics:r,...v})).equals(1).then((0,w.jsx)(D,{metrics:c,...v})).equals(2).then((0,w.jsx)(G,{...g})).else(null)})]})};var se=n(53521),le=n(62505),ae=n(61541),re=n(97266),de=n(63668),ce=n(17689),ue=n(59838),pe=n(1107),he=n(51861);const me=e=>{let{poolToken:{name:t,symbol:n,xToken:o},extraRewards:i,isSmartPool:s,isAddingToken:l,isChangingWeights:a,onAddLiquidityClick:r,onRemoveLiquidityClick:d,isAddLiquidityDisabled:h}=e;const{t:v}=(0,u.B)("poolDetails"),g=(0,se.A)(),A=(0,le.A)(g.breakpoints.up("md"));return(0,w.jsxs)(pe.A,{my:1,display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",children:[(0,w.jsxs)(p.A,{display:"flex",children:[(0,w.jsx)(ue.A,{symbol:n,name:t,width:"32px",height:"32px"}),(0,w.jsxs)(m.A,{ml:"2",flexDirection:"column",children:[(0,w.jsx)(x.A.span,{lineHeight:"32px",fontSize:4,fontWeight:5,ml:"8px",children:t}),(0,w.jsx)(x.A.span,{lineHeight:"20px",fontSize:"14px",fontWeight:5,ml:"10px",color:"grey",children:n})]}),l?(0,w.jsx)(de.A,{placement:"top",message:v("addTokenInProgress"),children:(0,w.jsx)(ae.A,{size:"20",ml:2,mr:3,style:{marginTop:"4px"},color:"warning"})}):null,a?(0,w.jsx)(de.A,{placement:"top",message:v("weightUpdateInProgress"),children:(0,w.jsx)(ae.A,{size:"20",ml:2,mr:3,style:{marginTop:"4px"},color:"warning"})}):null,i||s?(0,w.jsxs)(m.A,{ml:"3",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",style:{gap:"8px"},children:[i?(0,w.jsx)(x.A.span,{style:{flexShrink:0},lineHeight:"32px",fontSize:4,fontWeight:5,children:(0,w.jsx)(c.A,{name:"PoolExtraRewards",width:"33px"})}):null,s?(0,w.jsx)(x.A.span,{style:{flexShrink:0},lineHeight:"32px",fontSize:"0.75rem",fontWeight:5,color:"primary",fontStyle:"italic",children:"SMART"}):null]}):null]}),(0,w.jsxs)(m.A,{mt:["10px","10px","10px",0],flexWrap:"nowrap",children:[(0,w.jsx)(ce.A,{name:re.A.addLiqudity,children:(0,w.jsx)(he.A,{onClick:r,title:v("addLiquidity"),fontWeight:"600",fontSize:"16px",height:"40px",icon:A?"Add":"",mr:"16px",px:["10px","16px"],disabled:h||(null===o||void 0===o?void 0:o.paused),children:v("addLiquidity")})}),(0,w.jsx)(he.A,{onClick:d,title:v("removeLiquidity"),fontWeight:"600",fontSize:"16px",height:"40px",icon:A?"Remove":"",mainColor:"#262626",px:["10px","16px"],disabled:null===o||void 0===o?void 0:o.paused,children:v("removeLiquidity")})]})]})};var xe=n(61336),ve=n(18158),ge=n(40608),Ae=n(34076),ke=n(70916),fe=n(78500);const ye=(0,k.Ay)(x.A)(["font-size:14px;font-weight:600;line-height:20px;color:",";margin-bottom:4px;"],(e=>{let{theme:t}=e;return t.colors.grey})),je=(0,k.Ay)(x.A)(["word-break:break-all;font-weight:normal;font-size:16px;line-height:24px;display:flex;flex-wrap:wrap;color:",";"],(e=>{let{theme:t}=e;return t.colors.black})),we=(0,k.Ay)(Ae.A)(["text-decoration:none !important;color:",";word-break:break-all;font-weight:normal;font-size:16px;line-height:24px;align-items:center;display:flex;&:hover,&:active,&:focus,&.active{opacity:1;color:",";}"],(e=>{let{theme:t}=e;return t.colors["near-black"]}),(e=>{let{theme:t}=e;return t.colors.grey})),be=e=>{let{controller:t,crp:n,crpController:i,cap:s,rights:l,minimumWeightChangeBlockPeriod:a,addTokenTimeLockInBlocks:r,createTime:d,publicSwap:c,totalShares:h,totalSwapFee:x,totalSwapVolume:v,tokens:g,tx:A,liquidityPoolToken:k}=e;const{t:y}=(0,ve.A)("poolDetails",["poolTabs","about"]),{t:b}=(0,u.B)("poolDetails"),T=n?i:t;return(0,w.jsxs)(j.A,{gridTemplateColumns:["1fr","1fr 1fr 1fr"],gridGap:["16px","32px"],mt:"8px",children:[(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("poolType")}),(0,w.jsx)(je,{children:b("poolTypes.".concat(n?"smart":"shared"))})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("controller")}),(0,w.jsxs)(m.A,{children:[(0,w.jsx)(ge.A,{address:T,mr:"8px"}),(0,w.jsx)(we,{type:"address",hash:T})]})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("creationDate")}),(0,w.jsx)(we,{type:"tx",hash:A,label:(0,o.useMemo)((()=>(0,ke.default)((0,fe.A)(d),"MMM dd, yyyy hh:mm aa")),[d])})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("sptAsset")}),(0,w.jsx)(we,{type:"token",hash:k.id,label:(0,q.hA)(k.id)})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("sptTotalSupply")}),(0,w.jsxs)(je,{title:(0,f.GM)(h),children:[(0,f.x4)(h)," ",b("poolTabs.about.sptCap",{cap:null===s?y("unlimited"):(0,f.x4)(s)})]})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("assetInfo")}),(0,w.jsx)(je,{children:(0,w.jsx)(m.A,{justifyContent:"flex-start",alignItems:"baseline",style:{gap:"14px"},children:g.map((e=>{let{id:t,symbol:n}=e;return(0,w.jsx)(we,{type:"address",hash:t,label:n},t)}))})})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("publicSwap")}),(0,w.jsx)(je,{children:c?"Enabled":"Disabled"})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("totalSwapVolume")}),(0,w.jsxs)(je,{title:(0,f.GM)(v),children:["$ ",(0,f.x4)(v)]})]}),(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("totalSwapFee")}),(0,w.jsxs)(je,{title:(0,f.GM)(x),children:["$ ",(0,f.x4)(x)]})]}),n?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("rights")}),(0,w.jsx)(je,{flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",textAlign:"left",children:l.length>0?l.map((e=>(0,w.jsx)("span",{children:b("smartPoolRights.".concat(e))},e))):y("none")})]}):null,n?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("minimumGradualUpdateDuration")}),(0,w.jsxs)(je,{children:[a," ",y("blocks")]})]}):null,n?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ye,{children:y("addTokenTimeLock")}),(0,w.jsxs)(je,{children:[r," ",y("blocks")]})]}):null]})};var Te=n(52007),Se=n(86633);function Ce(){return(0,Te.A)(Se.Y)}var We=n(67122),Ie=n(45704),Me=n(96047),Pe=n(52687);const Fe=k.Ay.td(["",""],Ie.Zp),Be=e=>{let{name:t,symbol:n,weight:o,targetWeight:i,poolBalance:s,userBalance:l,userAssetValue:a,address:r,remainingBlocksUntilAddTokenTimeLock:d=0,remainingBlocksBeforeWeightsUpdateEndBlock:c=0,isBeingAdded:u}=e;const{t:p}=(0,ve.A)("poolDetails",["poolTabs","balances","th"]);return(0,w.jsxs)("tr",{children:[(0,w.jsx)(Fe,{children:(0,w.jsxs)(m.A,{ml:2,alignItems:"center",children:[(0,w.jsx)(ue.A,{symbol:n,name:t,width:"20px",height:"20px",mr:"10px"}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:5,children:n}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:2,ml:"8px",children:t}),(0,w.jsx)(Ae.A,{type:"token",hash:r,label:""}),!0===u||void 0!==i?(0,w.jsx)(de.A,{placement:"top",message:u?p("remainingBlocksUntilAddTokenTimeLock",{blocksCount:d}):p("remainingBlocksBeforeWeightsUpdateEndBlock",{blocksCount:c}),children:(0,w.jsx)(Pe.A,{variant:"warning",p:"4px",paddingLeft:"8px",paddingRight:"8px",width:"fit-content",ml:"16px",children:(0,w.jsx)(x.A.span,{fontWeight:5,style:{display:"block",textAlign:"center",fontSize:"12px",textTransform:"uppercase"},children:p(!0===u?"pendingAddition":"pendingChange")})})}):null]})}),(0,w.jsx)(Fe,{children:(0,w.jsxs)(m.A,{justifyContent:"flex-end",alignItems:"center",children:[(0,w.jsxs)(x.A,{fontSize:2,fontWeight:2,color:"black",textAlign:"right",children:[(0,y.f)(o),"%"," "]}),void 0!==i?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Me.A,{color:"warning",size:"20",ml:"6px",mr:"6px"}),(0,w.jsxs)(x.A,{fontSize:2,fontWeight:2,color:"warning",textAlign:"right",children:[(0,y.f)(i),"%"]})]}):null]})}),(0,w.jsx)(Fe,{display:["none","table-cell"],children:(0,w.jsx)(x.A,{title:(0,f.GM)(s||0,18),fontSize:2,fontWeight:2,color:"black",textAlign:"right",children:(0,f.yi)(s||0)})}),(0,w.jsx)(Fe,{display:["none","table-cell"],children:(0,w.jsx)(x.A,{title:(0,f.GM)(l,2,6),fontSize:2,fontWeight:2,color:"black",textAlign:"right",children:(0,f.yi)(l)})}),(0,w.jsx)(Fe,{display:["none","table-cell"],children:(0,w.jsxs)(x.A,{title:(0,f.GM)(a),fontSize:2,fontWeight:2,color:"black",textAlign:"right",children:["$",(0,f.x4)(a)]})})]})},Oe=k.Ay.th([""," ",""],Ie.Zp,Ie.Jh),Ne=e=>{let{tokens:t,myPoolShare:n,addTokenTimeLockInBlocks:i,newCRPoolToken:s,crpoolGradualWeightsUpdate:l}=e;const{t:r}=(0,ve.A)("poolDetails",["poolTabs","balances","th"]),d=Ce(),c=null!==s&&void 0!==d?parseInt(s.commitBlock,10)+parseInt(i,10)-d:0,u=(0,o.useMemo)((()=>t.map((e=>{let{address:t,name:o,symbol:i,poolBalance:s,exchangeRate:l,weight:r,targetWeight:d}=e;return{address:t,name:o,symbol:i,poolBalance:s,targetWeight:d,userBalance:(0,a.lW)(s).times(n).toNumber(),userAssetValue:(0,a.lW)(s).times(n).times(l||0).toNumber(),weight:100*(r||0)}}))),[t,n]);return(0,w.jsxs)(We.A,{children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)(Oe,{children:r("assets")}),(0,w.jsx)(Oe,{width:"120px",textAlign:"right",children:r("weight")}),(0,w.jsx)(Oe,{width:"120px",display:["none","table-cell"],textAlign:"right",children:r("poolBalance")}),(0,w.jsx)(Oe,{width:"120px",display:["none","table-cell"],textAlign:"right",children:r("myBalance")}),(0,w.jsx)(Oe,{width:"150px",display:["none","table-cell"],textAlign:"right",children:r("myAssetValue")})]})}),(0,w.jsxs)("tbody",{children:[u.map((e=>{const t=null!==l&&void 0!==d?parseInt(l.endBlock,10)-d:0;return(0,w.jsx)(Be,{...e,remainingBlocksBeforeWeightsUpdateEndBlock:t},e.address)})),null!==s?(0,w.jsx)(Be,{address:s.id,name:s.token.name,symbol:s.token.symbol,weight:0,targetWeight:String(s.weight),userBalance:0,userAssetValue:0,remainingBlocksUntilAddTokenTimeLock:c,isBeingAdded:!0},s.id):null]})]})};var Le=n(16823),Re=n(62038),Ee=n(35979),ze=n(15310),De=n(32522),qe=n(79135),Ue=n(21870);const _e=e=>{const{data:t,loading:n,error:i,fetchMore:s,networkStatus:l,refetch:a}=(0,Z.I)(qe.fj,{variables:{filter:{balance_gt:0,poolId:e},limit:10,skip:0},fetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0,pollInterval:Ue.a0}),r=(0,o.useCallback)((t=>s({variables:{filter:{poolId:e,balance_gt:0},limit:10,skip:t}})),[s,e]),d=(0,o.useCallback)((e=>a({filter:{balance_gt:0,poolId:e},limit:10,skip:0})),[a]);return{data:t,loading:n||![De.pT.ready,De.pT.error].includes(l),error:i,refetching:l===De.pT.refetch,refetch:d,fetchMore:r}},Ge=e=>{let{shareInfo:t}=e;const{balance:n,userAddress:o,sptValue:i,totalShares:s,poolToken:l}=t;return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:(0,w.jsxs)(m.A,{alignItems:"center",children:[(0,w.jsx)(ge.A,{address:o.id,mr:"16px"}),(0,w.jsx)(Ae.A,{type:"address",hash:o.id})]})}),(0,w.jsx)("td",{children:o.proxyAddress?(0,w.jsxs)(m.A,{alignItems:"center",children:[(0,w.jsx)(ge.A,{address:o.proxyAddress,mr:"16px"}),(0,w.jsx)(Ae.A,{type:"address",hash:o.proxyAddress})]}):"--"}),(0,w.jsx)("td",{children:(0,w.jsxs)(x.A.span,{title:(0,f.GM)(n,8),children:[(0,f.yi)(n,3)," ",l.symbol]})}),(0,w.jsx)("td",{children:(0,w.jsxs)(x.A.span,{title:(0,f.GM)((0,a.lW)(n).times(i)),children:["$ ",(0,f.yi)((0,a.lW)(n).times(i),3)]})}),(0,w.jsx)("td",{children:(0,w.jsxs)(x.A.span,{children:[(0,f.GM)((0,a.lW)(n).times(100).div(s),2,2),"%"]})})]})},{proxy:Xe}=Le.Ay.resources.docs.gettingStarted,He=(0,k.Ay)(Re.A)(["th,td{&:nth-last-child(-n + 3){text-align:right;}}td{color:",";}.small-cols col{width:20%;}@media (max-width:","){col.value,col.proxy{width:0px;}}"],(e=>e.theme.colors.black),(e=>{var t;let{theme:n}=e;return null===(t=n.breakpoints)||void 0===t?void 0:t[1]})),Ke=e=>{let{poolAddress:t,liquidity:n,totalShares:i,poolToken:s}=e;const{t:l}=(0,ve.A)("poolDetails",["poolTabs","holders","th"]),[r,d]=(0,o.useState)(!0),{data:c,loading:u,refetching:p,fetchMore:h,refetch:m}=_e(t);(0,o.useLayoutEffect)((()=>{m(t)}),[t,m]);const x=(0,o.useCallback)((async()=>{if(c&&r&&!u){const{data:{poolShares:e}}=await h(null===c||void 0===c?void 0:c.poolShares.length);d(10===e.length)}}),[c,h,r,u]),v=(0,o.useMemo)((()=>null===c||void 0===c?void 0:c.poolShares.map((e=>({...e,sptValue:i?(0,a.lW)(n).div(i).toNumber():0,totalShares:i,poolToken:s})))),[null===c||void 0===c?void 0:c.poolShares,n,i,s]);return(0,w.jsx)(He,{colgroup:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("colgroup",{children:[(0,w.jsx)("col",{}),(0,w.jsx)("col",{className:"proxy"})]}),(0,w.jsxs)("colgroup",{className:"small-cols",children:[(0,w.jsx)("col",{}),(0,w.jsx)("col",{className:"value"}),(0,w.jsx)("col",{})]})]}),head:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{children:l("userAddress")}),(0,w.jsxs)("th",{children:[l("holder")," ",(0,w.jsx)(Ee.A,{href:Xe,target:"_blank",fontWeight:2,fontSize:2,hoverColor:"light-gray",color:"grey",children:(0,w.jsx)(ze.A,{name:"Help",size:"16px",ml:1})})]}),(0,w.jsx)("th",{children:l("balance")}),(0,w.jsx)("th",{children:l("value")}),(0,w.jsx)("th",{children:l("shares")})]}),loading:u,hasMore:r,loadMore:x,noResults:null,totalCols:5,children:p?[]:(v||[]).map((e=>(0,w.jsx)(Ge,{shareInfo:e},e.id)))})};var Ve=n(23083),Ze=n(74613),$e=n(84151),Je=n(5555),Qe=n(23830),Ye=n(58768),et=n(56133),tt=n(62491),nt=n(2287),ot=n(87585),it=n(91164);var st=n(48372),lt=n(82350),at=n(92584),rt=n(62004);class dt extends lt.A{constructor(e,t){super(e,rt.A.CRPool,t),this.contract=void 0}static async getInstance(e){return void 0===dt.instances[e]&&(dt.instances[e]=new dt(e),await dt.instances[e].init()),dt.instances[e]}async updateSwapFee(e){if(this.init(),void 0===this.contract)return;this.updateSigner();const t=await(0,xe.rz)();if(null===t||void 0===t)return;const n=await this.contract.populateTransaction.setSwapFee(e);return t.patchTxs(n),t.execStoredTxs()}async updateLiquidityCap(e){if(this.init(),void 0===this.contract)return;this.updateSigner();const t=await(0,xe.rz)();if(null===t||void 0===t)return;const n=await this.contract.populateTransaction.setCap(e);return t.patchTxs(n),t.execStoredTxs()}async updatePublicSwap(e){if(this.init(),void 0===this.contract)return;this.updateSigner();const t=await(0,xe.rz)();if(null===t||void 0===t)return;const n=await this.contract.populateTransaction.setPublicSwap(e);return t.patchTxs(n),t.execStoredTxs()}async commitToken(e,t,n){if(this.init(),void 0===this.contract)return;this.updateSigner();const o=await(0,xe.rz)();if(null===o||void 0===o)return;const i=await at.L.tokenToXToken(e),s=await this.contract.populateTransaction.commitAddToken(i,t,n);return o.patchTxs(s),o.execStoredTxs()}async updateWeightsGradually(e,t,n){if(this.init(),void 0===this.contract)return;this.updateSigner();const o=await(0,xe.rz)();if(null===o||void 0===o)return;const i=await this.contract.populateTransaction.updateWeightsGradually(e,t,n);return o.patchTxs(i),o.execStoredTxs()}async pokeWeights(){if(this.init(),void 0===this.contract)return;this.updateSigner();const e=await(0,xe.rz)();if(null===e||void 0===e)return;const t=await this.contract.populateTransaction.pokeWeights();return e.patchTxs(t),e.execStoredTxs()}async addToWhitelist(e){if(this.init(),void 0===this.contract)return;this.updateSigner();const t=await(0,xe.rz)();if(null===t||void 0===t)return;const n=await this.contract.populateTransaction.whitelistLiquidityProvider(e);return t.patchTxs(n),t.execStoredTxs()}async removeFromWhitelist(e){if(this.init(),void 0===this.contract)return;this.updateSigner();const t=await(0,xe.rz)();if(null===t||void 0===t)return;const n=await this.contract.populateTransaction.removeWhitelistedLiquidityProvider(e);return t.patchTxs(n),t.execStoredTxs()}}dt.instances={};var ct=n(97706);const ut=(0,k.Ay)(x.A)(["font-size:14px;font-weight:600;line-height:20px;color:",";margin-bottom:4px;"],(e=>{let{theme:t}=e;return t.colors.grey})),pt=k.Ay.ul(["list-style-type:none;padding:0;> li + li{margin-top:16px;}"]),ht=e=>{const{pool:t,refreshPool:n}=e,{t:i}=(0,ve.A)("poolDetails",["poolTabs","manage"]),s=t.rights.includes("canPauseSwapping"),l=t.rights.includes("canChangeSwapFee"),d=t.rights.includes("canChangeWeights"),c=t.rights.includes("canAddRemoveTokens"),u=t.rights.includes("canWhitelistLPs"),h=t.rights.includes("canChangeCap"),v=!1===s&&!1===l&&!1===d&&!1===c&&!1===u&&!1===h,{isEnablingToken:g,enableToken:k}=function(e){const t=(0,xe.or)(),{track:n}=(0,Ye.A)(),{addError:i}=(0,ot.dh)(),{t:s}=(0,ve.A)("poolDetails",["poolTabs","manage"]),[l,a]=(0,o.useState)(!1),r=(0,o.useCallback)((async o=>{if(null!==t&&void 0!==t&&void 0!==t.address){a(!0);try{const i=await ct.v.getInstance(o.address),l=await i.enableToken(t.address);if(void 0===l)throw new Error("ENABLE_TOKEN_FAILS");await n(l,{skipSubmit:!0,confirm:{message:s("enableToken.success",{symbol:o.symbol})}}),await(0,tt.A)(2e3),e()}catch{i(s("enableToken.failure",{symbol:o.symbol}))}finally{a(!1)}}}),[i,t,n,s,e]);return(0,o.useMemo)((()=>({isEnablingToken:l,enableToken:r})),[l,r])}(n),{newSwapFee:f,isUpdatingSwapFee:y,setNewSwapFee:b,updateSwapFee:T}=function(e,t){const{track:n}=(0,Ye.A)(),{addError:i}=(0,ot.dh)(),{t:s}=(0,ve.A)("poolDetails",["poolTabs","manage"]),[l,a]=(0,o.useState)(""),[r,d]=(0,o.useState)(!1),c=(0,o.useCallback)((async o=>{d(!0);try{const i=await dt.getInstance(e.controller),l=await i.updateSwapFee(st.parseUnits(o,18));if(void 0===l)throw new Error("UPDATE_SWAP_FEE_FAILS");await n(l,{confirm:{message:s("updateSwapFee.success")}}),a(""),await(0,tt.A)(2e3),t()}catch{i(s("updateSwapFee.failure"))}finally{d(!1)}}),[i,e.controller,n,s,t]);return(0,o.useMemo)((()=>({newSwapFee:l,isUpdatingSwapFee:r,setNewSwapFee:a,updateSwapFee:c})),[l,r,a,c])}(t,n),{newLiquidityCap:S,isUpdatingLiquidityCap:C,setNewLiquidityCap:W,updateLiquidityCap:I}=function(e,t){const{track:n}=(0,Ye.A)(),{addError:i}=(0,ot.dh)(),{t:s}=(0,ve.A)("poolDetails",["poolTabs","manage"]),[l,a]=(0,o.useState)(""),[r,d]=(0,o.useState)(!1),c=(0,o.useCallback)((async o=>{d(!0);try{const i=await dt.getInstance(e.controller),l=await i.updateLiquidityCap(st.parseUnits(o,Ue.Fx));if(void 0===l)throw new Error("UPDATE_LIQUIDITY_CAP_FAILS");await n(l,{confirm:{message:s("updateLiquidityCap.success")}}),a(""),await(0,tt.A)(2e3),t()}catch{i(s("updateLiquidityCap.failure"))}finally{d(!1)}}),[i,e.controller,n,s,t]);return(0,o.useMemo)((()=>({newLiquidityCap:l,isUpdatingLiquidityCap:r,setNewLiquidityCap:a,updateLiquidityCap:c})),[l,r,a,c])}(t,n),{isUpdatingPublicSwap:M,updatePublicSwap:P}=function(e,t){const{track:n}=(0,Ye.A)(),{addError:i}=(0,ot.dh)(),{t:s}=(0,ve.A)("poolDetails",["poolTabs","manage"]),[l,a]=(0,o.useState)(!1),r=(0,o.useCallback)((async o=>{a(!0);try{const i=await dt.getInstance(e.controller),l=await i.updatePublicSwap(o);if(void 0===l)throw new Error("UPDATE_LIQUIDITY_CAP_FAILS");await n(l,{confirm:{message:s("updatePublicSwap.success")}}),await(0,tt.A)(2e3),t()}catch{i(s("updatePublicSwap.failure"))}finally{a(!1)}}),[i,e.controller,n,s,t]);return(0,o.useMemo)((()=>({isUpdatingPublicSwap:l,updatePublicSwap:r})),[l,r])}(t,n),{possibleNewTokens:F,newToken:B,newTokenInitialSupply:O,newTokenWeight:N,isCommittingToken:L,isOverwrittingCommittedToken:R,setNewTokenAddress:E,setNewTokenInitialSupply:z,setNewTokenWeight:D,setIsOverwrittingCommittedToken:q,commitToken:U}=function(e,t){const n=(0,r.Sq)(),{track:i}=(0,Ye.A)(),{addError:s}=(0,ot.dh)(),{t:l}=(0,ve.A)("poolDetails",["poolTabs","manage"]),{nativeTokens:a}=(0,Qe.A)({skip:!n,variables:{filter:{isLPT:!1,paused:!1}},pollInterval:Ue.a0}),d=(0,o.useMemo)((()=>a.filter((t=>!1===e.tokens.some((e=>(0,r.af)(t.id,e.address))))).map((e=>({...e,address:e.id})))),[a,e.tokens]),[c,u]=(0,o.useState)(void 0),[p,h]=(0,o.useState)(""),[m,x]=(0,o.useState)(""),[v,g]=(0,o.useState)(!1),[A,k]=(0,o.useState)(!1),f=(0,o.useMemo)((()=>d.find((e=>(0,r.af)(e.address,c)))),[d,c]),y=(0,o.useCallback)((async(n,o,a)=>{if(n.decimals<12||n.decimals>18)s(l("addToken.nonSupportedDecimalsTokenAddition"));else{g(!0);try{const s=await dt.getInstance(e.controller),r=await s.commitToken(n.address,st.parseUnits(o,n.decimals),st.parseUnits(a,18));(0,et.MX)(void 0!==r,"COMMIT_TOKEN_FAILS"),await i(r,{confirm:{message:l("addToken.success")}}),u(void 0),h(""),x(""),await(0,tt.A)(2e3),t()}catch{s(l("addToken.failure"))}finally{g(!1)}}}),[s,e.controller,i,l,t]);return(0,o.useMemo)((()=>({possibleNewTokens:d,newToken:f,newTokenInitialSupply:p,newTokenWeight:m,isCommittingToken:v,isOverwrittingCommittedToken:A,setNewTokenAddress:u,setNewTokenInitialSupply:h,setNewTokenWeight:x,setIsOverwrittingCommittedToken:k,commitToken:y})),[d,f,p,m,v,A,u,h,x,k,y])}(t,n),{tokenToApplyWithCpkAllowance:_,missingBlocksBeforeUnlock:G,canApplyToken:X,isTokenToApplyEnabled:H,isApplyingToken:K,applyToken:V}=function(e,t){var n;const i=(0,r.F7)(),s=(0,r.Sq)(),{track:l}=(0,Ye.A)(),{addError:a}=(0,ot.dh)(),{t:d}=(0,ve.A)("poolDetails",["poolTabs","manage"]),c=Ce(),{nativeTokens:u}=(0,Qe.A)({skip:!s||null===e.newCRPoolToken,variables:{filter:{id:null===(n=e.newCRPoolToken)||void 0===n?void 0:n.token.address}},pollInterval:Ue.a0}),p=(0,nt.U4)(u,(0,o.useMemo)((()=>[(0,nt.qd)(i)]),[i])),h=(0,o.useMemo)((()=>null===e.newCRPoolToken||void 0===p[0]?null:{...p[0],address:e.newCRPoolToken.token.address,balance:e.newCRPoolToken.balance}),[e.newCRPoolToken,p]),[m,x]=(0,o.useState)(!1),v=(0,o.useMemo)((()=>{if(null!==e.newCRPoolToken&&void 0!==c)return parseInt(e.newCRPoolToken.commitBlock,10)+parseInt(e.addTokenTimeLockInBlocks,10)-c}),[c,e.addTokenTimeLockInBlocks,e.newCRPoolToken]),g=(0,o.useMemo)((()=>void 0!==v&&v<=0&&!1===(0,A.yl)(e)),[v,e]),k=(0,o.useMemo)((()=>null!==h&&(0,Ve.Ol)(h,h.balance)),[h]),f=(0,o.useCallback)((async()=>{if(void 0!==i&&null!==h){x(!0);try{const n=await it.G.getInstance(),o=await n.applyToken(i,e.controller,h.address,h.balance);(0,et.MX)(void 0!==o,"APPLY_TOKEN_FAILS"),await l(o,{confirm:{message:d("addToken.applySuccess")}}),await(0,tt.A)(2e3),t()}catch{a(d("addToken.applyFailure"))}finally{x(!1)}}}),[i,h,a,e.controller,l,d,t]);return(0,o.useMemo)((()=>({tokenToApplyWithCpkAllowance:h,missingBlocksBeforeUnlock:v,canApplyToken:g,isTokenToApplyEnabled:k,isApplyingToken:m,applyToken:f})),[h,v,g,k,m,f])}(t,n),{isRemovingToken:Z,removeToken:$}=function(e,t){const n=(0,r.F7)(),{track:i}=(0,Ye.A)(),{addError:s}=(0,ot.dh)(),{t:l}=(0,ve.A)("poolDetails",["poolTabs","manage"]),[a,d]=(0,o.useState)(!1),c=(0,o.useCallback)((async o=>{if(void 0!==n){d(!0);try{const s=await it.G.getInstance(),a=await s.removeToken(n,e.controller,o);if(void 0===a)throw new Error("REMOVE_TOKEN_FAILS");await i(a,{confirm:{message:l("removeToken.success")}}),await(0,tt.A)(2e3),t()}catch{s(l("removeToken.failure"))}finally{d(!1)}}}),[n,s,e.controller,i,l,t]);return(0,o.useMemo)((()=>({isRemovingToken:a,removeToken:c})),[a,c])}(t,n),{newWeightsByTokenAddress:J,isUpdatingWeight:Q,setNewWeight:Y,updateWeightInstantly:ee}=function(e,t){const n=(0,r.F7)(),{track:i}=(0,Ye.A)(),{addError:s}=(0,ot.dh)(),{t:l}=(0,ve.A)("poolDetails",["poolTabs","manage"]),[d,c]=(0,o.useState)({}),[u,p]=(0,o.useState)(!1);(0,o.useEffect)((()=>{c(e.tokens.reduce(((e,t)=>(e[t.address]=t.denormWeight,e)),{}))}),[e.tokens]);const h=(0,o.useCallback)(((e,t)=>{c((n=>({...n,[e]:t})))}),[]),m=(0,o.useCallback)((async(o,r,d)=>{if(void 0!==n)if((0,a.lW)(d).gt(r)&&(0,A.yl)(e))s(l("updateWeightInstantly.liquidityCapReached"));else{p(!0);try{const s=await it.G.getInstance(),a=await s.updateWeightInstantly(n,e.controller,o,st.parseUnits(r,18),st.parseUnits(d,18));(0,et.MX)(void 0!==a,"UPDATE_WEIGHT_INSTANTLY_FAILS"),await i(a,{confirm:{message:l("updateWeightInstantly.success")}}),await(0,tt.A)(2e3),t()}catch{s(l("updateWeightInstantly.failure"))}finally{p(!1)}}}),[n,e,s,l,i,t]);return(0,o.useMemo)((()=>({newWeightsByTokenAddress:d,isUpdatingWeight:u,setNewWeight:h,updateWeightInstantly:m})),[d,u,h,m])}(t,n),{newGradualWeightsByXTokenAddress:te,gradualUpdateStartBlock:ne,gradualUpdateEndBlock:oe,isGraduallyUpdatingWeights:ie,setNewGradualWeight:se,setGradualUpdateStartBlock:le,setGradualUpdateEndBlock:ae,updateWeightsGradually:re}=function(e,t){const{track:n}=(0,Ye.A)(),{addError:i}=(0,ot.dh)(),{t:s}=(0,ve.A)("poolDetails",["poolTabs","manage"]),[l,a]=(0,o.useState)({}),[r,d]=(0,o.useState)(0),[c,u]=(0,o.useState)(0),[p,h]=(0,o.useState)(!1);(0,o.useEffect)((()=>{a(e.tokens.reduce(((e,t)=>(void 0===t.xToken||(e[t.xToken.id]=t.denormWeight),e)),{}))}),[e.tokens]);const m=(0,o.useCallback)(((e,t)=>{a((n=>({...n,[e]:t})))}),[]),x=(0,o.useCallback)((async(o,l,a)=>{h(!0);try{const i=await dt.getInstance(e.controller),r=await i.updateWeightsGradually(o.map((e=>st.parseUnits(e,18))),l,a);if(void 0===r)throw new Error("UPDATE_WEIGHTS_GRADUALLY_FAILS");await n(r,{confirm:{message:s("updateWeightsGradually.success")}}),await(0,tt.A)(2e3),t()}catch{i(s("updateWeightsGradually.failure"))}finally{h(!1)}}),[i,e.controller,n,s,t]);return(0,o.useMemo)((()=>({newGradualWeightsByXTokenAddress:l,gradualUpdateStartBlock:r,gradualUpdateEndBlock:c,isGraduallyUpdatingWeights:p,setNewGradualWeight:m,setGradualUpdateStartBlock:d,setGradualUpdateEndBlock:u,updateWeightsGradually:x})),[l,r,c,p,m,d,u,x])}(t,n),{missingBlocksBeforeStart:de,canPokeWeights:ce,isPokingWeights:pe,pokeWeights:me}=function(e,t){const{track:n}=(0,Ye.A)(),{addError:i}=(0,ot.dh)(),{t:s}=(0,ve.A)("poolDetails",["poolTabs","manage"]),l=Ce(),[a,r]=(0,o.useState)(!1),d=(0,o.useCallback)((async()=>{r(!0);try{const o=await dt.getInstance(e.controller),i=await o.pokeWeights();if(void 0===i)throw new Error("POKE_WEIGHTS_FAILS");await n(i,{confirm:{message:s("updateWeightsGradually.pokeWeightsSuccess")}}),await(0,tt.A)(2e3),t()}catch{i(s("updateWeightsGradually.pokeWeightsSuccess"))}finally{r(!1)}}),[i,e.controller,n,s,t]),c=(0,o.useMemo)((()=>{if(null!==e.crpoolGradualWeightsUpdate&&void 0!==l)return parseInt(e.crpoolGradualWeightsUpdate.startBlock,10)-l}),[e.crpoolGradualWeightsUpdate,l]),u=(0,o.useMemo)((()=>void 0!==c&&c<=0),[c]);return(0,o.useMemo)((()=>({missingBlocksBeforeStart:c,canPokeWeights:u,isPokingWeights:a,pokeWeights:d})),[c,u,a,d])}(t,n),{newAddressToWhitelist:ge,isAddingToWhitelist:Ae,isRemovingFromWhitelist:ke,setNewAddressToWhitelist:fe,addToWhitelist:ye,removeFromWhitelist:je}=function(e,t){const{track:n}=(0,Ye.A)(),{addError:i}=(0,ot.dh)(),{t:s}=(0,ve.A)("poolDetails",["poolTabs","manage"]),[l,a]=(0,o.useState)(""),[r,d]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),p=(0,o.useCallback)((async o=>{d(!0);try{const i=await dt.getInstance(e.controller),l=await i.addToWhitelist(o);if(void 0===l)throw new Error("ADD_TO_WHITELIST_FAILS");await n(l,{confirm:{message:s("manageWhitelist.success")}}),a(""),await(0,tt.A)(2e3),t()}catch{i(s("manageWhitelist.failure"))}finally{d(!1)}}),[i,e.controller,n,s,t]),h=(0,o.useCallback)((async o=>{u(!0);try{const i=await dt.getInstance(e.controller),l=await i.removeFromWhitelist(o);if(void 0===l)throw new Error("REMOVE_FROM_WHITELIST_FAILS");await n(l,{confirm:{message:s("manageWhitelist.success")}}),await(0,tt.A)(2e3),t()}catch{i(s("manageWhitelist.failure"))}finally{u(!1)}}),[i,e.controller,n,s,t]);return(0,o.useMemo)((()=>({newAddressToWhitelist:l,isAddingToWhitelist:r,isRemovingFromWhitelist:c,setNewAddressToWhitelist:a,addToWhitelist:p,removeFromWhitelist:h})),[l,r,c,a,p,h])}(t,n);return(0,w.jsxs)(j.A,{gridTemplateColumns:["1fr","1fr 1fr"],gridGap:["16px","32px"],mt:"8px",children:[v?(0,w.jsx)(x.A,{children:"Pool has not rights"}):null,l?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ut,{children:i("updateSwapFee.title")}),(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px"},children:[(0,w.jsx)(Je.A,{type:"number",value:f,placeholder:i("updateSwapFee.form.input.placeholder"),disabled:y,onChange:e=>{b(e.target.value)}}),(0,w.jsx)(he.A,{disabled:y,onClick:()=>{T(f)},children:i("updateSwapFee.form.submitButton.label")})]})]}):null,h?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ut,{children:i("updateLiquidityCap.title")}),(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px"},children:[(0,w.jsx)(Je.A,{type:"number",value:S,placeholder:i("updateLiquidityCap.form.input.placeholder"),disabled:C,onChange:e=>{W(e.target.value)}}),(0,w.jsx)(he.A,{disabled:C,onClick:()=>{I(S)},children:i("updateLiquidityCap.form.submitButton.label")})]})]}):null,s?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ut,{children:i("updatePublicSwap.title")}),(0,w.jsx)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px"},children:(0,w.jsx)(he.A,{disabled:M,onClick:()=>{P(!t.publicSwap)},children:t.publicSwap?i("updatePublicSwap.form.setFalseButton.label"):i("updatePublicSwap.form.setTrueButton.label")})})]}):null,c?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ut,{children:i("addToken.title")}),null===t.newCRPoolToken||R?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(m.A,{flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",style:{gap:"8px"},children:[(0,w.jsx)($e.A,{options:F.map((e=>({value:e.address,label:e.symbol}))),value:void 0===B?void 0:{value:B.address,label:B.symbol},isDisabled:L||null!==t.crpoolGradualWeightsUpdate,onChange:e=>{null!==e&&E(e.value)}}),(0,w.jsx)(Je.A,{type:"number",value:O,placeholder:i("addToken.form.initialSupplyInput.placeholder"),disabled:L||null!==t.crpoolGradualWeightsUpdate,onChange:e=>{z(e.target.value)}}),(0,w.jsx)(Je.A,{type:"number",value:N,placeholder:i("addToken.form.tokenWeightInput.placeholder"),disabled:L||null!==t.crpoolGradualWeightsUpdate,onChange:e=>{D(e.target.value)}}),(0,w.jsx)(he.A,{disabled:L||null!==t.crpoolGradualWeightsUpdate,onClick:()=>{void 0!==B&&U(B,O,N)},children:i("addToken.form.commitButton.label")}),null!==t.crpoolGradualWeightsUpdate?(0,w.jsx)(x.A,{children:i("addToken.noAdditionWhileGradualWeightsUpdate")}):null,null!==t.newCRPoolToken?(0,w.jsx)(he.A,{onClick:()=>{q(!1)},children:i("addToken.form.cancelOverwriteCommitButton.label")}):null]})}):(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(m.A,{flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",mt:3,style:{gap:"16px"},children:[(0,w.jsxs)(m.A,{ml:2,alignItems:"center",children:[(0,w.jsx)(ue.A,{symbol:t.newCRPoolToken.token.symbol,name:t.newCRPoolToken.token.name,width:"20px",height:"20px",mr:"10px"}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:5,children:t.newCRPoolToken.token.symbol}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:2,ml:"8px",children:t.newCRPoolToken.token.name}),(0,w.jsx)(Ze.A,{type:"token",hash:t.newCRPoolToken.token.address,label:""})]}),(0,w.jsxs)(m.A,{ml:2,flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",children:[(0,w.jsx)(x.A,{fontSize:2,fontWeight:2,children:i("addToken.committedToken.balance",{balance:(0,a.S8)(t.newCRPoolToken.balance,t.newCRPoolToken.token.decimals)})}),(0,w.jsx)(x.A,{fontSize:2,fontWeight:2,children:i("addToken.committedToken.weight",{weight:t.newCRPoolToken.denormWeight})})]}),(0,w.jsxs)(m.A,{flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",style:{gap:"8px"},children:[(0,w.jsx)(he.A,{disabled:!1===X||(H?K:g),onClick:()=>{H?V():null!==_&&k(_)},children:H?i("addToken.form.applyButton.label"):i("addToken.form.enableButton.label",{symbol:t.newCRPoolToken.token.symbol})}),!1===X&&void 0!==G&&G>0?(0,w.jsx)(x.A,{children:i("addToken.commitTokenTimeLockNotFinished",{missingBlocksBeforeUnlock:G})}):null,!1===X&&(0,A.yl)(t)?(0,w.jsx)(x.A,{children:i("addToken.liquidityCapReached")}):null,null!==t.newCRPoolToken?(0,w.jsx)(he.A,{onClick:()=>{q(!0)},children:i("addToken.form.overwriteCommitButton.label")}):null]})]})})]}):null,c?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ut,{children:i("removeToken.title")}),(0,w.jsx)(pt,{children:t.tokens.map((e=>(0,w.jsx)("li",{children:(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px"},children:[(0,w.jsxs)(m.A,{ml:2,alignItems:"center",children:[(0,w.jsx)(ue.A,{symbol:e.symbol,name:e.name,width:"20px",height:"20px",mr:"10px"}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:5,children:e.symbol}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:2,ml:"8px",children:e.name}),(0,w.jsx)(Ze.A,{type:"token",hash:e.address,label:""})]}),(0,w.jsx)(he.A,{disabled:Z||t.tokens.length<=2||null!==t.newCRPoolToken||null!==t.crpoolGradualWeightsUpdate,onClick:()=>{$(e.id)},style:{width:"80px",height:"32px"},children:i("removeToken.form.removeButton.label")})]})},e.id)))}),t.tokens.length<=2?(0,w.jsx)(x.A,{children:i("removeToken.noRemovalWhileTwoTokens")}):null,null!==t.newCRPoolToken?(0,w.jsx)(x.A,{children:i("removeToken.noRemovalWhileAddingToken")}):null,null!==t.crpoolGradualWeightsUpdate?(0,w.jsx)(x.A,{children:i("removeToken.noRemovalWhileGradualWeightsUpdate")}):null]}):null,d?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ut,{children:i("updateWeightInstantly.title")}),(0,w.jsx)(pt,{children:t.tokens.map((e=>{const n=void 0!==e.balance&&null!==e.balance&&(0,Ve.Ol)(e,e.balance);return(0,w.jsx)("li",{children:(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"16px"},children:[(0,w.jsxs)(m.A,{ml:2,alignItems:"center",children:[(0,w.jsx)(ue.A,{symbol:e.symbol,name:e.name,width:"20px",height:"20px",mr:"10px"}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:5,children:e.symbol}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:2,ml:"8px",children:e.name}),(0,w.jsx)(Ze.A,{type:"token",hash:e.address,label:""})]}),(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px"},children:[(0,w.jsx)(Je.A,{type:"number",value:J[e.address],placeholder:i("updateWeightInstantly.form.input.placeholder"),disabled:Q||!1===n&&g||null!==t.crpoolGradualWeightsUpdate,onChange:t=>{Y(e.address,t.target.value)}}),(0,w.jsx)(he.A,{disabled:Q||!1===n&&g||null!==t.crpoolGradualWeightsUpdate,onClick:()=>{n?ee(e.address,e.denormWeight,J[e.address]):k(e)},children:n?i("updateWeightInstantly.form.updateButton.label"):i("updateWeightInstantly.form.enableButton.label",{symbol:e.symbol})})]})]})},e.id)}))}),null!==t.crpoolGradualWeightsUpdate?(0,w.jsx)(x.A,{children:i("updateWeightInstantly.noWeightUpdateWhileGradualWeightsUpdate")}):null]}):null,d?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ut,{children:i("updateWeightsGradually.title")}),null===t.crpoolGradualWeightsUpdate?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(pt,{children:t.tokens.map((e=>void 0===e.xToken?null:(0,w.jsx)("li",{children:(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"16px"},children:[(0,w.jsxs)(m.A,{ml:2,alignItems:"center",children:[(0,w.jsx)(ue.A,{symbol:e.symbol,name:e.name,width:"20px",height:"20px",mr:"10px"}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:5,children:e.symbol}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:2,ml:"8px",children:e.name}),(0,w.jsx)(Ze.A,{type:"token",hash:e.address,label:""})]}),(0,w.jsx)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px"},children:(0,w.jsx)(Je.A,{type:"number",value:te[e.xToken.id],placeholder:i("updateWeightsGradually.form.tokenWeightInput.placeholder"),disabled:ie||null!==t.newCRPoolToken,onChange:t=>{void 0!==e.xToken&&se(e.xToken.id,t.target.value)}})})]})},e.id)))}),(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px",marginBottom:"8px"},children:[(0,w.jsx)(x.A,{style:{width:"84px"},children:"From block"}),(0,w.jsx)(Je.A,{type:"number",step:"1",value:ne,placeholder:i("updateWeightsGradually.form.startBlockInput.placeholder"),disabled:ie||null!==t.newCRPoolToken,onChange:e=>{le(parseInt(e.target.value,10))}})]}),(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px",marginBottom:"24px"},children:[(0,w.jsx)(x.A,{style:{width:"84px"},children:"To block"}),(0,w.jsx)(Je.A,{type:"number",step:"1",value:oe,placeholder:i("updateWeightsGradually.form.endBlockInput.placeholder"),disabled:ie||null!==t.newCRPoolToken,onChange:e=>{ae(parseInt(e.target.value,10))}})]}),(0,w.jsx)(he.A,{disabled:ie||null!==t.newCRPoolToken,onClick:()=>{re(t.tokensList.map((e=>te[e])),ne,oe)},children:i("updateWeightsGradually.form.updateButton.label")}),null!==t.newCRPoolToken?(0,w.jsx)(x.A,{children:i("updateWeightsGradually.noGradualWeightsUpdateRemovalWhileAddingToken")}):null]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(pt,{children:t.tokens.map((e=>void 0!==e.balance&&null!==e.balance&&(0,Ve.Ol)(e,e.balance)?null:(0,w.jsx)("li",{children:(0,w.jsx)(he.A,{disabled:g,onClick:()=>{k(e)},children:i("updateWeightsGradually.form.enableButton.label",{symbol:e.symbol})})},e.id)))}),(0,w.jsx)(he.A,{disabled:pe||!1===ce||t.tokens.some((e=>!1===(void 0!==e.balance&&null!==e.balance&&(0,Ve.Ol)(e,e.balance)))),onClick:me,children:i("updateWeightsGradually.form.pokeWeightButton.label")}),!1===ce?(0,w.jsx)(x.A,{children:i("updateWeightsGradually.gradualUpdateNotStartedYet",{missingBlocksBeforeStart:void 0!==de?de:"-"})}):null]})]}):null,u?(0,w.jsxs)(p.A,{children:[(0,w.jsx)(ut,{children:i("manageWhitelist.title")}),(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px",marginBottom:"24px"},children:[(0,w.jsx)(Je.A,{value:ge,placeholder:i("manageWhitelist.form.input.placeholder"),disabled:Ae,onChange:e=>{fe(e.target.value)}}),(0,w.jsx)(he.A,{disabled:Ae,onClick:()=>{ye(ge)},children:i("manageWhitelist.form.addButton.label")})]}),0===t.whitelist.length?(0,w.jsx)(x.A,{children:"List is empty"}):null,t.whitelist.length>0?(0,w.jsx)(pt,{children:t.whitelist.map((e=>(0,w.jsx)("li",{children:(0,w.jsxs)(m.A,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",style:{gap:"8px"},children:[(0,w.jsx)("span",{children:e}),(0,w.jsx)(he.A,{disabled:ke,onClick:()=>{je(e)},style:{width:"80px",height:"32px"},children:i("manageWhitelist.form.removeButton.label")})]})},e)))}):null]}):null]})},mt=e=>{const{data:t,loading:n,error:i,fetchMore:s,networkStatus:l}=(0,Z.I)(qe.ZU,{variables:{limit:10,skip:0,filter:{poolAddress:e}},notifyOnNetworkStatusChange:!0,pollInterval:Ue.a0}),a=(0,o.useCallback)((t=>s({variables:{filter:{poolAddress:e},limit:10,skip:t}})),[s,e]);return{data:t,loading:n||![De.pT.ready,De.pT.error].includes(l),error:i,refetching:l===De.pT.refetch,fetchMore:a}},xt=k.Ay.td(["",""],Ie.Zp),vt=e=>{let{timestamp:t,tokenInSym:n,tokenAmountIn:i,tokenAmountOut:s,tokenOutSym:l,feeValue:a,id:r}=e;const d=(0,o.useMemo)((()=>r.split("-")[0]),[r]);return(0,w.jsxs)("tr",{children:[(0,w.jsx)(xt,{children:(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:2,color:"near-black",display:["none","none","none","inline"],children:(0,ke.default)((0,fe.A)(t),"MMMM dd, yyyy hh:mm aa")})}),(0,w.jsx)(xt,{children:(0,w.jsxs)(m.A,{alignItems:"center",justifyContent:["flex-start","flex-start","flex-start","flex-end"],children:[(0,w.jsx)(x.A.span,{title:(0,f.GM)(i,8),fontSize:2,fontWeight:2,children:(0,f.yi)(i,3)}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:5,ml:2,children:n}),(0,w.jsx)(ue.A,{ml:2,symbol:n,width:"20px",height:"20px"})]})}),(0,w.jsx)(xt,{children:(0,w.jsxs)(m.A,{alignItems:"center",justifyContent:"flex-end",children:[(0,w.jsx)(x.A.span,{title:(0,f.GM)(s,8),fontSize:2,fontWeight:2,children:(0,f.yi)(s,3)}),(0,w.jsx)(x.A.span,{fontSize:2,fontWeight:5,ml:2,children:l}),(0,w.jsx)(ue.A,{ml:2,symbol:l,width:"20px",height:"20px"})]})}),(0,w.jsx)(xt,{children:(0,w.jsx)(m.A,{justifyContent:"flex-end",children:(0,w.jsx)(Ae.A,{type:"tx",hash:d})})}),(0,w.jsx)(xt,{children:(0,w.jsx)(m.A,{justifyContent:"flex-end",children:(0,w.jsxs)(x.A.span,{title:(0,f.GM)(a),fontSize:2,fontWeight:2,children:["$",(0,f.GM)(a,2,2)]})})})]})},gt=(0,k.Ay)(Re.A)(["th,td{&:nth-last-child(-n + 4){text-align:right;}}.trade-in,.trade-out,.transaction{width:180px;}.swap-fee{width:95px;}td{color:",";}@media (max-width:","){.time,.transaction,.swap-fee{width:0px;}colgroup.trade-tokens{col{width:100%;}}th:nth-child(2){text-align:left;}}"],(e=>e.theme.colors.black),(e=>{var t;let{theme:n}=e;return null===(t=n.breakpoints)||void 0===t?void 0:t[2]})),At=e=>{let{poolAddress:t}=e;const{t:n}=(0,ve.A)("poolDetails",["poolTabs","swaps","th"]),[i,s]=(0,o.useState)(!0),{data:l,loading:a,refetching:r,fetchMore:d}=mt(t),c=(0,o.useCallback)((async()=>{if(l&&i&&!a){const{data:{swaps:e}}=await d(null===l||void 0===l?void 0:l.swaps.length);s(10===e.length)}}),[l,d,i,a]);return(0,w.jsx)(gt,{colgroup:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("colgroup",{children:(0,w.jsx)("col",{className:"time"})}),(0,w.jsxs)("colgroup",{className:"trade-tokens",children:[(0,w.jsx)("col",{className:"trade-in"}),(0,w.jsx)("col",{className:"trade-out"})]}),(0,w.jsxs)("colgroup",{children:[(0,w.jsx)("col",{className:"transaction"}),(0,w.jsx)("col",{className:"swap-fee"})]})]}),head:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{children:n("time")}),(0,w.jsx)("th",{children:n("tradeIn")}),(0,w.jsx)("th",{children:n("tradeOut")}),(0,w.jsx)("th",{children:n("transaction")}),(0,w.jsx)("th",{children:n("swapFee")})]}),loading:a,hasMore:i,loadMore:c,noResults:null,totalCols:5,children:r?[]:((null===l||void 0===l?void 0:l.swaps)||[]).map((e=>(0,w.jsx)(vt,{...e},e.id)))})},kt=(0,k.Ay)(p.A)(["border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors["light-gray"]})),ft=e=>{let{pool:t,poolToken:n,myPoolShare:i,liquidity:s,refreshPool:l}=e;const d=(0,xe.or)(),{t:c}=(0,ve.A)("poolDetails",["poolTabs","th"]),[u,h]=(0,o.useState)(0),{tokens:m,id:x,totalShares:v,holdersCount:g,swapsCount:A,addTokenTimeLockInBlocks:k,newCRPoolToken:f,crpoolGradualWeightsUpdate:y,crp:j,crpController:b}=t,T=(0,o.useMemo)((()=>(0,a.lW)(A).toNumber()),[A]),S=(0,o.useMemo)((()=>(0,a.lW)(g).toNumber()),[g]),C=(0,o.useCallback)(((e,t)=>{t!==u&&h(t)}),[u]),W=j&&null!==d&&void 0!==d&&void 0!==d.address&&(0,r.af)(d.address,b);return(0,w.jsxs)(p.A,{mt:"24px",children:[(0,w.jsxs)(X.s,{value:u,onChange:C,"aria-label":"pool tabs",children:[(0,w.jsx)(H.A,{label:c("balances"),amountIn:m.length,value:0}),T&&(0,w.jsx)(H.A,{label:c("swaps"),amountIn:T,value:1}),S&&(0,w.jsx)(H.A,{label:c("holders"),amountIn:S,value:2}),(0,w.jsx)(H.A,{label:c("about"),value:3}),W&&(0,w.jsx)(H.A,{label:c("manage"),value:4})]}),(0,w.jsx)(kt,{role:"tabpanel",pt:"16px",children:(0,K.A)(u).equals(0).then((0,w.jsx)(Ne,{myPoolShare:i,tokens:m,addTokenTimeLockInBlocks:k,newCRPoolToken:f,crpoolGradualWeightsUpdate:y})).equals(1).then((0,w.jsx)(At,{poolAddress:x})).equals(2).then((0,w.jsx)(Ke,{poolAddress:x,liquidity:s,totalShares:(0,a.lW)(v).toNumber(),poolToken:n})).equals(3).then((0,w.jsx)(be,{...t})).equals(4).then((0,w.jsx)(ht,{pool:t,refreshPool:l})).else(null)})]})},yt=e=>{let{pool:t,reload:n,poolToken:k,loading:f=!1}=e;const{t:y}=(0,u.B)("pools"),[j,b]=function(e){var t;const n=(0,i.W6)(),{location:l}=n,a=null===(t=l.hash)||void 0===t?void 0:t.substr(1),[r,d]=(0,s.A)(a||e);return(0,o.useEffect)((()=>{a||n.push({hash:e})}),[n,e,a]),[r,(0,o.useCallback)((e=>{n.push({hash:e}),d(e)}),[d,n])]}(""),T=(0,r.Sq)(),{totalShares:C=0,swapFee:W=0,id:I,totalSwapVolume:M="0",swaps:P=[],userShare:F}=t||{},B=(0,g.A)(),O=(0,o.useMemo)((()=>(0,a.lW)(C)),[C]),N=(0,o.useMemo)((()=>(O.eq(0)||!F?a.f2:F.div(O)).toNumber()),[F,O]),L=(0,o.useMemo)((()=>(0,A.nX)(t)||0),[t]),R=(0,a.lW)(t.liquidity).gt(0)?(0,a.lW)(L).div(t.liquidity):(0,a.lW)(1),E=(0,o.useMemo)((()=>(0,l.ly)(M,P).mul(R)),[R,P,M]),z=(0,o.useMemo)((()=>({swapFee:(0,a.lW)(W).times(100).toNumber(),liquidity:L,volume:E.toNumber(),myPoolShare:N})),[E,L,N,W]),D=(0,o.useCallback)((()=>b("add")),[b]),q=(0,o.useCallback)((()=>b("")),[b]),U=(0,o.useCallback)((()=>b("remove")),[b]);return(0,o.useEffect)((()=>{(t.isAnyAssetPaused&&"add"===j||!t.active)&&q()}),[q,j,t.active,t.isAnyAssetPaused]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(p.A,{width:"100%",bg:"background",display:"flex",flexDirection:"column",alignItems:"center",p:[3,3,4],flexGrow:1,children:(0,w.jsxs)(h.A,{border:"0",width:"100%",p:4,borderRadius:1,overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"stretch",children:[(0,w.jsx)(me,{poolToken:k,isAddLiquidityDisabled:!!t.isAnyAssetPaused,extraRewards:B(t),isSmartPool:t.crp,isAddingToken:null!==t.newCRPoolToken,isChangingWeights:null!==t.crpoolGradualWeightsUpdate,onAddLiquidityClick:D,onRemoveLiquidityClick:U}),(!!t.isAnyAssetPaused||!t.active)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.A,{my:"16px"}),(0,w.jsxs)(m.A,{justifyContent:"center",alignItems:"center",children:[(0,w.jsx)(c.A,{name:"Warning"}),(0,w.jsxs)(x.A.span,{color:"warning",pl:1,children:[y(t.active?"suspendedSoonWarning":"suspendedWarning")," ",!t.active&&N>0&&y("contactSupport")]})]})]}),(0,w.jsx)(d.A,{my:"16px"}),(0,w.jsx)(S,{...z}),I&&(0,w.jsx)(ie,{poolAddress:I,liquidityMultiplier:R}),(0,w.jsx)(ft,{pool:t,poolToken:k,myPoolShare:N,liquidity:L,refreshPool:n})]})}),(0,w.jsx)(v.A,{pool:t,openModal:j,reload:n,loading:f||!T,onClose:q})]})}},70845:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var o=n(97266),i=n(18508),s=n(17689),l=n(28008),a=n(83843),r=n(71310),d=n(37412),c=n(24537);const u={all:0,"my-pools":1},p=["all","my-pools"],h=()=>{const{t:e}=(0,a.B)("pools"),t=(0,r.W6)(),{category:n="all"}=(0,r.g)(),h=u[n],{checkFeature:m}=(0,o.h)();if(!m(o.A.allPools)&&h!==u["my-pools"])return(0,c.jsx)(r.rd,{to:(0,r.tW)(d.b.POOLS_CATEGORY,{category:p[u["my-pools"]]})});return(0,c.jsxs)(i.s,{value:h,onChange:(e,o)=>{var i;o!==u[n]&&((i=p[o])===p[0]?t.push(d.b.POOLS):t.push((0,r.tW)(d.b.POOLS_CATEGORY,{category:i})))},"aria-label":"Pool tabs",children:[(0,c.jsx)(s.A,{name:o.A.allPools,children:(0,c.jsx)(l.A,{label:e("tabs.all")})}),(0,c.jsx)(l.A,{label:e("tabs.my-pools")})]})}},34457:(e,t,n)=>{"use strict";n.d(t,{A:()=>Ie});var o=n(90479),i=n(16823),s=n(61336),l=n(97266),a=n(70985),r=n(82488),d=n(62038),c=n(62717),u=n(2090),p=n(68996),h=n(73790),m=n(85597),x=n.n(m),v=n(92109),g=n(83843),A=n(71310),k=n(4155),f=n(25421),y=n(1107),j=n(86668),w=n(87936),b=n(1500),T=n(32522),S=n(79135),C=n(48016),W=n(21870),I=n(32916),M=n(76958),P=n(3421),F=n(77450),B=n(36303),O=n.n(B),N=n(46909),L=n.n(N),R=n(45803),E=n.n(R);const z=(0,w.IQ)({...w.xn,decode:function(){return L()(w.xn.decode(...arguments)||[],"toLowerCase")},equals:(e,t)=>e===t||(null==e||null==t?e===t:E()(e.sort(),t.sort()))},[]);var D=n(35839),q=n(98251);const U=e=>{var t;const n=(0,r.F7)(),o=(0,s.or)(),i=(0,q.A)(),l=(0,C.I1)(),{data:a,called:d,refetch:c,fetchMore:u,networkStatus:p,loading:h}=(0,b.I)(S.U9,{fetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0,pollInterval:W.a0,...e,variables:{limit:20,skip:0,...null===e||void 0===e?void 0:e.variables,filter:(0,I.j5)(null===e||void 0===e||null===(t=e.variables)||void 0===t?void 0:t.filter)}}),m=(0,v.useCallback)(((t,n)=>{var o;return u({variables:{...null===e||void 0===e?void 0:e.variables,...n&&{limit:n},filter:(0,I.j5)(null===e||void 0===e||null===(o=e.variables)||void 0===o?void 0:o.filter),skip:t}})}),[u,null===e||void 0===e?void 0:e.variables]),x=(0,v.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c({filter:(0,I.j5)(e),limit:20,skip:0})}),[c]);return{called:d,pools:(0,v.useMemo)((()=>{if(void 0===a)return[];const e=a.pools.map((e=>{const t=e.tokens.map((t=>{var n;const o=(0,P.iJ)(t);return{...o,exchangeRate:null===(n=l[o.id])||void 0===n?void 0:n.exchangeRate,weight:(0,M.BL)(o.denormWeight,e.totalWeight).toNumber()}})),o={...(0,D.Wf)(e,n),hasExtraRewards:i(e),tokens:t},s=(0,D.nX)(o);return{...o,marketCap:s}}));return O()(e||[],"id").filter((e=>!e.tokensList.some((e=>!(0,F.f2)({id:e})))))}),[a,n,i,l]),loadingPools:h||void 0!==n&&null===o||![T.pT.ready,T.pT.error,T.pT.poll].includes(p),refetch:x,refetching:p===T.pT.refetch,fetchMore:m}};var _=n(41128),G=n(89889),X=n(59838),H=n(87545),K=n(51861),V=n(15310),Z=n(24537);const{matchNetworkSupportsSmartPools:$}=i.Ay,J=(0,o.Ay)(K.A.Text)(["outline:none;height:32px;transform:translate(0);"]),Q=(0,o.Ay)(G.A)(["border-radius:4px;padding:4px 8px;display:flex;align-items:center;border:1px solid #e9eaf2;height:32px;&:hover{background:rgba(200,200,200,0.2);}"]),Y=(0,o.Ay)(k.A)(["display:flex;align-items:center;flex-wrap:wrap;justify-content:flex-start;gap:8px;"]),ee=e=>{let{token:t,onRemove:n,...o}=e;return(0,Z.jsxs)(Q,{alignItems:"center",onClick:n,...o,children:[(0,Z.jsx)(X.A,{symbol:t.symbol,name:t.name,width:"16px",height:"16px",mr:1}),(0,Z.jsx)(j.A,{color:"black",fontSize:"14px",fontWeight:600,mr:1,children:t.symbol}),(0,Z.jsx)(V.A,{name:"Close",size:"16px",color:"black"})]})},te=e=>{let{tokens:t,loading:n,category:o,setCategory:i,value:s,onSubmit:a,showTokenInfo:d=!1,...c}=e;const u=(0,r.Op)(),{t:p}=(0,g.B)("pools"),{checkFeature:h}=(0,l.h)(),[m,x]=(0,v.useState)(s),[A,f]=(0,v.useState)(!1),[y,j]=(0,v.useState)(o),w=(0,v.useMemo)((()=>$(u)||h(l.A.smartPools)?[{label:p("categoriesFilter.smartPools"),value:"smart-pools"}]:[]),[u,p,h]);return(0,Z.jsxs)(k.A,{...c,children:[(0,Z.jsxs)(Y,{children:[s.map((e=>{return(0,Z.jsx)(ee,{token:e,onRemove:(t=e,()=>{a(s.filter((e=>e.address!==t.address)))})},e.address);var t})),(0,Z.jsx)(J,{size:"medium",onClick:()=>{s.length?a([]):(x(s),f(!0))},flexShrink:0,ml:0,p:0,children:s.length?p("clearAll"):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(V.A,{name:"FilterList",size:"16px",mr:1}),p("filter")]})})]}),A&&(0,Z.jsx)(H.A,{isOpen:A,isFilter:!0,onClose:()=>f(!1),selected:m,onSelection:e=>{m.some((t=>e.address===t.address))?x(m.filter((t=>e.address!==t.address))):x([...m,e])},onCategorySelection:e=>{j((t=>{if(t!==e)return e}))},onButtonClick:()=>{f(!1),a(m),i(y)},title:p("filter"),buttonLabel:p("confirmFilter"),multiple:!0,tokens:t,loading:n,categories:w,selectedCategory:y,showTokenInfo:d})]})};var ne=n(29007),oe=n(53840),ie=n(66790),se=n(17705),le=n(12361),ae=n(636);const re=(0,o.Ay)(ae.A)(["position:relative;"]),de=o.Ay.div(["width:16px;flex:0 1 0;"]),ce=e=>{let{tokens:t,size:n=20,...o}=e;return(0,Z.jsx)(re,{flexWrap:"wrap",...o,children:t.map((e=>(0,Z.jsx)(de,{children:(0,Z.jsx)(X.A,{width:"".concat(n,"px"),height:"".concat(n,"px"),symbol:e.symbol,name:e.name,maxWidth:"none"})},e.id)))})};var ue=n(8388),pe=n(45704);const he=o.Ay.td(["",""],pe.Zp),me=e=>{let{pool:t}=e;const{id:n,crp:o,swaps:i,totalShares:s,totalSwapVolume:l,userShare:a,hasExtraRewards:r,marketCap:d}=t,c=(0,M.lW)(s),u=!a||c.eq(0)?0:a.times(100).div(c).toNumber(),p=(0,M.lW)(t.liquidity).gt(0)?(0,M.lW)((0,D.nX)(t)).div(t.liquidity):(0,M.lW)(1),h=(0,oe.ly)(l,i).mul(p).toNumber(),m=(0,v.useMemo)((()=>t.tokens.map((e=>{let{xToken:t}=e;return null===t||void 0===t?void 0:t.token})).filter(Boolean)),[t.tokens]);return(0,Z.jsxs)("tr",{children:[(0,Z.jsx)(he,{title:n,children:(0,Z.jsx)(ue.N_,{to:"/pool/".concat(n),style:{textDecoration:"none"},children:(0,Z.jsx)(j.A.span,{color:"near-black",children:(0,ne.hA)(n)})})}),(0,Z.jsx)(he,{children:(0,Z.jsx)(ue.N_,{to:"/pool/".concat(n),style:{textDecoration:"none"},children:(0,Z.jsx)(ce,{tokens:m})})}),(0,Z.jsx)(he,{children:(0,Z.jsx)(ue.N_,{to:"/pool/".concat(n),style:{textDecoration:"none"},children:(0,Z.jsx)(ae.A,{flexWrap:"wrap",children:(0,ne.WW)(t.tokens).map((e=>{var t,n;return(0,Z.jsxs)(j.A.span,{mr:2,color:"black",children:[(0,Z.jsx)(j.A.span,{fontWeight:5,children:"".concat((0,M.lW)(e.weight).round(0,2).toString(),"% ")}),null===(t=e.xToken)||void 0===t||null===(n=t.token)||void 0===n?void 0:n.symbol]},e.address)}))})})}),(0,Z.jsx)(he,{style:{textAlign:"center"},children:r||o?(0,Z.jsxs)(ue.N_,{to:"/pool/".concat(n),style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:"8px",textDecoration:"none"},children:[r?(0,Z.jsx)(le.A,{style:{flexShrink:0},name:"PoolExtraRewards",width:"33px"}):null,o?(0,Z.jsx)(j.A.span,{style:{flexShrink:0},fontSize:"0.75rem",fontWeight:5,color:"primary",fontStyle:"italic",children:"SMART"}):null]}):null}),(0,Z.jsxs)(he,{children:[(0,M.lW)(t.swapFee).times(100).toString(),"%"]}),(0,Z.jsx)(he,{title:(0,ie.GM)(d||0),children:null===d?"--":"$".concat((0,ie.x4)(d||0))}),(0,Z.jsx)(he,{children:(0,Z.jsxs)(Z.Fragment,{children:[(0,se.f)(u,{base:1}),"%"]})}),(0,Z.jsxs)(he,{title:(0,ie.GM)(h),children:["$",(0,ie.x4)(h)]})]})};var xe=n(39318);const ve={tokensCount_gt:1,active:!0},ge={...ve,crp:!1,finalized:!0},Ae={...ve,crp:!0},ke=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,xe.A)(e).equals("my-pools").then((e=>({...e&&{holders_contains:[e]},tokensCount_gt:1,active:!0}))(t)).equals("smart-pools").then(Ae).else(n?ve:ge)};var fe=n(41681),ye=n(8074),je=n(92859),we=n(6162),be=n(2302),Te=n(42255);const Se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const n=(0,be.DB)(),o=(0,r.F7)(),{data:i,loading:s,error:l,refetch:a}=(0,b.I)(S.ZV,{pollInterval:W.a0}),d=(0,v.useMemo)((()=>(0,we.rN)(null===i||void 0===i?void 0:i.poolTokens.map(P.iJ).filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.xToken)&&void 0!==t&&t.paused)&&(e=>{const t=(0,ne.mv)();return[Te.y.mattereum,Te.y.fintiv].includes(t)?(0,I.$D)("Token").some((t=>(0,r.af)(e.id,t))):(0,ne.yV)("Token").every((t=>!(0,r.af)(e.id,t)))})(e)})))),[null===i||void 0===i?void 0:i.poolTokens]),c=(0,fe.A)((0,v.useMemo)((()=>n?{contract:e=>(0,ye.A)()(e),balance:(0,je.A)(o)}:void 0),[o,n]),(0,v.useMemo)((()=>d),[d])),u=(0,v.useMemo)((()=>c.filter((0,we.Ah)(e,t))),[c,t,e]);return{allTokens:c,tokens:u,loading:s,error:l,refetch:a}},{matchNetworkSupportsSmartPools:Ce}=i.Ay,We=(0,o.Ay)(d.A)(["col{width:10%;}colgroup.assets{col{&:first-child{width:68px;}&:nth-child(2){width:30%;}}}th,td{&:nth-last-child(-n + 4){text-align:right;}min-width:90px;white-space:nowrap;}td{color:",";}@media (max-width:","){col{width:0;}colgroup.assets{col{&:first-child{width:68px;}&:nth-child(2){width:auto;}}}col.market-cap{width:100px;}}"],(e=>e.theme.colors["near-black"]),(e=>{var t;let{theme:n}=e;return null===(t=n.breakpoints)||void 0===t?void 0:t[2]})),Ie=()=>{const{t:e}=(0,g.B)("pools"),{ifFeature:t}=(0,l.h)(),{networkId:n,networkName:o}=(0,r.AE)(),{current:i}=(0,v.useRef)((0,u.A)((0,p.default)((0,h.default)(Date.now()),1))),{category:d="all"}=(0,A.g)(),m=Ce(n),b=(0,r.F7)(),T=(0,s.or)(),{tokens:S,loading:C}=Se(),[W,I]=(0,w.pE)("category",w.fr),[M,P]=(0,w.pE)("assets",z),F=(0,v.useMemo)((()=>((e,t)=>e.filter((e=>t.some((t=>(0,r.af)(t,e.address))))))(S,M)),[S,M]),B=(0,v.useMemo)((()=>null===W||void 0===W?d:W),[W,d]),O=(0,a.A)((()=>({...(0,_.g)(),...ke(B,b,m&&t(l.A.smartPools,!0,!1)),...F.length>0&&{tokensList_contains:x()(F,"xToken.address")}})),[F,t,B,null===T||void 0===T?void 0:T.address,m]),[N,L]=(0,v.useState)(!0),{pools:R,called:E,loadingPools:D,refetch:q,fetchMore:G,refetching:X}=U({variables:{filter:O,currentTimestamp:i},skip:C}),H=D||!S.length&&C,K=E&&!C&&null===T;(0,v.useEffect)((()=>{let e=!0;return K&&(window.scrollTo({top:0,behavior:"smooth"}),q(O).then((t=>{let{data:{pools:n}}=t;e&&L(20===(null===n||void 0===n?void 0:n.length))}))),()=>{e=!1}}),[E,K,O,H,q]);const V=(0,v.useCallback)((async()=>{if(R&&N&&!H&&!C){const{data:{pools:e}}=await G(R.length,20);L(20===e.length)}}),[G,N,H,C,R]),$=(0,v.useMemo)((()=>R.sort(((e,t)=>t.marketCap-e.marketCap))),[R]);return(0,Z.jsxs)(k.A,{width:"100%",bg:"background",display:"flex",flexDirection:"column",p:[3,3,4],flexGrow:1,children:[(0,Z.jsx)(c.A,{}),(0,Z.jsxs)(f.A,{width:"100%",p:4,borderRadius:1,overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"stretch",children:[(0,Z.jsxs)(y.A,{as:"h3",mt:0,display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",children:[(0,Z.jsx)(j.A.span,{color:"grey",fontSize:3,lineHeight:"28px",fontWeight:5,flexGrow:1,flexShrink:0,mb:3,children:e("headings.".concat(B),{network:o})}),(0,Z.jsx)(te,{value:F,onSubmit:e=>P(x()(e,"address")),flexGrow:0,flexShrink:1,flexBasis:"auto",tokens:S,loading:C,category:B,setCategory:I,showTokenInfo:!0})]}),(0,Z.jsx)(We,{colgroup:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("colgroup",{children:(0,Z.jsx)("col",{})}),(0,Z.jsxs)("colgroup",{className:"assets",span:2,children:[(0,Z.jsx)("col",{}),(0,Z.jsx)("col",{})]}),(0,Z.jsxs)("colgroup",{children:[(0,Z.jsx)("col",{}),(0,Z.jsx)("col",{className:"market-cap"}),(0,Z.jsx)("col",{}),(0,Z.jsx)("col",{})]})]}),head:(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("th",{children:e("th.poolAddress")}),(0,Z.jsx)("th",{colSpan:2,scope:"colgroup",children:e("th.assets")}),(0,Z.jsx)("th",{style:{textAlign:"center"},children:e("th.features")}),(0,Z.jsx)("th",{children:e("th.swapFee")}),(0,Z.jsx)("th",{children:e("th.marketCap")}),(0,Z.jsx)("th",{children:e("th.myShare")}),(0,Z.jsx)("th",{children:e("th.volume")})]}),loading:H,hasMore:N,loadMore:V,noResults:(0,Z.jsx)("tr",{children:(0,Z.jsx)("td",{colSpan:7,children:(0,Z.jsx)(j.A.p,{color:"grey",textAlign:"center",width:"100%",children:e("noPools")})})}),children:X?[]:$.map((e=>(0,Z.jsx)(me,{pool:e},e.id)))})]})]})}},99609:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var o=n(63392),i=n(63668),s=n(87585),l=n(24361),a=n(92109),r=n(83843),d=n(636),c=n(1107),u=n(51861),p=n(4155),h=n(4173),m=n(9429),x=n(82794),v=n(18187),g=n(43337),A=n(848),k=n(85469),f=n(4287),y=n(50539),j=n(24537);const w={fontSize:16,position:"absolute",top:7},b=(0,A.A)((()=>(0,k.A)({root:{border:"1px solid ".concat(y.Q1.grey),borderRadius:4,height:36,width:78,padding:0},switchBase:{padding:0,"&$checked":{"& + $track":{backgroundColor:"transparent"}}},thumb:{borderRadius:2,margin:3,height:28,width:35,backgroundColor:y.Q1.grey,"&:before":{...w,color:y.Q1.background,content:"'Off'",left:7}},track:{borderRadius:2,backgroundColor:"transparent","&:after, &:before":{...w,color:y.Q1.grey},"&:after":{content:"'Off'",left:5},"&:before":{content:"'On'",right:5}},checked:{borderRadius:2,margin:3,height:28,width:35,color:"white",fontSize:16,backgroundColor:"".concat(y.Q1.primary," !important"),transform:"translateX(34px) !important"},focusVisible:{}})))((e=>{let{classes:t,...n}=e;return(0,j.jsx)(f.A,{focusVisibleClassName:t.focusVisible,disableRipple:!0,checkedIcon:(0,j.jsx)("span",{style:{color:"white"},children:"On"}),classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked},...n})})),T=e=>{let{isOpen:t,onClose:n}=e;const{t:A}=(0,r.B)("swap"),{addAlert:k}=(0,s.dh)(),{settings:f,setSwapSettings:y}=(0,h.C)(),[w,T]=(0,a.useState)(f),S=(0,a.useMemo)((()=>w.tolerance<=x.PD),[w.tolerance]),C=(0,a.useCallback)((e=>T((t=>({...t,tolerance:e})))),[]),W=(0,a.useCallback)((()=>T((e=>({...e,autoPaySmtDiscount:!e.autoPaySmtDiscount})))),[]),I=(0,a.useCallback)((()=>{y(w),(0,g.E)(w),k(A("advancedSettings.savedTextToastMessage"),{variant:l.w.success}),n()}),[A,k,n,w,y]),M=(0,a.useCallback)((()=>T(f)),[f]),P=(0,v.FC)(),F=(0,a.useCallback)((()=>{M(),n()}),[n,M]);return(0,j.jsxs)(o.A,{isOpen:t,width:["100%","auto"],minWidth:[0,0,"428px"],onClose:F,p:"24px",title:A("advancedSettings.header"),titleProps:{fontSize:3},children:[(0,j.jsxs)(d.A,{alignItems:"center",mt:3,children:[(0,j.jsx)(c.A,{as:"h4",fontSize:1,lineHeight:"copy",fontWeight:5,m:0,color:"black",children:A("advancedSettings.tolerance")}),(0,j.jsx)(i.A,{placement:"top",message:A("advancedSettings.toleranceTooltip"),variant:"light",children:(0,j.jsx)(u.A,{variant:"plain",height:"16px",icononly:!0,icon:"Help",ml:2})})]}),(0,j.jsx)(p.A,{children:(0,j.jsx)(m.A,{selectedValue:w.tolerance,options:x.Un,onSelect:C,validator:e=>e>=0&&e<100})}),P&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(d.A,{alignItems:"center",mt:"24px",children:[(0,j.jsx)(c.A,{as:"h4",fontSize:1,lineHeight:"copy",fontWeight:5,m:0,color:"black",children:A("advancedSettings.discountAutoPay")}),(0,j.jsx)(i.A,{placement:"top",message:A("advancedSettings.discountAutoPayTooltip"),variant:"light",children:(0,j.jsx)(u.A,{variant:"plain",height:"16px",icononly:!0,icon:"Help",ml:2})})]}),(0,j.jsx)(p.A,{children:(0,j.jsx)(b,{checked:w.autoPaySmtDiscount,onChange:W})})]}),(0,j.jsx)(p.A,{mt:"24px",children:(0,j.jsx)(u.A,{disabled:!S,width:"100%",onClick:I,children:A("advancedSettings.saveBtn")})})]})}},1095:(e,t,n)=>{"use strict";n.d(t,{A:()=>Ke});var o,i=n(173),s=n(12225),l=n(82488),a=n(63668),r=n(12983),d=n(12361),c=n(92109),u=n(83843),p=n(25421),h=n(636),m=n(1107),x=n(4155),v=n(51861),g=n(98610),A=n(16823),k=n(82350),f=n(49742),y=n(5421),j=n(27958);class w extends k.A{constructor(e,t){super(e,y.A.SmtPriceFeed,t),this.getDecimals=async()=>{try{var e;this.init();return(await(null===(e=this.contract)||void 0===e?void 0:e.decimals())).toNumber()}catch{return 0}},this.getPrice=async e=>{try{var t;this.init();const n=await this.getDecimals(),o=await(null===(t=this.contract)||void 0===t?void 0:t.getPrice(e));return(0,j.S8)(o.toString(),n)}catch{return j.f2}}}}o=w,w.instances={},w.getInstance=async()=>{const e=await f.x.getSmtPriceFeedAddress();return o.instances[e]||(o.instances[e]=new o(e),await o.instances[e].init()),o.instances[e]},w.getPrice=async e=>{try{const t=await o.getInstance();return await t.getPrice(e)}catch{return j.f2}},w.calculateAmount=async(e,t)=>{try{var n;const i=await o.getInstance();return(await(null===i||void 0===i||null===(n=i.contract)||void 0===n?void 0:n.calculateAmount(e,(0,j.lW)(t).toFixed(0)))).toString()}catch{return"0"}};var b=n(61336),T=n(67141),S=n(81746),C=n(97266),W=n(58768),I=n(75328),M=n(75223),P=n(21870),F=n(15627),B=n(40040),O=n(66790),N=n(76958),L=n(74977),R=n(62491),E=n(38024);const z=function(e){let{minValue:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&(0,j.lW)(e).lt(t)&&!(0,j.lW)(e).eq(0)?"<".concat((0,j.lW)(t).toString()):(0,E.A)(e,n)};var D=n(23083),q=n(77450),U=n(35005),_=n(2302),G=n(73284),X=n(81788),H=n(4269),K=n(81087),V=n(6218),Z=n(7329),$=n(32353);const{user:J,project:Q,accessKey:Y}=A.Ay.tenderlyPreferences,ee=e=>{let{simulation:t}=e;return{from:t.from,to:t.to,error:t.error_message,method:t.method,network:t.network_id}},te=async(e,t)=>(async(e,t)=>{const n="".concat("https://api.tenderly.co/api/v1","/account/").concat(J,"/project/").concat(Q).concat(e);return(await fetch(n,{headers:{"X-Access-Key":Y,"content-type":"application/json"},...t})).json()})(e,{...t,method:"POST"});var ne=n(87585),oe=n(24361),ie=n(37219),se=n(24537);const le=e=>{let{txs:t,...n}=e;const{addError:o,addAlert:i}=(0,ne.dh)(),{t:s}=(0,u.B)("alerts");return(0,se.jsx)(ie.A,{height:22,width:80,loaderColor:"primary",...n,onClick:async()=>{try{const e=(await(async e=>{const t=(0,b.rz)(),n=(0,$.hY)(),o=await te("/simulate-bundle",{body:JSON.stringify({simulations:e.map((e=>({network_id:n,save:!0,save_if_fails:!0,simulation_type:"full",input:e.data,from:t.address,...e})))})});return console.log(o),o.simulation_results.map(ee)})(t)).find((e=>e.error));e?o(e.error):i(s("tenderlySimulation.success"),{variant:oe.w.success})}catch(e){o(e)}},component:v.A.Outline,children:(0,se.jsx)(d.A,{name:"Tenderly",width:60,height:12})})};var ae=n(17689),re=n(96363),de=n(74567),ce=n(72376),ue=n(9336),pe=n(86668),he=n(53903),me=n(63392),xe=n(52687),ve=n(15310),ge=n(35979);const{coreConcepts:Ae}=A.Ay.resources.docs,ke=e=>{let{isOpen:t,onResolve:n,onReject:o}=e;const{t:i}=(0,u.B)("swap");return(0,se.jsx)(me.A,{isOpen:t,width:["100%","440px"],onClose:o,title:i("proxyContractModal.header"),children:(0,se.jsxs)(x.A,{children:[(0,se.jsx)(xe.A,{my:3,variant:"info",width:"100%",border:"2px solid",maxWidth:["auto","auto","1028px"],mb:"24px",children:(0,se.jsxs)(h.A,{children:[(0,se.jsx)(ve.A,{name:"ErrorOutline",color:"primary-dark"}),(0,se.jsx)(pe.A.p,{color:"primary-dark",fontWeight:5,my:0,ml:2,children:i("proxyContractModal.flash")})]})}),(0,se.jsx)(pe.A,{children:i("proxyContractModal.content")}),(0,se.jsx)(ge.A,{href:Ae.swaps,color:"primary",hoverColor:"dark-gray",fontSize:2,fontWeight:3,children:i("proxyContractModal.link")}),(0,se.jsxs)(x.A,{mt:"24px",children:[(0,se.jsx)(v.A,{size:"medium",onClick:n,children:i("proxyContractModal.continue")}),(0,se.jsx)(v.A.Outline,{size:"medium",ml:3,onClick:o,children:i("proxyContractModal.cancel")})]})]})})};var fe=n(84665),ye=n(4173),je=n(77686),we=n(48372),be=n(71829);class Te extends k.A{constructor(e,t){super(e,be.A.NativeTokenWrapper,t)}getDepositTransaction(e){var t;return null===(t=this.contract)||void 0===t?void 0:t.populateTransaction.deposit({value:we.parseEther(String(e))})}async getDepositGasFeePriceEstimate(e){this.init(),this.updateSigner();const t=await this.getDepositTransaction(e);return void 0===t||void 0===this.signer?we.parseEther("0"):(0,l.Js)(this.signer,t)}async deposit(e){var t;this.init(),this.updateSigner();const n=await this.getDepositTransaction(e);if(void 0!==n)return null===(t=this.signer)||void 0===t?void 0:t.sendTransaction(n)}withdraw(e){var t;return this.init(),this.updateSigner(),null===(t=this.contract)||void 0===t?void 0:t.withdraw(we.parseEther(String(e)))}}var Se=n(18187),Ce=n(34206);const We=e=>{var t;let{checked:n,setChecked:o,utilityToken:i,feeAmount:s,isDisabled:l=!1}=e;const{checkFeature:a}=(0,C.h)(),{tokenIn:r,settings:{autoPaySmtDiscount:d}}=(0,ye.C)(),[u]=(0,T.A)((async()=>{var e;if(!a(C.A.swapSmtDiscount))return!1;if(null!==r&&void 0!==r&&null!==(e=r.xToken)&&void 0!==e&&e.id){return(await w.getPrice(r.xToken.id)).gt(0)}return d}),d,[null===r||void 0===r||null===(t=r.xToken)||void 0===t?void 0:t.id]);(0,c.useEffect)((()=>{!u&&n&&o(!1)}),[u,n,o]),(0,c.useEffect)((()=>{d&&u&&o(!0)}),[d,u,o]),(0,c.useEffect)((()=>{d||o(!1)}),[d,u,o]),(0,c.useEffect)((()=>{n&&null!==i&&void 0!==i&&i.balance&&(0,N.lW)(s).gt(i.balance)&&o(!1)}),[n,o,null===i||void 0===i?void 0:i.balance,s]);const p=(0,c.useMemo)((()=>l||!(u&&null!==i&&void 0!==i&&i.balance&&(0,N.lW)(s).lt(i.balance))),[l,u,null===i||void 0===i?void 0:i.balance,s]);return(0,se.jsx)(Ce.A,{disabled:p,checked:n,onChange:()=>o((e=>!e))})};var Ie=n(90479);let Me=function(e){return e[e.gas=0]="gas",e[e.price=1]="price",e}({});const Pe=(0,Ie.Ay)(v.A).attrs((e=>{let{checked:t}=e;return{width:"100%",minWidth:0,height:["36px","28px"],borderRadius:1,boxShadow:0,mainColor:t?"white":"off-white",contrastColor:t?"primary":"black"}}))(["&:hover{box-shadow:none;&:active{background-color:",";}}svg{height:",";width:",";","}&{width:",";height:",";padding:",";transition:all 1s;transition-timing-function:ease-in-out;}"],(e=>{let{checked:t,theme:n}=e;return t?n.colors.white:n.colors["off-white"]}),(e=>{let{iconSize:t}=e;return t}),(e=>{let{iconSize:t}=e;return t}),(e=>{let{outlinedIcon:t}=e;return t&&"\n    border-radius: 50%;\n    border: 1.8px solid currentColor;\n  "}),(e=>{let{hidden:t}=e;return t&&"0px"}),(e=>{let{hidden:t}=e;return t&&"0px"}),(e=>{let{hidden:t}=e;return t&&"0px"})),Fe=e=>{let{strategy:t,setStrategy:n,swapType:o,swapStrategiesDiff:i}=e;const{t:s}=(0,u.B)("swap"),{tokenIn:l,tokenOut:a}=(0,ye.C)(),r=(0,c.useMemo)((()=>{if(null!==i){const e=o===ce.yL.exactIn?(0,N.lW)(i.totalReturn):(0,N.lW)(i.totalReturn).times(-1);return(0,N.S8)(e,o===ce.yL.exactIn?null===a||void 0===a?void 0:a.decimals:null===l||void 0===l?void 0:l.decimals).toNumber()}return-1}),[i,o,l,a]);(0,c.useEffect)((()=>{null===i&&n(Me.price)}),[n,i]);const d=(0,c.useMemo)((()=>r<=0?s("optimization.priceIsTheBest"):o===ce.yL.exactIn?s("optimization.receiveMore",{amount:r,tokenSymbol:null===a||void 0===a?void 0:a.symbol}):s("optimization.spendLess",{amount:r,tokenSymbol:null===l||void 0===l?void 0:l.symbol})),[r,o,s,null===l||void 0===l?void 0:l.symbol,null===a||void 0===a?void 0:a.symbol]);return(0,se.jsxs)(x.A,{width:"100%",mt:3,children:[(0,se.jsx)(pe.A,{fontSize:1,color:"near-black",fontWeight:5,children:s("optimization.optimizedFor")}),(0,se.jsxs)(h.A,{width:"100%",bg:"off-white",p:1,mt:2,borderRadius:1,flexDirection:["column","row"],children:[(0,se.jsx)(Pe,{icon:"Whatshot",iconSize:"18px",disabled:r<=0,title:d,onClick:()=>n(Me.price),checked:t===Me.price,children:s("optimization.bestPrice")}),(0,se.jsx)(Pe,{icon:"AttachMoney",iconSize:"15px",outlinedIcon:!0,hidden:r<=0,onClick:()=>n(Me.gas),checked:t===Me.gas,children:s("optimization.lowestGas")})]}),(0,se.jsx)(pe.A,{mx:1,lineHeight:"20px",fontSize:"10px",textAlign:"center",borderRadius:"2px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",children:s("optimization.".concat(t===Me.price?"bestPriceNote":"cheapestNote"))})]})},Be=e=>{let{swapPrice:t,disabled:n,tokenInSymbol:o,tokenOutSymbol:i,tokenInExchangeRate:s,tokenOutExchangeRate:l}=e;const{t:a}=(0,u.B)("swap"),[r,d]=(0,c.useState)(!1),p=(0,c.useMemo)((()=>r?[i,o]:[o,i]),[r,o,i]),h=(0,c.useMemo)((()=>{const e=(0,N.lW)(t);if(!e.eq(0)&&l&&s)return r?(0,N.lW)(1).div(e).times(s).toNumber():e.times(l).toNumber()}),[r,t,s,l]),m=(0,c.useCallback)((()=>d((e=>!e))),[]),x=(0,c.useMemo)((()=>{const e=(0,N.lW)(t);return e.eq(0)?"--":a("assets.exchangeRate",{tokenIn:p[0],rate:(0,O.GM)(r?(0,N.lW)(1).div(e):e,6),tokenOut:p[1],usdValue:h?(0,O.GM)(h):"--"})}),[r,t,a,p,h]);return(0,se.jsxs)(pe.A,{fontSize:1,color:"grey",textAlign:"center",mt:"20px",display:"flex",justifyContent:"center",alignItems:"center",opacity:n?0:1,children:[x,(0,se.jsx)(v.A.Text,{onlyIcon:!0,icon:"SwapHoriz",height:"auto",onClick:m})]})};var Oe=n(26678),Ne=n(87936),Le=n(17266);const Re=e=>{var t,n,o,i,s,l;return{id:null===e||void 0===e?void 0:e.id,balance:null===e||void 0===e?void 0:e.balance,decimals:null===e||void 0===e?void 0:e.decimals,denormWeight:null===e||void 0===e?void 0:e.denormWeight,...(null===e||void 0===e?void 0:e.poolId)&&{poolId:{id:(0,Le.getAddress)(null===(t=e.poolId)||void 0===t?void 0:t.id),publicSwap:null===(n=e.poolId)||void 0===n?void 0:n.publicSwap,swapFee:null===(o=e.poolId)||void 0===o?void 0:o.swapFee,tokensList:null===(i=e.poolId)||void 0===i?void 0:i.tokensList,totalWeight:null===(s=e.poolId)||void 0===s?void 0:s.totalWeight,tokens:null===(l=e.poolId)||void 0===l?void 0:l.tokens.map(Re)}}}},Ee=e=>{var t;return{id:(0,Le.getAddress)((null===e||void 0===e?void 0:e.id)||""),decimals:null===e||void 0===e?void 0:e.decimals,paused:null===e||void 0===e?void 0:e.paused,poolTokens:null===e||void 0===e||null===(t=e.poolTokens)||void 0===t?void 0:t.map(Re)}},ze=e=>({id:(0,Le.getAddress)(e.id),decimals:null===e||void 0===e?void 0:e.decimals,xToken:Ee(e.xToken)});function De(e,t){return void 0!==e&&void 0!==t&&(0,q.rk)(e)&&(0,q.os)(t)}function qe(e,t){return void 0!==e&&void 0!==t&&(0,q.os)(e)&&(0,q.rk)(t)}const Ue={amountIn:0,amountOut:0},_e={swaps:[],totalReturn:0,totalSwapLimitInput:0,totalSwapFeeAmount:0,totalAvailableReturnAmount:0,swapStrategiesDiff:null,swapPrice:0,error:null},Ge=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce.yL.exactIn,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ue;const{swapRouter:a,error:r}=(0,c.useMemo)((()=>{if(e&&t&&e.xToken&&t.xToken){const o=ze(e),i=ze(t);try{return{swapRouter:new ce.Ay(o,i,5),error:null}}catch(n){if(n instanceof ce.kf)return{swapRouter:null,error:n.hash};throw n}}return{swapRouter:null,error:null}}),[e,t]),{t:d}=(0,u.B)("errors"),[,p]=(0,Ne.pE)("amountOut"),h=De(e,t),m=qe(e,t),[{amountIn:x,amountOut:v},g]=(0,c.useState)(l),A=(0,c.useMemo)((()=>n===ce.yL.exactIn?(0,N.NU)(x,null===e||void 0===e?void 0:e.decimals).toString():(0,N.NU)(v,null===t||void 0===t?void 0:t.decimals).toString()),[n,null===e||void 0===e?void 0:e.decimals,null===t||void 0===t?void 0:t.decimals,x,v]),{swaps:k,totalReturn:f,totalSwapFeeAmount:y,totalSwapLimitInput:j,totalAvailableReturnAmount:w,error:b,swapStrategiesDiff:S,swapPrice:C}=(0,c.useMemo)((()=>{if(h||m)return{swaps:[],totalReturn:A,totalSwapFeeAmount:0,totalSwapLimitInput:0,totalAvailableReturnAmount:A,error:null,swapStrategiesDiff:null,swapPrice:1};if(!a)return _e;try{const{shortestRoute:e,bestSpotPriceRoute:t,routesDiff:o}=a.getOptimizedRoutes(n,A),i={error:null,swapStrategiesDiff:o};return null!==o&&s===Me.price?{...t,...i}:{...e,...i}}catch(e){if(e instanceof ce.kf)return{..._e,error:e.hash};throw e}}),[a,s,A,n,h,m]),[W]=(0,T.A)((async()=>{if(h||m)return 0;const t=(0,N.NU)(x,null===e||void 0===e?void 0:e.decimals);return(await(0,Oe.lQ)(t,y)).toFixed(0)}),0,[h,m,null===e||void 0===e?void 0:e.decimals,x,y]),[M]=(0,T.A)((async()=>{const t=(0,N.NU)((null===e||void 0===e?void 0:e.balance)||0,null===e||void 0===e?void 0:e.decimals);if(h||m)return(0,N.S8)(t,null===e||void 0===e?void 0:e.decimals).toNumber();try{if(a){const n=a.getExactInLimits(t);if(i){const t=await(0,Oe.lQ)(n.totalSwapLimitInput,n.totalSwapFeeAmount);return(0,N.S8)((0,N.lW)(n.totalSwapLimitInput).minus(t),null===e||void 0===e?void 0:e.decimals).toNumber()}return(0,N.S8)(n.totalSwapLimitInput,null===e||void 0===e?void 0:e.decimals).toNumber()}return 0}catch{return 0}}),0,[a,e,h,m,i]),[P,F]=(0,c.useState)(0),B=(0,c.useCallback)((async()=>{if(0===M)return void F(0);const t=(0,I.wc)(),n=new Te(t.nativeTokenWrapperAddress),o=await n.getDepositGasFeePriceEstimate(M),i=(0,N.S8)(o.toString(),null===e||void 0===e?void 0:e.decimals).toNumber();F(M-i)}),[M,e]);(0,c.useEffect)((()=>{h&&B()}),[h,B]);const O=(0,c.useMemo)((()=>{if(h||m)return 0;const[o,i]=n===ce.yL.exactIn?[j,w]:[w,j];return(0,N.lW)(i).eq(0)?0:(0,N.S8)(i,null===t||void 0===t?void 0:t.decimals).div((0,N.S8)(o,null===e||void 0===e?void 0:e.decimals)).toNumber()}),[h,m,n,j,w,null===e||void 0===e?void 0:e.decimals,null===t||void 0===t?void 0:t.decimals]),L=(0,c.useMemo)((()=>{const t=i?(0,N.S8)(W,null===e||void 0===e?void 0:e.decimals).toNumber():0,n=(()=>{if(void 0===e||null===e.balance||void 0===e.balance)return!1;const n=e.balance.toNumber()<x+t;return h?n&&x>P:n})(),s=0===x||0===v,{tolerance:l=0}=o||{};return{valid:!r&&!n&&!b&&!s&&!(l<0||l>100),error:r&&d("swap.".concat(r))||n&&d("insufficientBalance",{symbol:null===e||void 0===e?void 0:e.symbol})||b&&d("swap.".concat(b))}}),[e,W,i,x,v,o,b,r,d,h,P]),R=(0,c.useCallback)((e=>{g({amountIn:e,amountOut:(0,N.S8)(f,null===t||void 0===t?void 0:t.decimals).round(null===t||void 0===t?void 0:t.decimals,0).toNumber()}),p(void 0)}),[null===t||void 0===t?void 0:t.decimals,f,p]),E=(0,c.useCallback)((t=>{g({amountIn:(0,N.S8)(f,null===e||void 0===e?void 0:e.decimals).round(null===e||void 0===e?void 0:e.decimals,0).toNumber(),amountOut:t}),p(String(t))}),[f,null===e||void 0===e?void 0:e.decimals,p]);return(0,c.useEffect)((()=>{g((o=>n===ce.yL.exactIn?{amountIn:o.amountIn,amountOut:(0,N.S8)(f,null===t||void 0===t?void 0:t.decimals).round(null===t||void 0===t?void 0:t.decimals,0).toNumber()}:{amountIn:(0,N.S8)(f,null===e||void 0===e?void 0:e.decimals).round(null===e||void 0===e?void 0:e.decimals,0).toNumber(),amountOut:o.amountOut}))}),[f,null===e||void 0===e?void 0:e.decimals,null===t||void 0===t?void 0:t.decimals,n]),(0,c.useMemo)((()=>({amountIn:x,amountOut:v,maxAmountIn:M,maxNativeTokenAmountIn:P,protocolFee:W,swaps:k,totalSwapFeeAmount:y,totalReturn:f,lastPrice:O,...L,setAmountIn:R,setAmountOut:E,swapStrategiesDiff:S,swapPrice:C})),[x,v,M,P,W,k,y,f,O,L,R,E,S,C])},{faq:Xe}=A.Ay.resources.docs.gettingStarted,He=()=>{var e,t,n,o,s,a,r,p;const{t:m}=(0,u.B)(["swap","errors"]),{addError:v}=(0,ne.dh)(),{track:A}=(0,W.A)(),k=(0,l.F7)(),f=(0,b.or)(),y=(0,_.oN)(),j=(0,M.o)(),{checkFeature:$}=(0,C.h)(),[J,Q]=(0,c.useState)(!1),Y=(0,i.A)(!1),[ee,te]=(0,c.useState)(!1),{tokenIn:oe,tokenOut:ie,settings:me,setTokenPair:xe,swaps:ve,queryParams:ge,fullTokens:Ae,reloadTokens:we,loading:be,balancesLoading:Ce,initiated:Ie}=(0,ye.C)(),Pe=De(oe,ie),Oe=qe(oe,ie),[Ne,Le]=(0,c.useState)(me.autoPaySmtDiscount),Re=Ne&&!1===Pe&&!1===Oe,[Ee,ze]=(0,c.useState)(ce.yL.exactIn),[Ue,_e]=(0,c.useState)(Me.gas),{amountIn:He,amountOut:Ke,maxAmountIn:Ve,maxNativeTokenAmountIn:Ze,lastPrice:$e,protocolFee:Je,swaps:Qe,totalSwapFeeAmount:Ye,valid:et,error:tt,setAmountIn:nt,setAmountOut:ot,swapStrategiesDiff:it,swapPrice:st}=Ge(oe,ie,Ee,me,!Re,Ue),{checkSecurityPermission:lt}=(0,g._D)(),at=(0,c.useMemo)((()=>(0,N.lW)(Ke).times(1-me.tolerance/100)),[Ke,me.tolerance]),rt=(0,c.useMemo)((()=>(0,N.lW)(He).times(1+me.tolerance/100)),[He,me.tolerance]),dt=null!==(e=null===oe||void 0===oe||null===(t=oe.xToken)||void 0===t||null===(n=t.cpkBalance)||void 0===n?void 0:n.gt(0))&&void 0!==e&&e,ct=null!==(o=null===ie||void 0===ie||null===(s=ie.xToken)||void 0===s||null===(a=s.cpkBalance)||void 0===a?void 0:a.gt(0))&&void 0!==o&&o,[ut,pt]=(0,S.A)(!1),[ht]=(0,T.A)((()=>je.F.getUtilityTokenAddress()),null,[]),mt=(0,c.useMemo)((()=>Ae.find((0,B.Lj)("id",ht))),[Ae,ht]),[xt]=(0,T.A)((async()=>{var e;const t=(0,N.lW)(Je);if(null!==oe&&void 0!==oe&&null!==(e=oe.xToken)&&void 0!==e&&e.id&&t.gt(0)){const e=await w.calculateAmount(oe.xToken.id,t.div(2));return(0,N.S8)(e,null===mt||void 0===mt?void 0:mt.decimals).toString()}return"0"}),"0",[null===oe||void 0===oe||null===(r=oe.xToken)||void 0===r?void 0:r.id,Je,null===mt||void 0===mt?void 0:mt.decimals]),[vt]=(0,T.A)((async()=>{if(!k||!oe||!ie||!$(C.A.tenderlySimulation))return[];const e=Re?(0,N.NU)(xt,null===mt||void 0===mt?void 0:mt.decimals):Je;if(Ee===ce.yL.exactIn){const{storedTxs:t}=await je.F.multihopBatchSwapExactInStatic(k,Qe,oe,ie,(0,N.lW)(Ke).times(1-me.tolerance/100),e,Re?mt:void 0);return t}const{storedTxs:t}=await je.F.multihopBatchSwapExactOutStatic(k,Qe,oe,ie,(0,N.lW)(He).times(1+me.tolerance/100).toString(),(0,N.lW)(e).times(1+me.tolerance/100),Re?mt:void 0);return t}),[],[k,He,Ke,Re,Je,me.tolerance,xt,Qe,Ee,oe,ie,mt]),gt=(0,c.useCallback)((e=>{Number.isNaN(e)||(nt(Number(e)),ze(ce.yL.exactIn))}),[nt]),At=(0,c.useCallback)((e=>{Number.isNaN(e)||(ot(Number(e)),ze(ce.yL.exactOut))}),[ot]);(0,c.useEffect)((()=>{ge.amountOut&&At(ge.amountOut)}),[ge.amountOut,At]);const kt=(0,c.useCallback)((e=>{(null===ie||void 0===ie?void 0:ie.id)===e.id?(xe({tokenInAddress:e.id,tokenOutAddress:null===oe||void 0===oe?void 0:oe.id}),nt(Ke),ze(ce.yL.exactIn)):xe({tokenInAddress:e.id})}),[null===ie||void 0===ie?void 0:ie.id,xe,oe,nt,Ke]),ft=(0,c.useCallback)((()=>{xe({tokenInAddress:null===ie||void 0===ie?void 0:ie.id,tokenOutAddress:null===oe||void 0===oe?void 0:oe.id}),nt(Ke),ze(ce.yL.exactIn)}),[xe,ie,oe,nt,Ke]),yt=(0,c.useCallback)((async()=>{if(k&&oe&&ie)if(j||J)if(!ct&&!dt||Y.isOpen||ee){te(!1),pt(!0);try{let e;const t=Re?(0,N.NU)(xt,null===mt||void 0===mt?void 0:mt.decimals):Je;e=Ee===ce.yL.exactIn?await je.F.multihopBatchSwapExactIn(k,Qe,oe,ie,(0,N.lW)(Ke).times(1-me.tolerance/100),t,Re?mt:void 0):await je.F.multihopBatchSwapExactOut(k,Qe,oe,ie,(0,N.lW)(He).times(1+me.tolerance/100).toString(),(0,N.lW)(t).times(1+me.tolerance/100),Re?mt:void 0),await A(e),(0,L.A)((()=>{var e;return Promise.all([we(),ve.refetch(void 0!==(null===(e=ve.data)||void 0===e?void 0:e.swaps)?ve.data.swaps.length+1:ve.options.limit)])}),3*P.Td,4)}catch(e){v(e,{description:m("errors:transactionGeneric"),actionText:"faqs",actionHref:Xe})}finally{pt(!1)}}else Y.open();else Q(!0)}),[k,oe,ie,j,J,ct,dt,Y,ee,pt,Re,xt,mt,Qe,Je,Ee,A,He,Ke,me.tolerance,we,ve,v,m]),jt=async e=>{Q(!1),"resolve"===e&&await yt()},wt=(0,c.useCallback)((async e=>{pt(!0);try{var t;const n=await(null===e||void 0===e||null===(t=e.contract)||void 0===t?void 0:t.enableToken((null===f||void 0===f?void 0:f.address)||""));await A(n,{skipSubmit:!0,confirm:{message:"".concat(null===e||void 0===e?void 0:e.name," is enabled")}}),await(0,R.A)(2e3)}catch(n){v(n)}finally{pt(!1)}}),[null===f||void 0===f?void 0:f.address,pt,A,v]),bt=(0,c.useCallback)((async()=>{const e=(0,I.wc)();pt(!0);try{const t=new Te(e.nativeTokenWrapperAddress),n=await t.deposit(He);await A(n,{confirm:{message:m("assets.wrappedNativeToken",{nativeTokenSymbol:null===oe||void 0===oe?void 0:oe.symbol})}}),setTimeout(we,P.Td)}catch(t){v(t)}finally{pt(!1)}}),[He,pt,A,v,we,m,oe]),Tt=(0,c.useCallback)((async()=>{const e=(0,I.wc)();pt(!0);try{const t=new Te(e.nativeTokenWrapperAddress),n=await t.withdraw(He);await A(n,{confirm:{message:m("assets.unwrappedNativeToken",{wrapperNativeTokenSymbol:null===oe||void 0===oe?void 0:oe.symbol})}}),setTimeout(we,P.Td)}catch(t){v(t)}finally{pt(!1)}}),[He,pt,A,v,we,m,oe]),St=oe&&(0,D.V8)(oe,k),Ct=mt&&(0,D.V8)(mt,k),Wt=oe&&(0,D.Ol)(oe,He),It=mt&&(0,D.Ol)(mt,xt),Mt=(0,c.useCallback)((async()=>{if(!oe||!ie)return;return await lt(oe,ie)?Pe?bt():Oe?Tt():!oe||St||Wt?Re&&mt&&!Ct&&!It?wt(mt):yt():wt(oe):void 0}),[lt,oe,ie,Pe,Oe,St,Wt,Re,mt,Ct,It,yt,bt,Tt,wt]),Pt=(0,c.useMemo)((()=>!Ie||ut||be||Ce||St||Re&&Ct),[Ie,ut,be,Ce,St,Re,Ct]),Ft=!k||Pt||y===F.Ju.tier0||!et,Bt=(0,Se.FC)(),Ot=(0,c.useMemo)((()=>{const e=(0,N.lW)(st),t=(0,N.lW)($e);return e.lte(0)||t.lte(0)?0:t.sub(e).div(t).round(2,3).abs().toNumber()}),[$e,st]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)(H.A,{gridTemplateColumns:"2fr 150px",gridGap:[2,3],children:[(0,se.jsxs)(h.A,{width:"100%",flexDirection:"column",justifyContent:"flex-end",children:[(0,se.jsx)(X.A,{mobile:!0,children:m("assets.from")}),(0,se.jsx)(x.A,{position:"relative",children:(0,se.jsx)(re.A,{onChange:gt,value:He,max:Pe?Ze:Ve,decimalScale:oe&&(0,U.H)(oe),height:"48px",px:"16px",disabled:Pt})})]}),(0,se.jsx)(h.A,{width:"100%",flexDirection:"column",justifyContent:"flex-end",children:(0,se.jsx)(de.A,{onChange:kt,selected:oe,tokens:Ae,loading:!Ie,orderBy:"userBalances.usd",orderDirection:"desc",readonly:Pt,showTokenInfo:!0})})]}),(0,se.jsx)(h.A,{my:3,justifyContent:"center",width:"100%",children:(0,se.jsx)(fe.Q,{onlyIcon:!0,onClick:ft,children:(0,se.jsx)(d.A,{name:"DownIcon"})})}),(0,se.jsxs)(H.A,{gridTemplateColumns:"2fr 150px",gridGap:[2,3],children:[(0,se.jsxs)(h.A,{width:"100%",flexDirection:"column",justifyContent:"flex-end",children:[(0,se.jsx)(X.A,{mobile:!0,children:m("assets.to")}),(0,se.jsx)(re.A,{onChange:At,value:Ke,decimalScale:ie&&(0,U.H)(ie),disabled:Pt||!ie,height:"48px",px:"16px",showMax:!1})]}),(0,se.jsx)(h.A,{width:"100%",flexDirection:"column",justifyContent:"flex-end",children:(0,se.jsx)(de.A,{onChange:e=>xe({tokenOutAddress:e.id}),selected:ie,filter:e=>!(0,l.af)(e.id,null===oe||void 0===oe?void 0:oe.id),tokens:Ae,loading:!Ie,emptyValue:(0,se.jsx)(pe.A.span,{color:"grey",children:m("assets.selectToken")}),orderBy:"userBalances.usd",orderDirection:"desc",readonly:Pt||!!oe&&(0,q.rk)(oe),showTokenInfo:!0})})]}),(0,se.jsx)(Be,{swapPrice:st,tokenInSymbol:null===oe||void 0===oe?void 0:oe.symbol,tokenOutSymbol:null===ie||void 0===ie?void 0:ie.symbol,tokenInExchangeRate:null===oe||void 0===oe?void 0:oe.exchangeRate,tokenOutExchangeRate:null===ie||void 0===ie?void 0:ie.exchangeRate,disabled:!ie||!oe}),(0,se.jsx)(ae.A,{name:C.A.smartOrderRouter,children:(0,se.jsx)(Fe,{strategy:Ue,setStrategy:_e,swapType:Ee,swapStrategiesDiff:it})}),(0,se.jsxs)(h.A,{flexDirection:"column",alignItems:"end",children:[(0,se.jsx)(Z.A,{type:"button",disabled:Ft,width:"100%",height:["40px","52px"],fontWeight:4,fontSize:[2,3],mt:"24px",mainColor:Pt?"grey":"primary",onClick:Mt,loadingText:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ue.A,{mr:2,color:"white"}),m("assets.loading")]}),children:Pt?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ue.A,{mr:2,color:"white"}),m("assets.loading")]}):k?tt||(Pe?m("assets.wrapNativeToken",{nativeTokenSymbol:null===oe||void 0===oe?void 0:oe.symbol,wrappedNativeTokenSymbol:null===ie||void 0===ie?void 0:ie.symbol}):Oe?m("assets.unwrapNativeToken",{nativeTokenSymbol:null===ie||void 0===ie?void 0:ie.symbol,wrappedNativeTokenSymbol:null===oe||void 0===oe?void 0:oe.symbol}):Wt?Re&&!It?m("assets.enableToken",{tokenName:null===mt||void 0===mt?void 0:mt.symbol}):m("assets.swapButton"):m("assets.enableToken",{tokenName:null===oe||void 0===oe?void 0:oe.symbol})):m("assets.swapButton")}),(0,se.jsx)(ae.A,{name:C.A.tenderlySimulation,children:(0,se.jsx)(le,{disabled:Ft,txs:vt,mt:"4px"})})]}),(0,se.jsx)(G.A,{title:m("assets.moreInfo"),dividerThickness:0,mt:"24px",children:(0,se.jsxs)(h.A,{flexDirection:"column",color:"grey",children:[Bt&&(0,se.jsxs)(h.A,{justifyContent:"space-between",width:"100%",children:[(0,se.jsx)(K.A,{tooltip:m("assets.discountFeeTooltip"),children:(0,se.jsx)(pe.A.span,{fontSize:1,children:m("assets.discountFee")})}),"\xa0",(0,se.jsx)(We,{checked:Re,setChecked:Le,feeAmount:xt,utilityToken:mt,isDisabled:Pt||Pe||Oe})]}),(0,se.jsxs)(h.A,{mt:3,justifyContent:"space-between",width:"100%",children:[(0,se.jsx)(K.A,{tooltip:m("assets.priceImpactTooltip"),children:(0,se.jsxs)(pe.A.span,{fontSize:1,children:[m("assets.priceImpact")," "]})}),(0,se.jsx)(pe.A.span,{fontSize:1,color:"success",children:Ot>0?"<".concat(Ot,"%"):"0%"})]}),(0,se.jsxs)(h.A,{mt:3,justifyContent:"space-between",width:"100%",children:[(0,se.jsx)(K.A,{tooltip:m("assets.".concat(Ee===ce.yL.exactIn?"minimumReceived":"maximumPaid"),{slippage:me.tolerance}),children:(0,se.jsx)(pe.A.span,{fontSize:1,children:m("assets.".concat(Ee===ce.yL.exactIn?"minimumReceived":"maximumPaid"),{slippage:me.tolerance})})}),(0,se.jsx)(V.A,{balance:Ee===ce.yL.exactIn?at:rt,symbol:Ee===ce.yL.exactIn?null===ie||void 0===ie?void 0:ie.symbol:null===oe||void 0===oe?void 0:oe.symbol,wrapper:pe.A.span,color:"text",base:4,fontSize:1})]}),(0,se.jsxs)(h.A,{mt:3,justifyContent:"space-between",width:"100%",children:[(0,se.jsx)(K.A,{tooltip:m("assets.transactionFeeTooltip",{swapFee:(0,O.GM)((0,E.A)((0,N.S8)(Ye,null===oe||void 0===oe?void 0:oe.decimals),{maxDecimals:18})),protocolFee:(0,O.GM)((0,E.A)(Re?xt:(0,N.S8)(Je,null===oe||void 0===oe?void 0:oe.decimals),{maxDecimals:18})),swapFeeToken:null===oe||void 0===oe?void 0:oe.symbol,protocolFeeToken:null===(p=Re?mt:oe)||void 0===p?void 0:p.symbol}),children:(0,se.jsxs)(pe.A.span,{fontSize:1,children:[m("assets.transactionFee")," "]})}),(0,se.jsxs)(pe.A.span,{color:"black",fontSize:1,children:[z((0,N.S8)((0,N.lW)(Ye).add(Re?"0":Je),null===oe||void 0===oe?void 0:oe.decimals),{maxDecimals:4,minValue:0}),"\xa0",(null===oe||void 0===oe?void 0:oe.symbol)||"--",Re&&" + ".concat(z(xt,{maxDecimals:5,minValue:0})," ").concat((null===mt||void 0===mt?void 0:mt.symbol)||"--")]})]})]})}),(0,se.jsx)(ke,{isOpen:J,onResolve:()=>jt("resolve"),onReject:()=>jt("reject")}),(0,se.jsx)(he.A,{onClose:Y.close,isOpen:Y.isOpen,onConfirm:()=>{Y.close(),te(!0),yt()},tokenIn:oe,tokenOut:ie})]})},Ke=e=>{let{toggleAdvancedSettings:t,advancedSettingsOpen:n,isHistoryOpened:o,toggleHistoryVisibility:A}=e;const{t:k}=(0,u.B)("swap"),{networkName:f,networkId:y}=(0,l.AE)(),j=(0,i.A)(),w=(0,c.useMemo)((()=>(0,s.Bi)(y)),[y]);return(0,se.jsxs)(p.A,{p:["16px","24px"],borderRadius:1,boxShadow:4,border:"0",display:"flex",flexDirection:"column",width:"100%",height:"fit-content",children:[(0,se.jsxs)(h.A,{alignItems:"center",justifyContent:"space-between",mb:"24px",children:[(0,se.jsxs)(m.A,{as:"h3",fontSize:3,lineHeight:"28px",fontWeight:5,color:"grey",my:0,children:[k("assets.header")," ",(0,se.jsx)(d.A,{name:w?"Polygon":"Ethereum-Logo.wine"})," ",f]}),(0,se.jsxs)(x.A,{children:[(0,se.jsx)(a.A,{placement:"top",message:k("assets.toggleSwapHistory"),children:(0,se.jsx)(v.A,{variant:"plain",mainColor:o?"primary":"grey",onClick:A,height:"28px",children:(0,se.jsx)(d.A,{name:"history"})})}),(0,se.jsx)(a.A,{placement:"top",message:k("assets.toggleSettings"),children:(0,se.jsx)(v.A,{variant:"plain",icon:"Settings",icononly:!0,mainColor:n?"primary":"grey",onClick:t,height:"28px",ml:2})}),w&&(0,se.jsx)(v.A,{variant:"plain",icon:"Help",icononly:!0,mainColor:"grey",height:"28px",ml:2,onClick:j.open})]})]}),(0,se.jsx)(g.$c,{children:(0,se.jsx)(He,{})}),w&&(0,se.jsx)(r.A,{isOpen:j.isOpen,onClose:j.close})]})}},4173:(e,t,n)=>{"use strict";n.d(t,{s:()=>b,C:()=>w});var o=n(70985),i=n(37530),s=n(35779),l=n(77450),a=n(82488),r=n(92109),d=n(87936),c=n(69854),u=n(43337),p=n(61336),h=n(23830),m=n(21870),x=n(96752),v=n(32916),g=n(12225),A=n(27893),k=n(2287);const f=()=>{const{networkId:e}=(0,a.AE)(),t=(0,a.F7)(),n=(0,p.or)(),o=(0,a.Sq)(),{nativeTokens:i,loading:s,refetch:l}=(0,h.A)({skip:!o,variables:{filter:(0,v.Xs)("Token",{isLPT:!1,paused:!1,...(0,v.lA)()}),includePoolTokens:!0},pollInterval:x.a0}),d=(0,r.useMemo)((()=>(e=>(0,g.Bi)(e)?[{userBalances:{usd:0,native:0},...m.L4}]:[{userBalances:{usd:0,native:0},...m.yn}])(e)),[e]),c=(0,k.U4)((0,r.useMemo)((()=>[...i,...d]),[d,i]),(0,r.useMemo)((()=>[(0,k.Ew)(),(0,k.BD)(),(0,k.ZZ)(t),(0,k.ZZ)(null===n||void 0===n?void 0:n.address,"cpkBalance"),(0,k.qX)(t),(0,k.qd)(t),(0,k.jJ)(null===n||void 0===n?void 0:n.address)]),[t,null===n||void 0===n?void 0:n.address]));return{fullTokens:c,reloadTokens:l,loading:!o||s,balancesLoading:(0,A.WQ)(c,t)}};var y=n(24537);const j=(0,r.createContext)({setTokenPair:()=>{},setSwapSettings:()=>{},settings:c.L6,swaps:i._Y,queryParams:{tokenIn:void 0,tokenOut:void 0,amountOut:void 0},fullTokens:[],reloadTokens:async()=>{},loading:!1,balancesLoading:!1,initiated:!1}),w=()=>(0,r.useContext)(j),b=e=>{var t,n;let{children:c}=e;const p=(0,a.F7)(),{fullTokens:h,reloadTokens:m,loading:x,balancesLoading:v}=f(),[g,A]=(0,r.useState)(!1),[k,w]=(0,r.useState)((()=>(0,u.b)())),[b,T]=(0,d.sq)({tokenIn:d.fr,tokenOut:d.fr,amountOut:d.hc}),{tokenIn:S,tokenOut:C}=(0,r.useMemo)((()=>g?{tokenIn:h.find((0,s.Lj)("id",b.tokenIn))||h[0],tokenOut:h.find((0,s.Lj)("id",b.tokenOut))}:{}),[h,g,b.tokenIn,b.tokenOut]),W=(0,o.A)((()=>{var e,t;if(null!==S&&void 0!==S&&null!==(e=S.xToken)&&void 0!==e&&e.id&&null!==C&&void 0!==C&&null!==(t=C.xToken)&&void 0!==t&&t.id)return[S.xToken.id,C.xToken.id].sort()}),[null===S||void 0===S||null===(t=S.xToken)||void 0===t?void 0:t.id,null===C||void 0===C||null===(n=C.xToken)||void 0===n?void 0:n.id]),I=(0,r.useCallback)((e=>{if(!g)return;const t=e.tokenInAddress?h.find((0,s.Lj)("address",e.tokenInAddress)):void 0,n=e.tokenOutAddress?h.find((0,s.Lj)("address",e.tokenOutAddress)):void 0;if(void 0!==t){if(void 0!==n)return void T({tokenIn:t.id,tokenOut:null===n||void 0===n?void 0:n.id});if((0,l.rk)(t)){const e=h.find(l.os);return void T({tokenIn:t.id,tokenOut:null===e||void 0===e?void 0:e.id})}T({tokenIn:t.id,tokenOut:null===C||void 0===C?void 0:C.id})}if(void 0!==n){if((0,l.rk)(n)){const e=h.find(l.os);return void T({tokenIn:null===e||void 0===e?void 0:e.id,tokenOut:n.id})}T({tokenIn:null===S||void 0===S?void 0:S.id,tokenOut:n.id})}}),[h,g,T,null===S||void 0===S?void 0:S.id,null===C||void 0===C?void 0:C.id]),M=(0,i.Ay)((0,r.useMemo)((()=>({tokens:W,userAddress:p,dateFrom:i.iO,limit:3,ignore:!p})),[p,W]));(0,r.useEffect)((()=>{x||v||g||A(!0)}),[v,g,x]);const P=(0,r.useMemo)((()=>({tokenIn:S,tokenOut:C,setTokenPair:I,settings:k,setSwapSettings:w,swaps:M,xTokenPair:W,queryParams:b,fullTokens:h,reloadTokens:async()=>{await m()},loading:x,balancesLoading:v,initiated:g})),[S,C,I,k,M,W,b,h,x,v,g,m]);return(0,y.jsx)(j.Provider,{value:P,children:c})}},45882:(e,t,n)=>{"use strict";n.d(t,{A:()=>ce});var o=n(4155),i=n(37530),s=n(38024),l=n(39318),a=n(84278),r=n(68303),d=n(78500),c=n(92109),u=n(17099),p=n(71168),h=n(25185),m=n(25421),x=n(636),v=n(86668),g=n(15310);const A=new Date,k=[{name:"price",value:1},{name:"price",value:1}];var f=n(50539);var y=n(24537);const j=(0,a.A)(new Date,24),w=e=>{var t,n,o;let{tokenPair:w,tokenIn:b,tokenOut:T,lastSwapId:S}=e;const{data:C,refetch:W}=(0,i.Ay)((0,c.useMemo)((()=>({tokens:w,dateFrom:j})),[w])),I=null===C||void 0===C||null===(t=C.swaps)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;(0,c.useEffect)((()=>{S!==I&&W()}),[I,S,W]);const M=(0,c.useMemo)((()=>{const e=null===C||void 0===C?void 0:C.swaps.filter((e=>(0,r.default)((0,d.A)(e.timestamp),(0,a.A)(A,24)))).map((e=>{var t;return{name:"price",value:(null===b||void 0===b||null===(t=b.xToken)||void 0===t?void 0:t.id)===e.tokenIn?Number(e.tokenAmountOut)/Number(e.tokenAmountIn):Number(e.tokenAmountIn)/Number(e.tokenAmountOut)}})).reverse();return null!==e&&void 0!==e&&e.length?1===(null===e||void 0===e?void 0:e.length)?[e[0],e[0]]:e:k}),[null===C||void 0===C?void 0:C.swaps,null===b||void 0===b||null===(o=b.xToken)||void 0===o?void 0:o.id]),P=(0,c.useMemo)((()=>(0,s.A)(100*(M[M.length-1].value-M[0].value)/M[0].value)),[M]),{stroke:F,fill:B,status:O}=(e=>(0,l.A)(e).lessThan(0).then({stroke:f.Q1.dangerDark,fill:f.Q1.danger,status:"danger"}).isGreaterThan(0).then({stroke:f.Q1.success,fill:f.Q1.successLight2,status:"success"}).else({stroke:f.Q1.warningDark,fill:f.Q1.warning,status:"warning"}))(P);return b&&T?(0,y.jsx)(m.A,{mt:3,p:["16px","24px"],borderRadius:1,boxShadow:4,border:"0",display:"flex",flexDirection:"column",children:(0,y.jsxs)(x.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,y.jsxs)(v.A,{fontSize:1,color:"grey",mr:"auto",children:[(0,y.jsx)(v.A.span,{fontWeight:4,children:" ".concat(null===b||void 0===b?void 0:b.symbol," / ")}),(0,y.jsx)(v.A.span,{fontWeight:4,children:" ".concat(null===T||void 0===T?void 0:T.symbol)})]}),(0,y.jsxs)(x.A,{alignItems:"flex-end",children:[(0,l.A)(P).equals(0).then(null).else((0,y.jsx)(g.A,{name:"PlayArrow",color:O,size:"20px",style:{transform:"rotate(".concat(90*-Math.sign(P),"deg)")}})),(0,y.jsxs)(v.A,{fontSize:1,color:(0,l.A)(P).isGreaterThan(0).then("success").lessThan(0).then("danger").else("warning"),fontWeight:5,mx:2,children:[P,"%"]}),(0,y.jsx)(v.A,{fontSize:1,color:"grey",children:" (24h price)"})]}),M.length&&(0,y.jsxs)(u.Q,{width:132,height:32,data:M,children:[(0,y.jsx)(p.h,{domain:["auto","auto"],width:0}),(0,y.jsx)(h.G,{dataKey:"value",stroke:F,fill:B,baseLine:0})]})]})}):null};var b=n(4173),T=n(71437),S=n(82488),C=n(83843),W=n(1107),I=n(35979),M=n(9336),P=n(37412),F=n(29244),B=n(79367),O=n(77883);const N={lessThanXSeconds:{one:"<1s",other:"<{{count}}s"},xSeconds:{one:"1s",other:"{{count}}s"},halfAMinute:"<1m",lessThanXMinutes:{one:"<1m",other:"<{{count}}m"},xMinutes:{one:"1m",other:"{{count}}m"},aboutXHours:{one:"<1h",other:"<{{count}}h"},xHours:{one:"1h",other:"{{count}}h"},xDays:{one:"1d",other:"{{count}}d"},aboutXWeeks:{one:"<1w",other:"<{{count}}w"},xWeeks:{one:"1w",other:"{{count}}w"},aboutXMonths:{one:"<1m",other:"<{{count}}m"},xMonths:{one:"1m",other:"{{count}}m"},aboutXYears:{one:"<1y",other:"<{{count}}y"},xYears:{one:"1y",other:"{{count}}y"},overXYears:{one:">1y",other:">{{count}}y"},almostXYears:{one:"<1y",other:"<{{count}}y"}};function L(e,t,n){const o=n||{};let i;return i="string"===typeof N[e]?N[e]:1===t?N[e].one:N[e].other.replace("{{count}}",t.toString()),null!==o&&void 0!==o&&o.addSuffix?((null===o||void 0===o?void 0:o.comparison)||0)>0?"in ".concat(i):"".concat(i," ago"):i}const R=(e,t)=>(0,B.A)(e,{...t,locale:{...O.A,formatDistance:L}});var E=n(96921),z=n(63599),D=n(25119),q=n(92421);const U=e=>{let{timestamp:t,fallback:n=null,render:o=(e=>(0,y.jsx)(y.Fragment,{children:e}))}=e;const i=(0,c.useMemo)((()=>t?(0,d.A)(t):null),[t]),[s,a]=(0,c.useState)(i?R(i,{addSuffix:!0}):"");return(0,c.useEffect)((()=>{let e;if(i&&s){const t=(e=>{const t=(0,E.A)(new Date,e);return(0,l.A)(t).lessThan((0,z.A)(1)).then((0,D.A)(1)-t%(0,D.A)(10)+1).lessThan((0,q.A)(1)).then((0,z.A)(1)-t%(0,z.A)(1)+1).lessThan(24*(0,q.A)(1)).then((0,q.A)(1)-t%(0,q.A)(1)+1).else(null)})(i);t&&(e=setTimeout((()=>a(R(i,{addSuffix:!0}))),t))}return()=>clearTimeout(e)}),[i,s]),i&&s?o(s):n||null};var _=n(12361),G=n(70916),X=n(67141),H=n(52007),K=n(17705),V=n(67619),Z=n(63392),$=n(4269),J=n(90479),Q=n(51861);const Y=(0,J.Ay)(Q.A.Outline)(["height:2.5rem;font-size:1rem;padding:",";justify-content:flex-start;border:2px solid ",";"],(e=>{let{theme:t}=e;return"".concat(t.space[2],"px ").concat(t.space[3],"px}")}),(e=>{let{theme:t}=e;return t.colors.primary})),ee=Y;var te=n(34076),ne=n(87585),oe=n(24361);const ie=e=>{let{onClose:t,swap:n}=e;const{addAlert:i}=(0,ne.dh)(),{t:s}=(0,C.B)("swap"),l=(0,H.A)(S.$),a=(0,d.A)(n.timestamp),r=n.id.slice(0,n.id.indexOf("-")),u=(0,c.useCallback)((()=>{navigator.clipboard.writeText(r),i(s("recentSwaps.modal.copiedToClipboard"),{variant:oe.w.success})}),[i,r,s]),[p]=(0,X.A)((async()=>null===l||void 0===l?void 0:l.getTransaction(n.id.slice(0,n.id.indexOf("-")))),null,[l,n.id]);return(0,y.jsx)(Z.A,{isOpen:!0,width:["100%","540px"],onClose:t,title:s("recentSwaps.modal.header"),children:(0,y.jsxs)(o.A,{children:[(0,y.jsx)(o.A,{children:(0,y.jsx)(V.A,{bold:!0,namespace:"swap",label:"recentSwaps.modal.status",content:"Completed",color:"success"})}),(0,y.jsxs)($.A,{gridTemplateColumns:"1fr 1fr",children:[(0,y.jsx)(V.A,{namespace:"swap",label:"recentSwaps.modal.swappedFrom",content:"".concat(n.tokenAmountIn," ").concat(n.tokenInSym)}),(0,y.jsx)(V.A,{namespace:"swap",label:"recentSwaps.modal.swappedTo",content:"".concat(n.tokenAmountOut," ").concat(n.tokenOutSym)}),(0,y.jsx)(V.A,{namespace:"swap",label:"recentSwaps.modal.transactionTime",content:(0,G.default)(a,"hh:mm aa MM/dd/yyyy")}),(0,y.jsx)(V.A,{namespace:"swap",label:"recentSwaps.modal.priceAtTransaction",content:"1 ".concat(n.tokenInSym," = ").concat((0,K.f)(Number(n.tokenAmountOut)/Number(n.tokenAmountIn),{base:6})," ").concat(n.tokenOutSym)})]}),(0,y.jsx)(V.A,{bold:!0,namespace:"swap",label:"recentSwaps.modal.networkConfirmations",content:(null===p||void 0===p?void 0:p.confirmations.toString())||(0,y.jsx)(M.A,{})}),(0,y.jsxs)(o.A,{children:[(0,y.jsx)(V.A,{bold:!0,namespace:"swap",label:"recentSwaps.modal.transactionHash",content:r}),(0,y.jsxs)(o.A,{children:[(0,y.jsx)(Q.A.Text,{fontWeight:4,fontSize:1,mx:0,p:0,minWidth:0,mt:2,height:"fit-content",onClick:u,children:s("recentSwaps.modal.copy")}),(0,y.jsx)(te.A,{type:"tx",hash:r,label:s("recentSwaps.modal.viewOnEtherscan"),fontWeight:4,fontSize:1,color:"primary",hoverColor:"primary",ml:2,inline:!0})]}),(0,y.jsx)(o.A,{children:(0,y.jsx)(ee,{width:"100%",mt:"24px",fontWeight:4,onClick:t,children:s("recentSwaps.modal.close")})})]})]})})},se=(0,J.Ay)(Q.A.Text)(["outline:none;height:32px;"]),le=(0,J.Ay)(o.A)(["display:grid;grid-template-columns:2fr 4fr 0.5fr 4fr 2fr;grid-template-rows:1fr;gap:0px 16px;grid-template-areas:'. . . . .';align-items:center;width:100%;border-bottom:1px solid ",";padding:",";& > span{min-width:0;overflow:hidden;}"],(e=>{let{theme:t}=e;return t.colors["light-gray"]}),(e=>{let{theme:t}=e;return"12px ".concat(t.space[2],"px")})),ae=le,re=e=>{let{swap:t}=e;const[n,o]=(0,c.useState)(!1),i=(0,d.A)(t.timestamp);return(0,y.jsxs)(ae,{children:[(0,y.jsx)(v.A.span,{color:"grey",title:(0,G.default)(i,"hh:mm:ss aa MM/dd/yyyy"),fontSize:1,children:(0,y.jsx)(U,{timestamp:t.timestamp})}),(0,y.jsxs)(v.A.span,{textAlign:"right",pr:2,title:"".concat(t.tokenAmountIn," ").concat((0,F.iz)(t.tokenInSym)),children:[(0,y.jsx)(v.A.span,{color:"black",fontSize:1,children:(0,s.A)(t.tokenAmountIn)}),(0,y.jsx)(v.A.span,{color:"black",fontWeight:"bold",ml:2,fontSize:1,children:(0,F.iz)(t.tokenInSym)})]}),(0,y.jsx)(v.A.span,{textAlign:"center",children:(0,y.jsx)(_.A,{name:"ChevronRight",height:"20px"})}),(0,y.jsxs)(v.A.span,{textAlign:"right",pr:2,title:"".concat(t.tokenAmountOut," ").concat((0,F.iz)(t.tokenOutSym)),children:[(0,y.jsx)(v.A.span,{color:"black",fontSize:1,children:(0,s.A)(t.tokenAmountOut)}),(0,y.jsx)(v.A.span,{color:"black",fontWeight:"bold",ml:2,fontSize:1,children:(0,F.iz)(t.tokenOutSym)})]}),(0,y.jsx)(se,{onClick:()=>o(!0),fontWeight:"normal",fontSize:1,children:"Details"}),n&&(0,y.jsx)(ie,{onClose:()=>o(!1),swap:t})]})},de=e=>{let{tokenPair:t,swaps:n}=e;const{data:i,loading:s,fetchMore:l,hasMore:a}=n,{t:r}=(0,C.B)("swap"),d=(0,S.F7)(),c=(0,S.Sq)(),u=!d,p=!u&&!t,h=s||!c,g=!p&&0===(null===i||void 0===i?void 0:i.swaps.length),A=(0,T.X)({hasMore:a,loadMore:l});return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(m.A,{mt:3,p:["16px","24px"],borderRadius:1,boxShadow:4,border:"0",display:"flex",flexDirection:"column",children:[(0,y.jsxs)(x.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,y.jsx)(W.A,{as:"h3",fontSize:3,lineHeight:"28px",fontWeight:5,color:"grey",m:0,children:r("recentSwaps.header")}),(0,y.jsx)(I.A,{href:P.b.WALLETS,color:"primary",hoverColor:"primary-dark",fontSize:2,fontWeight:2,display:"none",children:r("recentSwaps.viewAllTransactions")})]}),(0,y.jsxs)(o.A,{mt:"28px",children:[u&&!h&&(0,y.jsx)(v.A.span,{color:"grey",fontWeight:3,children:r("recentSwaps.notConnected")}),p&&!h&&(0,y.jsx)(v.A.span,{color:"grey",fontWeight:3,children:r("recentSwaps.noTokenPair")}),g&&!h&&(0,y.jsx)(v.A.span,{color:"grey",fontWeight:3,children:r("recentSwaps.noSwap")}),!g&&(null===i||void 0===i?void 0:i.swaps.map((e=>(0,y.jsx)(re,{swap:e},e.id)))),h&&(0,y.jsx)(x.A,{children:(0,y.jsx)(M.A,{mx:"auto",mt:2})},0),(0,y.jsx)("div",{ref:A})]})]})})},ce=()=>{var e,t,n;const{xTokenPair:i,swaps:s,tokenIn:l,tokenOut:a}=(0,b.C)();return(0,y.jsxs)(o.A,{children:[(0,y.jsx)(w,{tokenPair:i,tokenIn:l,tokenOut:a,lastSwapId:null===s||void 0===s||null===(e=s.data)||void 0===e||null===(t=e.swaps)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id}),(0,y.jsx)(de,{swaps:s,tokenPair:i})]})}},5291:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var o=n(81746),i=n(15627),s=n(90479),l=n(81227),a=n(51861),r=n(24537);const d=(0,s.Ay)(a.A.Text)(["display:inline;margin-right:4px;&:focus{outline:none;}"]),c=s.Ay.div(["box-sizing:border-box;display:inline-flex;position:relative;align-items:center;justify-content:center;padding:0 8px;"]),u=s.Ay.ul(["position:absolute;padding:12px 0;margin:0;top:50%;transform:translateY(-50%);right:0;z-index:",";background-color:",";box-shadow:0px 3px 8px rgba(77,77,77,0.25);border-radius:4px;list-style:none;"],(e=>{let{theme:t}=e;return t.zIndices.threeDotsMenu}),(e=>{let{theme:t}=e;return t.colors.white})),p=e=>{let{children:t}=e;const{ref:n,active:o,toggle:i}=(0,l.A)(),s=e=>{e.stopPropagation(),i()};return(0,r.jsxs)(c,{ref:n,children:[(0,r.jsx)(d,{icononly:!0,icon:"MoreVert",boxShadow:"none",minWidth:"0",size:"small",height:"1rem",onClick:s}),o&&(0,r.jsx)(u,{onClick:s,children:t})]})};var h=n(15310),m=n(86668),x=n(89889);const v=(0,s.Ay)(x.A)(["padding:4px 12px;display:flex;flex-direction:row;align-items:center;justify-items:center;white-space:nowrap;&:hover{cursor:pointer;background-color:",";}"],(e=>{let{theme:t}=e;return t.colors["primary-light"]})),g=e=>{let{label:t,icon:n,color:o,onClick:i}=e;return(0,r.jsx)("li",{children:(0,r.jsxs)(v,{onClick:i,children:[n&&(0,r.jsx)(h.A,{name:n,color:null!==o&&void 0!==o?o:"black",mr:"6px",size:"13px"}),t&&(0,r.jsx)(m.A.span,{color:null!==o&&void 0!==o?o:"black",children:t})]})})};var A=n(87585),k=n(24361),f=n(39318),y=n(63392),j=n(83843),w=n(4155);const b=e=>{let{isOpen:t,name:n,closeModal:o,disableAction:i}=e;const{t:s}=(0,j.B)("wallets");return(0,r.jsxs)(y.A,{isOpen:t,onClose:o,title:s("assetTokens.confirmDisable",{token:n}),maxWidth:"460px",children:[(0,r.jsx)(m.A,{color:"grey",fontWeight:3,children:s("assetTokens.disableWarning")}),(0,r.jsxs)(w.A,{mt:"24px",children:[(0,r.jsx)(a.A.Outline,{mr:3,onClick:o,children:"Back"}),(0,r.jsx)(a.A,{onClick:i,children:"Confirm"})]})]})},T=e=>{let{symbol:t,name:n,allowanceStatus:s,enable:l,disable:a,setIsPerformingAnAction:d}=e;const{addAlert:c,addError:u}=(0,A.dh)(),[h,x]=(0,o.A)(!1),v=e=>{null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||e.preventDefault(),x(!1)},y=async e=>{d(!0);try{const o=await e();await o.wait();const l="".concat(t," (").concat(n,") is ").concat(s===i.hH.NOT_ALLOWED?"enabled":"locked");c(l,{variant:k.w.success})}catch(o){v(),u(o)}finally{v(),d(!1)}},j={isOpen:h,name:n,closeModal:v,disableAction:()=>y(a)};return(0,f.A)(s).equals(i.hH.NOT_ALLOWED).then((0,r.jsx)(p,{children:(0,r.jsx)(g,{label:"Enable",color:"primary",icon:"LockOpen",onClick:e=>{e.stopPropagation(),y(l)}})})).on((e=>[i.hH.INFINITE,i.hH.LIMITED].includes(e))).then((0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{children:(0,r.jsx)(g,{label:"Disable",color:"danger",icon:"RemoveCircleOutline",onClick:e=>{e.stopPropagation(),e.preventDefault(),x(!0)}})}),(0,r.jsx)(b,{...j})]})).else((0,r.jsx)(m.A,{mr:"47px"}))}},29277:(e,t,n)=>{"use strict";n.d(t,{A:()=>se});var o=n(75904),i=n(16823),s=n(1641),l=n(66790),a=n(27893),r=n(82488),d=n(42615),c=n(50813),u=n(60581),p=n(67122),h=n(67922),m=n(63668),x=n(92109),v=n(83843),g=n(86668),A=n(4155),k=n(636),f=n(38202),y=n(27226),j=n(24537);const w=()=>{const{t:e}=(0,v.B)("wallets");return(0,j.jsx)(y.A,{columns:[{id:"asset",label:e("assetTokens.asset"),width:"40%"},{id:"native",label:e("assetTokens.native"),justify:"flex-end",width:"15%"},{id:"actions",justify:"flex-end",width:"30%"}]})};var b=n(17240),T=n(62322),S=n(15627),C=n(3421),W=n(77450),I=n(79474),M=n(28363),P=n(2409),F=n(76369),B=n(96326),O=n(59838),N=n(88682),L=n(97266),R=n(21870);const E=[1,5],z=["dai","usdc","weth","wbtc","smt","bnb","link","uni","sand","mana","grt","aave","sushi","yearn","1inch"];var D=n(446),q=n(17689),U=n(12361),_=n(88016),G=n.n(_),X=n(9336),H=n(51861),K=n(5291);const V=e=>{let{id:t,symbol:n,name:o,allowanceStatus:i,enable:s,disable:l,isPerformingAnAction:a,setIsPerformingAnAction:d}=e;const{t:c}=(0,v.B)("wallets"),[u,p]=(0,x.useState)(G()(i)),h=(0,r.Op)();return(0,x.useEffect)((()=>{G()(i)||p(!1)}),[i]),u||a?(0,j.jsx)(X.A,{m:"auto"}):(0,W.rk)({id:t})?(0,j.jsx)(D.W,{pathname:"/swap",queryParams:{tokenIn:t},children:(0,j.jsxs)(H.A,{height:"28px",px:2,children:[(0,j.jsx)(N.A,{size:"18px",mr:1})," ",c("assetTokens.actions.wrap")]})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(q.A,{name:L.A.swapService,children:[(0,j.jsx)(D.W,{pathname:"/swap",queryParams:{tokenIn:t},children:(0,j.jsxs)(H.A,{height:"28px",px:2,children:[(0,j.jsx)(N.A,{size:"18px",mr:1})," ",c("assetTokens.actions.swap")]})})," "]}),(0,j.jsx)(q.A,{name:L.A.allPools,children:(0,j.jsx)(D.W,{pathname:"/pools/all",queryParams:{assets:t},children:(0,j.jsxs)(H.A,{height:"28px",px:2,ml:3,children:[(0,j.jsx)(g.A.span,{mr:1,lineHeight:"20px",children:(0,j.jsx)(U.A,{name:"Pool",height:"18px",width:"18px"})}),(0,j.jsx)(g.A.span,{fontWeight:3,lineHeight:"20px",children:c("assetTokens.actions.pool")})]})})}),E.includes(h)&&z.includes(n.toLocaleLowerCase())&&(0,j.jsxs)(H.A,{height:"28px",px:2,ml:3,onClick:()=>{window.open(R.wh.polygon.url,"_blank")},children:[(0,j.jsx)(g.A.span,{fontWeight:3,lineHeight:"20px",children:c("assetTokens.actions.bridge")}),(0,j.jsx)(g.A.span,{ml:1,pt:"2px",lineHeight:"16px",children:(0,j.jsx)(U.A,{name:"PolygonIcon",height:"16px",width:"16px"})})]}),(0,j.jsx)(K.A,{symbol:n,name:o,allowanceStatus:i,enable:s,disable:l,setIsPerformingAnAction:d})]})},Z=(0,x.memo)(V);var $=n(67141),J=n(81746),Q=n(18301),Y=n(87585);const ee=e=>{let{contract:t,userAddress:n}=e;const{t:o}=(0,v.B)("wallets"),{addError:i}=(0,Y.dh)(),[s,l]=(0,J.A)(!1),{showFireworks:a}=(0,Q.Ee)(),[r]=(0,$.A)((async()=>n&&t?t.getClaimableAmount(n):0),0,[t,n]),d=(0,x.useCallback)((async()=>{if(t&&n&&r)try{l(!0),await t.claimMaximumAmount(n),a(5e3)}catch(e){i(e)}finally{l(!1)}}),[t,n,r,l,i,a]);return s?(0,j.jsx)(X.A,{m:"auto"}):(0,j.jsxs)(H.A,{height:"28px",px:2,ml:3,onClick:d,disabled:0===r||s,children:[(0,j.jsx)(g.A.span,{mr:"5px",lineHeight:"20px",children:(0,j.jsx)(U.A,{name:"Unwrap",height:"12px",width:"12px"})}),(0,j.jsxs)(g.A.span,{fontWeight:3,lineHeight:"20px",children:[o("assetTokens.actions.unwrap")," (",r,")"]})]})},te=e=>{let{tokenToRender:t,rowIndex:n,disableActions:i=!1,selectedAccount:s}=e;const{t:l}=(0,v.B)("wallets"),{highlighted:a}=(0,d.W)(n),[r,c]=(0,x.useState)(!1),[u,p]=(0,x.useState)(!1),{name:h,symbol:f,userBalances:y,exchangeRate:w,allowanceStatus:N,cpkAllowance:L,id:R,pooledTokenBalance:E,usdPooledTokenBalance:z,...D}=(0,C.qO)(t),q=(0,x.useMemo)((()=>(0,W.rk)({id:R})),[R]),U={allowanceStatus:N,name:h,symbol:f,...D,id:R};return(0,j.jsxs)(M.A,{rowIndex:n,children:[(0,j.jsx)("td",{children:(0,j.jsxs)(k.A,{ml:2,alignItems:"center",onClick:()=>{c((e=>!e))},children:[(0,j.jsx)(O.A,{symbol:f,name:h,width:"32px",height:"32px",mr:"10px"}),(0,j.jsxs)(A.A,{flexGrow:"1",children:[(0,j.jsx)(g.A.span,{fontSize:2,fontWeight:5,children:f}),(0,j.jsx)(g.A.span,{fontSize:2,fontWeight:2,ml:"8px",children:h}),(0,j.jsx)(g.A.span,{ml:1,children:(0,j.jsx)(P.A,{allowanceStatus:!(0,W.$W)({id:R})&&(0,W.GP)({id:R})?N:S.hH.NOT_AVAILABLE})}),a&&!q&&(0,j.jsx)(F.A,{token:t,ml:4})]}),(0,j.jsx)(A.A,{display:["block","none"],children:r?(0,j.jsx)(b.A,{color:"near-black"}):(0,j.jsx)(o.A,{color:"near-black"})})]})}),(0,j.jsxs)(I.A,{expanded:r,children:[(0,j.jsxs)(k.A,{alignItems:"center",justifyContent:"flex-start",display:["flex","none"],children:[(0,j.jsx)(g.A,{fontSize:1,fontWeight:4,color:"grey",children:l("assetTokens.native")}),(0,j.jsx)(m.A,{placement:"top",message:l("assetTokens.native"),children:(0,j.jsx)(T.A,{size:"15",ml:2,color:"grey"})})]}),(0,j.jsx)(k.A,{alignItems:"center",justifyContent:["flex-start","flex-end"],mt:[1,0],children:(0,j.jsxs)(k.A,{flexDirection:["center","column"],alignItems:["center","flex-end"],justifyContent:"flex-start",width:["100%","fit-content"],children:[(0,j.jsx)(B.A,{tokenAddress:R,account:null===s||void 0===s?void 0:s.address,symbol:f,wrapper:g.A,fontSize:2,fontWeight:2,color:["near-black","black"],textAlign:"right"}),!(0,W.$W)({id:R})&&(0,j.jsx)(B.A,{tokenAddress:null===t||void 0===t?void 0:t.id,account:null===s||void 0===s?void 0:s.address,symbol:"USD",usd:!0,wrapper:g.A,fontSize:[2,0],fontWeight:3,color:"grey",textAlign:"right",ml:[2,0]})]})})]}),(0,j.jsx)(I.A,{expanded:r,hide:!a&&!u,children:(0,j.jsx)(k.A,{alignItems:"center",justifyContent:["flex-start","flex-end"],children:(0,W.$W)({id:R})?(0,j.jsx)(ee,{contract:t.contract}):!i&&(0,j.jsx)(Z,{...U,isPerformingAnAction:u,setIsPerformingAnAction:p})})})]})};var ne=n(3753),oe=n(95040);const{getCrypto:ie}=i.Ay.resources.docs.gettingStarted,se=e=>{const{selectedAccount:t,userUsdBalance:n,hideSmallBalances:i,assetTokens:y,assetTokensLoading:b,assetTokensError:T}=(0,f.b)(),{t:S}=(0,v.B)("wallets"),C=(0,r.F7)(),W=(0,r.Sq)(),I=(0,s.A)(t),{networkName:M}=(0,r.AE)(),[P,F]=(0,x.useState)(3),B=(0,a.WQ)(y,C),O=(0,x.useMemo)((()=>((e,t)=>null===e||void 0===e?void 0:e.filter((e=>{let{id:n,balance:o,fullUsdBalance:i}=e;return!t||((0,r.af)(n,ne.LJ.id)?null===o||void 0===o?void 0:o.gt(0):null===i||void 0===i?void 0:i.gte(10))})).sort((0,oe.L)(["fullUsdBalance","desc"],"symbol","name")))(y,i)),[y,i]),N=!C,L=b||!W||B,R=!!T.length,E=!R&&!O.length;return(0,j.jsx)(u.A,{title:S("assetTokens.header",{network:M}),badge:(0,j.jsxs)(g.A,{fontWeight:5,color:"grey",fontSize:2,display:["block","none"],children:[(0,l.GM)(n.nativeTokens)," USD"]}),...e,children:(0,j.jsxs)(A.A,{mt:[3,"24px"],children:[(0,j.jsxs)(p.A,{children:[(0,j.jsx)(w,{}),(0,j.jsxs)("tbody",{children:[(0,j.jsxs)(h.A,{show:!L&&E,loading:L&&E,error:N&&S("queryStatuses.noAccount")||R&&S("queryStatuses.error"),children:[S("queryStatuses.noResults"),(0,j.jsx)(c.A,{href:ie,title:S("queryStatuses.getCrypto"),children:S("queryStatuses.getCrypto")})]}),(0,j.jsx)(d.i,{children:!N&&O.slice(0,P).map(((e,n)=>{let{balance:o,...i}=e;return(0,j.jsx)(te,{rowIndex:n,tokenToRender:i,disableActions:!(0,r.af)(C,t),selectedAccount:I},i.id)}))})]})]}),!N&&O.length>P&&(0,j.jsx)(k.A,{alignItems:"center",justifyContent:"center",mt:3,children:(0,j.jsx)(m.A,{placement:"top",message:"Load more",children:(0,j.jsx)(o.A,{onClick:e=>{e.stopPropagation(),F((e=>e+3))},cursor:"pointer",color:"near-black"})})})]})})}},57437:(e,t,n)=>{"use strict";n.d(t,{A:()=>H});var o=n(75904),i=n(16823),s=n(1641),l=n(27893),a=n(82488),r=n(42615),d=n(50813),c=n(60581),u=n(67122),p=n(67922),h=n(63668),m=n(92109),x=n(83843),v=n(4155),g=n(636),A=n(18187),k=n(38202),f=n(17240),y=n(62322),j=n(79474),w=n(28363),b=n(2409),T=n(76369),S=n(12361),C=n(96326),W=n(59838),I=n(86668),M=n(88682),P=n(97266),F=n(446),B=n(17689),O=n(88016),N=n.n(O),L=n(9336),R=n(51861),E=n(5291),z=n(24537);const D=e=>{let{symbol:t,name:n,enable:o,disable:i,allowanceStatus:s,id:l,onRedeemClick:a,isPerformingAnAction:r,setIsPerformingAnAction:d,isRedeemDisabled:c=!1}=e;const{t:u}=(0,x.B)("common"),[p,h]=(0,m.useState)(N()(s));return(0,m.useEffect)((()=>{N()(s)||h(!1)}),[s]),p||r?(0,z.jsx)(L.A,{m:"auto"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(B.A,{name:P.A.swapService,children:(0,z.jsx)(F.W,{pathname:"/swap",queryParams:{tokenIn:l},children:(0,z.jsxs)(R.A,{height:"28px",px:2,children:[(0,z.jsx)(M.A,{size:"18px",mr:1})," ",u("token.swap")]})})}),(0,z.jsxs)(B.A,{name:P.A.allPools,children:[(0,z.jsx)(F.W,{pathname:"/pools/all",queryParams:{assets:l},children:(0,z.jsxs)(R.A,{height:"28px",px:2,ml:1,children:[(0,z.jsx)(I.A.span,{mr:1,lineHeight:"20px",children:(0,z.jsx)(S.A,{name:"Pool",height:"18px",width:"18px"})}),(0,z.jsx)(I.A.span,{fontWeight:3,lineHeight:"20px",children:u("token.pool")})]})})," "]}),(0,z.jsx)(g.A,{justifyContent:"center",alignItems:"center",children:(0,z.jsxs)(R.A,{height:"28px",px:2,ml:1,alignItems:"center",onClick:a,disabled:c,children:[(0,z.jsx)(S.A,{name:"RedeemIcon",height:"18px",width:"18px",fill:"white"}),(0,z.jsx)(I.A.span,{fontWeight:3,lineHeight:"20px",fontSize:1,ml:1,children:u("common:token.redeem")})]})}),(0,z.jsx)(E.A,{symbol:t,name:n,enable:o,disable:i,allowanceStatus:s,setIsPerformingAnAction:d})]})},q=(0,m.memo)(D),U=e=>{let{tokenToRender:t,rowIndex:n,disableActions:i=!1,selectedAccount:s,onRedeemClick:l}=e;const{t:a}=(0,x.B)("wallets"),{highlighted:d}=(0,r.W)(n),[c,u]=(0,m.useState)(!1),[p,A]=(0,m.useState)(!1),{name:k,symbol:M,userBalances:P,balance:F,xToken:B,exchangeRate:O,allowanceStatus:N,cpkAllowance:L,id:R,pooledTokenBalance:E,usdPooledTokenBalance:D,kyaInformation:U,..._}=t,G={allowanceStatus:N,name:k,symbol:M,..._,id:R},X=(0,m.useCallback)((()=>null===l||void 0===l?void 0:l(t)),[l,t]);return(0,z.jsxs)(w.A,{rowIndex:n,children:[(0,z.jsx)("td",{children:(0,z.jsxs)(g.A,{ml:2,alignItems:"center",onClick:()=>{u((e=>!e))},children:[null!==U&&void 0!==U&&U.image?(0,z.jsx)(S.A,{name:null===U||void 0===U?void 0:U.image,width:"32px",height:"32px",title:k,external:!0}):(0,z.jsx)(W.A,{symbol:M,name:k,width:"32px",height:"32px"}),(0,z.jsxs)(v.A,{flexGrow:"1",ml:"10px",children:[(0,z.jsx)(I.A.span,{fontSize:2,fontWeight:5,children:M}),(0,z.jsx)(I.A.span,{fontSize:2,fontWeight:2,ml:"8px",children:k}),(0,z.jsx)(I.A.span,{ml:1,children:(0,z.jsx)(b.A,{allowanceStatus:N})}),d&&(0,z.jsx)(T.A,{token:t,ml:3})]}),(0,z.jsx)(v.A,{display:["block","none"],children:c?(0,z.jsx)(f.A,{color:"near-black"}):(0,z.jsx)(o.A,{color:"near-black"})})]})}),(0,z.jsxs)(j.A,{expanded:c,children:[(0,z.jsxs)(g.A,{alignItems:"center",justifyContent:"flex-start",display:["flex","none"],children:[(0,z.jsx)(I.A,{fontSize:1,fontWeight:4,color:"grey",children:a("brandTokens.native")}),(0,z.jsx)(h.A,{placement:"top",message:a("brandTokens.native"),children:(0,z.jsx)(y.A,{size:"15",ml:2,color:"grey"})})]}),(0,z.jsx)(g.A,{alignItems:"center",justifyContent:["flex-start","flex-end"],mt:[1,0],children:(0,z.jsxs)(g.A,{flexDirection:["center","column"],alignItems:["center","flex-end"],justifyContent:"flex-start",width:["100%","fit-content"],children:[(0,z.jsx)(C.A,{tokenAddress:R,account:null===s||void 0===s?void 0:s.address,symbol:M,wrapper:I.A,fontSize:2,fontWeight:2,color:["near-black","black"],textAlign:"right"}),(0,z.jsx)(C.A,{tokenAddress:null===t||void 0===t?void 0:t.id,account:null===s||void 0===s?void 0:s.address,symbol:"USD",usd:!0,base:0,wrapper:I.A,fontSize:[2,0],fontWeight:3,color:"grey",textAlign:"right",ml:[2,0]})]})})]}),(0,z.jsx)(j.A,{expanded:c,hide:!d&&!p,children:(0,z.jsx)(g.A,{alignItems:"center",justifyContent:["flex-start","flex-end"],children:!i&&(0,z.jsx)(q,{...G,onRedeemClick:X,isPerformingAnAction:p,setIsPerformingAnAction:A,isRedeemDisabled:void 0===F})})})]})};var _=n(27226);const G=()=>{const{t:e}=(0,x.B)("wallets");return(0,z.jsx)(_.A,{columns:[{id:"asset",label:e("brandTokens.asset"),width:"40%"},{id:"native",label:e("brandTokens.native"),justify:"flex-end",width:"25%"},{id:"actions",justify:"flex-end",width:"35%"}]})},{getCrypto:X}=i.Ay.resources.docs.gettingStarted,H=e=>{const{t:t}=(0,x.B)("wallets"),n=(0,a.F7)(),i=(0,a.Sq)(),{selectedAccount:f,brandTokens:y,investAssetsLoading:j,investAssetsError:w}=(0,k.b)(),b=(0,s.A)(f),{networkName:T}=(0,a.AE)(),[S,C]=(0,m.useState)(3),W=(0,l.WQ)(y,n),I=!n,M=j||!i||W,P=!!w,F=!P&&!y.length,B=(0,A.yF)();return F?null:(0,z.jsx)(c.A,{title:t("brandTokens.header",{brand:B,network:T}),...e,children:(0,z.jsxs)(v.A,{mt:[3,"24px"],children:[(0,z.jsxs)(u.A,{children:[(0,z.jsx)(G,{}),(0,z.jsxs)("tbody",{children:[(0,z.jsxs)(p.A,{span:5,show:!M&&F,loading:M&&F,error:I&&t("queryStatuses.noAccount")||P&&t("queryStatuses.error"),children:[t("queryStatuses.noResults"),(0,z.jsx)(d.A,{href:X,title:t("queryStatuses.getCrypto"),children:t("queryStatuses.getCrypto")})]}),(0,z.jsx)(r.i,{children:!I&&y.slice(0,S).map(((e,t)=>(0,z.jsx)(U,{rowIndex:t,tokenToRender:e,selectedAccount:b},e.id)))})]})]}),y.length>S&&(0,z.jsx)(g.A,{alignItems:"center",justifyContent:"center",mt:3,children:(0,z.jsx)(h.A,{placement:"top",message:"Load more",children:(0,z.jsx)(o.A,{onClick:e=>{e.stopPropagation(),C((e=>e+3))},cursor:"pointer",color:"near-black"})})})]})})}},80118:(e,t,n)=>{"use strict";n.d(t,{A:()=>Q});var o=n(75904),i=n(61336),s=n(97266),l=n(1641),a=n(66790),r=n(17705),d=n(82488),c=n(42615),u=n(50813),p=n(60581),h=n(67122),m=n(67922),x=n(63668),v=n(17689),g=n(92109),A=n(83843),k=n(86668),f=n(4155),y=n(636),j=n(38202),w=n(1500),b=n(86807),T=n(41681),S=n(8074),C=n(983),W=n(92859),I=n(79135),M=n(21870),P=n(53840),F=n(40040),B=n(6162),O=n(37575),N=n(98225),L=n(41128);const R=e=>{let{cpkAddress:t,search:n="",filter:o}=e;const s=(0,i.or)(),l=t||(null===s||void 0===s?void 0:s.address),{data:a,loading:r,error:d}=(0,w.I)(I.Tn,{variables:{filter:(0,L.g)()},fetchPolicy:"no-cache",pollInterval:M.a0}),c=(0,g.useMemo)((()=>!r&&null!==a&&void 0!==a&&a.pools?null===a||void 0===a?void 0:a.pools.map((e=>e.id)):[]),[null===a||void 0===a?void 0:a.pools,r]),{allTokens:u,tokenAddrs:p,loading:h,error:m,refetch:x}=(0,b.A)(I.JL,{skip:r,variables:{filter:c.length?{token_in:c}:{}}}),v=(0,T.A)((0,g.useMemo)((()=>({tokens:e=>(0,O.z)(e.tokens.map((e=>{var t,n;return{...e,address:(null===(t=e.xToken)||void 0===t?void 0:t.token.id)||e.address,id:(null===(n=e.xToken)||void 0===n?void 0:n.token.id)||e.address}})).map((e=>(0,C.A)(0)(e).pipe((0,N.T)((t=>({...e,exchangeRate:t||0})))))))})),[]),(0,g.useMemo)((()=>((null===a||void 0===a?void 0:a.pools)||[]).map((e=>({...e,decimals:M.Fx})))),[null===a||void 0===a?void 0:a.pools])),A=(0,T.A)((0,g.useMemo)((()=>({userBalances:e=>(0,W.A)(l)(e).pipe((0,N.T)((t=>({ether:(null===t||void 0===t?void 0:t.toNumber())||0,usd:(null===t||void 0===t?void 0:t.times((null===e||void 0===e?void 0:e.exchangeRate)||0).toNumber())||0,loading:null===t||"undefined"===typeof t&&!!l})))),contract:(0,S.A)()})),[l]),(0,g.useMemo)((()=>u.map((e=>{const t=v.find((0,F.Lj)("id",e.token.id));return{...e,isAnyPoolAssetPaused:null===t||void 0===t?void 0:t.tokens.some((e=>{var t;return!(null===e||void 0===e||null===(t=e.xToken)||void 0===t||!t.paused)})),tokens:(null===t||void 0===t?void 0:t.tokens)||[],exchangeRate:t?(0,P.Gs)(t):0,userBalances:{ether:0,usd:0,loading:!!l}}}))),[v,u,l])),k=A.some((e=>e.userBalances.loading)),f=(0,g.useMemo)((()=>A.filter((0,B.Ah)(n,o))),[A,o,n]),y={loading:r||h||k,errors:[d,m].filter((e=>e)),refetch:x};return{allTokens:A,tokens:f,tokenAddrs:p,...y}};var E=n(37412),z=n(27226),D=n(18187),q=n(24537);const U=()=>{const{t:e}=(0,A.B)("wallets");return(0,q.jsx)(z.A,{columns:[{id:"asset",label:e("poolTokens.asset"),width:"55%"},{id:"pooled",label:e("poolTokens.pooled",{brand:(0,D.yF)()}),justify:"flex-end",width:"15%"},{id:"actions",justify:"flex-end",width:"30%"}]})};var _=n(17240),G=n(62322),X=n(79474),H=n(28363),K=n(59838),V=n(71310),Z=n(51861),$=n(14623);const J=e=>{let{tokenToRender:t,rowIndex:n,reload:i}=e;const{name:l,symbol:r,userBalances:d,token:u,paused:p}=t,{highlighted:h}=(0,c.W)(n),[m,j]=(0,g.useState)(!1),{t:w}=(0,A.B)("wallets"),b=(0,V.W6)(),[T,S]=(0,g.useState)("");return(0,q.jsxs)(H.A,{rowIndex:n,onClick:()=>b.push("/pool/".concat(u.id)),children:[(0,q.jsx)("td",{children:(0,q.jsxs)(y.A,{ml:2,alignItems:"center",children:[(0,q.jsx)(K.A,{symbol:r,name:l,width:"32px",height:"32px"}),(0,q.jsxs)(f.A,{flexGrow:"1",children:[(0,q.jsx)(k.A.span,{fontSize:2,fontWeight:5,ml:"10px",children:r}),(0,q.jsx)(k.A.span,{fontSize:2,fontWeight:2,ml:"8px",children:l})]}),(0,q.jsx)(f.A,{display:["block","none"],onClick:e=>{e.stopPropagation(),j((e=>!e))},children:m?(0,q.jsx)(_.A,{color:"near-black"}):(0,q.jsx)(o.A,{color:"near-black"})})]})}),(0,q.jsxs)(X.A,{expanded:m,children:[(0,q.jsxs)(y.A,{alignItems:"center",justifyContent:"flex-start",display:["flex","none"],children:[(0,q.jsx)(k.A,{fontSize:1,fontWeight:4,color:"grey",children:w("poolTokens.pooled")}),(0,q.jsx)(x.A,{placement:"top",message:w("poolTokens.pooled"),children:(0,q.jsx)(G.A,{size:"15",ml:2,color:"grey"})})]}),(0,q.jsx)(y.A,{alignItems:"center",justifyContent:["flex-start","flex-end"],mt:[1,0],children:(0,q.jsxs)(y.A,{flexDirection:["center","column"],alignItems:["center","flex-end"],justifyContent:"flex-start",width:["100%","fit-content"],children:[(0,q.jsxs)(k.A,{fontSize:2,fontWeight:2,color:["near-black","black"],textAlign:"right",children:[(0,a.GM)(d.ether)," ",r]}),(0,q.jsxs)(k.A,{fontSize:[2,0],fontWeight:3,color:"grey",textAlign:"right",ml:[2,0],children:[(0,a.GM)(d.usd,0)," USD"]})]})})]}),!p&&(0,q.jsx)(X.A,{expanded:m,hide:!h,children:(0,q.jsxs)(y.A,{alignItems:"center",justifyContent:["flex-start","flex-end"],children:[(0,q.jsx)(v.A,{name:s.A.addLiqudity,children:!t.isAnyPoolAssetPaused&&(0,q.jsx)(Z.A,{height:"28px",px:2,onClick:e=>{e.stopPropagation(),S("add")},children:w("poolTokens.actions.addLiquidity")})}),(0,q.jsx)(Z.A,{height:"28px",px:2,ml:3,onClick:e=>{e.stopPropagation(),S("remove")},children:w("poolTokens.actions.removeLiquidity")})]})}),(0,q.jsx)($.A,{pool:u.id,openModal:T,onClose:()=>S(""),reload:i})]})},Q=e=>{const{selectedAccount:t,userUsdBalance:n,setPoolTokensBalance:w}=(0,j.b)(),{t:b}=(0,A.B)("wallets"),T=(0,d.F7)(),S=(0,i.or)(),C=(0,d.Sq)(),W=(0,l.A)(t),{networkName:I}=(0,d.AE)(),{allTokens:M,errors:P,loading:F,refetch:B}=R({cpkAddress:null===W||void 0===W?void 0:W.cpkAddress}),[O,N]=(0,g.useState)(3),L=(0,g.useMemo)((()=>F||!!T&&!(null!==S&&void 0!==S&&S.address)),[T,F,null===S||void 0===S?void 0:S.address]),z=M.some((e=>e.userBalances.loading)),D=(0,g.useMemo)((()=>M.filter((e=>{let{userBalances:t}=e;return t.ether})).sort(((e,t)=>t.userBalances.usd-e.userBalances.usd))),[M]);(0,g.useEffect)((()=>{const e=D.reduce(((e,t)=>{let{userBalances:n}=t;return e+n.usd}),0);w((0,r.f)(e))}),[D,w]);const _=!T,G=!C||L||z,X=!!P.length,H=!X&&!D.length;return(0,q.jsx)(p.A,{title:b("poolTokens.header",{network:I}),badge:(0,q.jsxs)(k.A,{fontWeight:5,color:"grey",fontSize:2,display:["block","none"],children:[(0,a.GM)(n.poolTokens)," USD"]}),...e,children:(0,q.jsxs)(f.A,{mt:[3,"24px"],children:[(0,q.jsxs)(h.A,{children:[(0,q.jsx)(U,{}),(0,q.jsxs)("tbody",{children:[(0,q.jsx)(m.A,{show:!G&&H,loading:G&&H,error:_&&b("queryStatuses.noAccount")||X&&b("queryStatuses.error"),children:(0,q.jsxs)(q.Fragment,{children:[b("poolTokens.noPools"),(0,q.jsxs)(v.A,{name:s.A.addLiqudity,children:[(0,q.jsx)(u.A,{internal:!0,href:E.b.POOLS,title:b("poolTokens.actions.addLiquidity"),target:"_self",children:b("poolTokens.actions.addLiquidity")}),b("poolTokens.getStarted")]})]})}),(0,q.jsx)(c.i,{children:D.slice(0,O).map(((e,t)=>(0,q.jsx)(J,{tokenToRender:e,rowIndex:t,reload:B},e.id)))})]})]}),D.length>O&&(0,q.jsx)(y.A,{alignItems:"center",justifyContent:"center",mt:3,children:(0,q.jsx)(x.A,{placement:"top",message:"Load more",children:(0,q.jsx)(o.A,{onClick:e=>{e.stopPropagation(),N((e=>e+3))},cursor:"pointer",color:"near-black"})})})]})})}},56615:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var o=n(16823),i=n(61336),s=n(1641),l=n(58768),a=n(75223),r=n(66790),d=n(82488),c=n(50813),u=n(60581),p=n(67122),h=n(67922),m=n(31466),x=n(63668),v=n(7329),g=n(34076),A=n(87585),k=n(24361),f=n(59838),y=n(92109),j=n(83843),w=n(86668),b=n(4155),T=n(636),S=n(38202),C=n(27226),W=n(81087),I=n(24537);const M=()=>{const{t:e}=(0,j.B)("wallets");return(0,I.jsx)(C.A,{columns:[{id:"assets",label:e("proxyTokens.assets"),width:"55%"},{id:"balance",label:(0,I.jsx)(W.A,{tooltip:e("proxyTokens.tooltip"),children:e("proxyTokens.balance")}),justify:"flex-end",width:"15%"},{id:"actions",justify:"flex-end",width:"30%"}]})};var P=n(86807),F=n(41681),B=n(983),O=n(92859),N=n(79135),L=n(32916),R=n(76958),E=n(2738),z=n(37575),D=n(98225);const q=e=>{const{allTokens:t,loading:n,error:o}=(0,P.A)(N.c1,{variables:{filter:(0,L.Xs)("XToken",{isLPT:!1,paused:!1})}}),i=(0,F.A)((0,y.useMemo)((()=>({cpkTokenBalance:t=>e&&t?(0,O.A)(e)(t):(0,E.of)(R.f2),cpkTokenUsdBalance:t=>(0,z.z)([e&&t?(0,O.A)(e)(t):(0,E.of)(R.f2),(0,B.A)(0)(t)]).pipe((0,D.T)((e=>{let[t,n]=e;return(null===t||void 0===t?void 0:t.times(n||0).toNumber())||0}))),cpkXTokenBalance:t=>e&&t.xToken?(0,O.A)(e)(t.xToken):(0,E.of)(R.f2),cpkXTokenUsdBalance:t=>(0,z.z)([e&&t.xToken?(0,O.A)(e)(t.xToken):(0,E.of)(R.f2),(0,B.A)(0)(t)]).pipe((0,D.T)((e=>{let[t,n]=e;return(null===t||void 0===t?void 0:t.times(n||0).toNumber())||0})))})),[e]),(0,y.useMemo)((()=>t.map((e=>({...e,cpkTokenBalance:void 0,cpkTokenUsdBalance:0,cpkXTokenBalance:void 0,cpkXTokenUsdBalance:0})))),[t]));return{tokens:(0,y.useMemo)((()=>null===i||void 0===i?void 0:i.filter((e=>{let{cpkXTokenBalance:t,cpkTokenBalance:n}=e;return t&&t.gt(0)||n&&n.gt(0)}))),[i]),loading:n||i.some((t=>null===t.cpkXTokenBalance||"undefined"===typeof t.cpkXTokenBalance&&e)),error:o}},{gettingStarted:{proxyTokensExplanation:U}}=o.Ay.resources.docs,_=e=>{const{selectedAccount:t}=(0,S.b)(),{t:n}=(0,j.B)("wallets"),{addAlert:o,addError:C}=(0,A.dh)(),{track:W}=(0,l.A)(),P=(0,d.F7)(),F=(0,d.Sq)(),B=(0,s.A)(t),O=(0,a.o)(),{tokens:N,loading:L}=q(null===B||void 0===B?void 0:B.cpkAddress),R=N.reduce(((e,t)=>e+t.cpkXTokenUsdBalance+t.cpkTokenUsdBalance),0),E=(0,y.useCallback)((async()=>{if(!(0,d.af)(P,t))return void o(n("proxyTokens.connectAccount"),{variant:k.w.default});const e=await(0,i.rz)();if(P&&e)try{const t=await e.claimAll(P,N);await W(t,{confirm:{message:n("proxyTokens.claimAllSuccess")}})}catch(s){C(s)}}),[P,t,o,n,N,W,C]),z=!F||L,D=!z&&!N.length;return O&&(0,d.af)(P,t)?(0,I.jsx)(u.A,{title:(0,I.jsxs)(w.A.span,{fontSize:"inherit",lineHeight:"inherit",fontWeight:"inherit",color:"inherit",children:[n("proxyTokens.header"),(0,I.jsx)(g.A,{type:"address",hash:null===B||void 0===B?void 0:B.cpkAddress,inline:!0,iconOnly:!0,color:"inherit",ml:1})]}),...e,children:(0,I.jsx)(b.A,{mt:[3,"24px"],children:(0,I.jsxs)(p.A,{children:[(0,I.jsx)(M,{}),(0,I.jsxs)("tbody",{children:[(0,I.jsxs)(h.A,{show:D,loading:z,children:[n("proxyTokens.noResults")," ",(0,I.jsx)(c.A,{href:U,title:"Learn more",children:"Learn more"})]}),!!N.length&&(0,I.jsxs)(m.A,{children:[(0,I.jsx)("td",{children:(0,I.jsxs)(T.A,{alignItems:"flex-start",flexDirection:["column","row"],ml:2,children:[(0,I.jsx)(T.A,{alignItems:"flex-start",justifyContent:"center",display:["flex","none"],children:(0,I.jsx)(w.A,{fontSize:1,fontWeight:4,color:"grey",children:n("proxyTokens.assets")})}),(0,I.jsxs)(T.A,{mt:[1,0],flexWrap:"wrap",children:[N.slice(0,2).map(((e,t)=>{let{symbol:n,name:o,id:i}=e;return(0,I.jsxs)(T.A,{alignItems:"center",mr:2,children:[(0,I.jsx)(f.A,{symbol:n,name:o,width:"32px",height:"32px"}),(0,I.jsxs)(w.A.span,{fontSize:2,fontWeight:5,ml:"10px",children:[n,N.length>t+1&&", "]})]},i)})),N.length>2&&(0,I.jsx)(T.A,{alignItems:"center",children:(0,I.jsx)(x.A,{placement:"top",message:N.slice(2).map((e=>{let{symbol:t}=e;return t})).join(", "),children:(0,I.jsx)(w.A,{fontSize:2,fontWeight:5,children:n("proxyTokens.andOthersWithCount",{count:N.length-2})})})})]})]})}),(0,I.jsx)("td",{children:(0,I.jsxs)(T.A,{alignItems:["flex-start","flex-end"],flexDirection:"column",children:[(0,I.jsx)(T.A,{alignItems:"flex-start",justifyContent:"center",display:["flex","none"],children:(0,I.jsx)(w.A,{fontSize:1,fontWeight:4,color:"grey",children:n("proxyTokens.balance")})}),(0,I.jsxs)(T.A,{justifyContent:["flex-start","flex-end"],mt:[1,0],children:[(0,r.GM)(R)," USD"]})]})}),(0,I.jsx)("td",{children:(0,I.jsx)(T.A,{justifyContent:["flex-start","flex-end"],alignItems:"center",children:!!N.length&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(v.A,{height:"28px",px:2,onClick:E,children:n("proxyTokens.claimAll")}),(0,I.jsx)(c.A,{ml:2,href:U,title:"Learn more",children:"Learn more"})]})})})]})]})]})})}):null}},4205:(e,t,n)=>{"use strict";n.d(t,{A:()=>pe});var o=n(75904),i=n(16823),s=n(1641),l=n(173),a=n(27893),r=n(82488),d=n(42615),c=n(50813),u=n(60581),p=n(67122),h=n(67922),m=n(63668),x=n(92109),v=n(83843),g=n(4155),A=n(636),k=n(58768),f=n(51978),y=n(76958),j=n(62491),w=n(35005),b=n(41902),T=n(8214),S=n(38256),C=n(40076),W=n(88150),I=n(7329),M=n(96363),P=n(87585),F=n(96326),B=n(85105),O=n.n(B),N=n(1107),L=n(86668),R=n(24537);const E=e=>{var t,n,o,i,s,l,a,d,c,u,p,h,m,B,E,z,D,q,U,_;let{isOpen:G,onClose:X,asset:H,withoutPortal:K=!1}=e;const{t:V}=(0,v.B)(["invest","popups","common","errors"]),{addError:Z,reportError:$}=(0,P.dh)(),{track:J}=(0,k.A)(),Q=(0,r.F7)(),[Y,ee]=(0,x.useState)(null!==Q&&void 0!==Q?Q:null),[te,ne]=(0,x.useState)(0),oe=(0,x.useMemo)((()=>(0,y.lW)(te).times((null===H||void 0===H?void 0:H.exchangeRate)||0)),[te,null===H||void 0===H?void 0:H.exchangeRate]),ie=(0,x.useMemo)((()=>{var e;return(0,y.BL)(oe,null===H||void 0===H||null===(e=H.redemptionToken)||void 0===e?void 0:e.exchangeRate)}),[oe,null===H||void 0===H||null===(t=H.redemptionToken)||void 0===t?void 0:t.exchangeRate]),[se,le]=(0,x.useState)(!1),ae=(0,x.useCallback)((e=>{Number.isNaN(e)||ne(e)}),[ne]),re=(0,x.useCallback)((e=>{e&&e.value&&ee(e.value)}),[]),de=(0,x.useCallback)((()=>{ne(0),null===X||void 0===X||X()}),[X]),ce=(0,x.useCallback)((async()=>{if(Y&&H&&H.redemptionToken)try{var e;le(!0);const t=await(null===(e=H.requestRedeem)||void 0===e?void 0:e.call(H,(0,y.NU)(te,H.decimals),Y));await J(t,{confirm:{secondaryMessage:V("invest:redeemModal.success")}}),await(0,j.A)(2e3),ne(0)}catch(t){$(t)}finally{le(!1)}else Z(V("invest:redeemModal.noAddress"))}),[Z,te,H,$,Y,V,J]),ue=void 0===(null===H||void 0===H?void 0:H.underlyingToken),pe=(null===H||void 0===H||null===(n=H.balance)||void 0===n?void 0:n.eq(0))||(0,y.lW)(te).eq(0)||(null===H||void 0===H||null===(o=H.balance)||void 0===o?void 0:o.lt(te))||void 0===ie||(null===ie||void 0===ie?void 0:ie.eq(0))||(0,y.lW)(null===H||void 0===H?void 0:H.minimumRedemptionAmount).gt(te);return(0,R.jsx)(b.A,{isOpen:G,onClose:de,width:["100%","550px"],minHeight:"400px",maxHeight:["90%","80%"],height:"auto",justifyContent:ue?"center":"stretch",alignItems:ue?"center":"stretch",withoutPortal:K,children:(0,R.jsxs)(S.A,{loading:ue,size:"40px",children:[(0,R.jsx)(N.A,{as:"h4",fontSize:4,fontWeight:5,mt:0,mb:"20px",color:"text",children:V("invest:redeemModal.title",{tokenIn:null!==(i=null===H||void 0===H?void 0:H.symbol)&&void 0!==i?i:"UNKNOWN",tokenOut:null!==(s=null===H||void 0===H||null===(l=H.redemptionToken)||void 0===l?void 0:l.symbol)&&void 0!==s?s:"UNKNOWN"})}),(0,R.jsx)(L.A.p,{mt:0,color:"text",children:V("invest:redeemModal.description",{tokenIn:null!==(a=null===H||void 0===H?void 0:H.symbol)&&void 0!==a?a:"UNKNOWN",tokenOut:null!==(d=null===H||void 0===H||null===(c=H.redemptionToken)||void 0===c?void 0:c.symbol)&&void 0!==d?d:"UNKNOWN",network:O()(null!==(u=null===H||void 0===H||null===(p=H.kyaInformation)||void 0===p?void 0:p.blockchain)&&void 0!==u?u:"UNKNOWN NETWORK")})}),(0,R.jsxs)(g.A,{children:[(0,R.jsxs)(A.A,{width:"100%",justifyContent:"space-between",children:[(0,R.jsx)(L.A.span,{color:"near-black",fontSize:1,textAlign:"right",children:V("invest:redeemModal.amount")}),(0,R.jsxs)(L.A.span,{color:"near-black",fontSize:1,textAlign:"right",mr:2,children:[V("invest:redeemModal.balance")," ",(0,R.jsx)(F.A,{tokenAddress:null===H||void 0===H?void 0:H.id,account:Y,symbol:null===H||void 0===H?void 0:H.symbol,wrapper:L.A.span})]})]}),(0,R.jsx)(M.A,{height:"48px",mb:3,max:null!==(h=null===H||void 0===H||null===(m=H.balance)||void 0===m?void 0:m.toFixed(H.decimals))&&void 0!==h?h:"0",decimalScale:H&&(0,w.H)(H),value:te,onChange:ae,disabled:se,error:(()=>{if((0,y.lW)(te).gt(0)&&H&&H.balance&&H.minimumRedemptionAmount){if((0,y.lW)(te).gt(H.balance))return V("errors:amountExceedsBalance");if((0,y.lW)(te).lt(H.minimumRedemptionAmount))return V("errors:amountLowerThanAllowed",{minRedemptionAmount:H.minimumRedemptionAmount.toString(),assetSymbol:H.symbol})}})(),reportError:!0})]}),(0,R.jsx)(C.A,{height:"48px",label:V("invest:redeemModal.selectAddress"),onChange:re,selectedAddress:Y,isDisabled:se}),(0,R.jsx)(T.A,{mb:0}),(0,R.jsx)(L.A.span,{textAlign:"center",mt:2,fontSize:3,color:"text",title:"".concat(null!==(B=null===ie||void 0===ie?void 0:ie.round(null!==(E=null===H||void 0===H||null===(z=H.redemptionToken)||void 0===z?void 0:z.decimals)&&void 0!==E?E:18))&&void 0!==B?B:"--"," ").concat(null!==(D=null===H||void 0===H||null===(q=H.redemptionToken)||void 0===q?void 0:q.symbol)&&void 0!==D?D:"UNKNOWN"),children:V("invest:redeemModal.youWillReceive",{tokenOut:null!==(U=null===H||void 0===H||null===(_=H.redemptionToken)||void 0===_?void 0:_.symbol)&&void 0!==U?U:"UNKNOWN",amount:ie?(0,f.G)(ie,6):"--"})}),(0,R.jsx)(L.A.span,{textAlign:"center",fontSize:0,color:"text",title:void 0===oe?"--":"".concat(oe," USD"),children:V("invest:redeemModal.currentMarketValue",{amount:oe?(0,f.G)(oe,2):"--"})}),(0,R.jsxs)(A.A,{justifyContent:"center",style:{gap:"16px"},mt:3,children:[(0,R.jsx)(W.A,{size:"small",onClick:de,children:V("popups:actions.close")}),(0,R.jsx)(I.A,{requireInitiated:!0,requireAccount:!0,size:"small",disabled:pe,onClick:ce,children:V("common:token.redeem")})]})]})})};var z=n(38202),D=n(17240),q=n(62322),U=n(97266),_=n(29007),G=n(79474),X=n(28363),H=n(2409),K=n(6218),V=n(76369),Z=n(12361),$=n(59838),J=n(22080),Q=n(88682),Y=n(446),ee=n(17689),te=n(88016),ne=n.n(te),oe=n(9336),ie=n(51861),se=n(5291);const le=e=>{let{symbol:t,name:n,enable:o,disable:i,allowanceStatus:s,id:l,onRedeemClick:a,isPerformingAnAction:r,setIsPerformingAnAction:d,isRedeemDisabled:c}=e;const{t:u}=(0,v.B)("common"),[p,h]=(0,x.useState)(ne()(s));return(0,x.useEffect)((()=>{ne()(s)||h(!1)}),[s]),p||r?(0,R.jsx)(oe.A,{m:"auto"}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(ee.A,{name:U.A.swapService,children:(0,R.jsx)(Y.W,{pathname:"/swap",queryParams:{tokenIn:l},children:(0,R.jsxs)(ie.A,{height:"28px",px:2,children:[(0,R.jsx)(Q.A,{size:"18px",mr:1})," ",u("token.swap")]})})}),(0,R.jsx)(ee.A,{name:U.A.allPools,children:(0,R.jsx)(Y.W,{pathname:"/pools/all",queryParams:{assets:l},children:(0,R.jsxs)(ie.A,{height:"28px",px:2,ml:1,children:[(0,R.jsx)(L.A.span,{mr:1,lineHeight:"20px",children:(0,R.jsx)(Z.A,{name:"Pool",height:"18px",width:"18px"})}),(0,R.jsx)(L.A.span,{fontWeight:3,lineHeight:"20px",children:u("token.pool")})]})})}),(0,R.jsx)(A.A,{justifyContent:"center",alignItems:"center",children:(0,R.jsxs)(ie.A,{height:"28px",px:2,ml:1,alignItems:"center",onClick:a,disabled:c,children:[(0,R.jsx)(Z.A,{name:"RedeemIcon",height:"18px",width:"18px",fill:"white"}),(0,R.jsx)(L.A.span,{fontWeight:3,lineHeight:"20px",fontSize:1,ml:1,children:u("common:token.redeem")})]})}),(0,R.jsx)(se.A,{symbol:t,name:n,enable:o,disable:i,allowanceStatus:s,setIsPerformingAnAction:d})]})},ae=(0,x.memo)(le),re=e=>{var t,n;let{tokenToRender:i,rowIndex:s,disableActions:l=!1,selectedAccount:a,onRedeemClick:r}=e;const{checkFeature:c}=(0,U.h)(),{t:u}=(0,v.B)("wallets"),{highlighted:p}=(0,d.W)(s),[h,k]=(0,x.useState)(!1),[f,y]=(0,x.useState)(!1),{name:j,symbol:w,balance:b,userBalances:T,exchangeRate:C,allowanceStatus:W,cpkAllowance:I,id:M,pooledTokenBalance:P,usdPooledTokenBalance:B,netApy:O,kyaInformation:N,underlyingToken:E,...z}=i,Q={allowanceStatus:W,name:j,symbol:w,...z,id:M},Y=(0,x.useCallback)((()=>null===r||void 0===r?void 0:r(i)),[r,i]);return(0,R.jsxs)(X.A,{rowIndex:s,children:[(0,R.jsx)("td",{children:(0,R.jsxs)(A.A,{ml:2,alignItems:"center",onClick:()=>{k((e=>!e))},children:[null!==N&&void 0!==N&&N.image?(0,R.jsx)(Z.A,{name:null===N||void 0===N?void 0:N.image,width:"32px",height:"32px",title:j,external:!0}):(0,R.jsx)($.A,{symbol:w,name:j,width:"32px",height:"32px"}),(0,R.jsxs)(g.A,{flexGrow:"1",ml:"10px",children:[(0,R.jsx)(L.A.span,{fontSize:2,fontWeight:5,children:w}),(0,R.jsx)(L.A.span,{fontSize:2,fontWeight:2,ml:"8px",children:j}),(0,R.jsx)(L.A.span,{ml:1,children:(0,R.jsx)(H.A,{allowanceStatus:W})}),p&&(0,R.jsx)(V.A,{token:i,ml:3})]}),(0,R.jsx)(g.A,{display:["block","none"],children:h?(0,R.jsx)(D.A,{color:"near-black"}):(0,R.jsx)(o.A,{color:"near-black"})})]})}),(0,R.jsxs)(G.A,{expanded:h,children:[(0,R.jsxs)(A.A,{alignItems:"center",justifyContent:"flex-start",display:["flex","none"],children:[(0,R.jsx)(L.A,{fontSize:1,fontWeight:4,color:"grey",children:u("stakingNodes.native")}),(0,R.jsx)(m.A,{placement:"top",message:u("stakingNodes.native"),children:(0,R.jsx)(q.A,{size:"15",ml:2,color:"grey"})})]}),(0,R.jsx)(A.A,{alignItems:"center",justifyContent:["flex-start","flex-end"],mt:[1,0],children:(0,R.jsxs)(A.A,{flexDirection:["center","column"],alignItems:["center","flex-end"],justifyContent:"flex-start",width:["100%","fit-content"],children:[(0,R.jsx)(F.A,{tokenAddress:M,account:null===a||void 0===a?void 0:a.address,symbol:w,wrapper:L.A,fontSize:2,fontWeight:2,color:["near-black","black"],textAlign:"right"}),(0,R.jsx)(F.A,{tokenAddress:null===i||void 0===i?void 0:i.id,account:null===a||void 0===a?void 0:a.address,symbol:"USD",usd:!0,wrapper:L.A,fontSize:[2,0],fontWeight:3,color:"grey",textAlign:"right",ml:[2,0]})]})})]}),(0,R.jsxs)(G.A,{expanded:h,children:[(0,R.jsxs)(A.A,{alignItems:"center",justifyContent:"flex-start",display:["flex","none"],children:[(0,R.jsx)(L.A,{fontSize:1,fontWeight:4,color:"grey",children:u("stakingNodes.pooled")}),(0,R.jsx)(m.A,{placement:"top",message:u("stakingNodes.pooled"),children:(0,R.jsx)(q.A,{size:"15",ml:2,color:"grey"})})]}),(0,R.jsx)(A.A,{alignItems:"center",justifyContent:["flex-start","flex-end"],mt:[1,0],children:(0,R.jsxs)(A.A,{flexDirection:["center","column"],alignItems:["center","flex-end"],justifyContent:"flex-start",width:["100%","fit-content"],children:[" ",(0,R.jsx)(S.A,{loading:void 0===P,children:a?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(K.A,{balance:P,base:6,symbol:w,wrapper:L.A,fontSize:2,fontWeight:2,color:["near-black","black"],textAlign:"right"}),(0,R.jsx)(K.A,{balance:null!==B&&void 0!==B?B:0,base:0,symbol:"USD",wrapper:L.A,fontSize:[2,0],fontWeight:3,color:"grey",textAlign:"right",ml:[2,0]})]}):"--"})]})})]}),(0,R.jsxs)(G.A,{expanded:h,children:[(0,R.jsxs)(A.A,{alignItems:"center",justifyContent:"flex-start",display:["flex","none"],children:[(0,R.jsx)(L.A,{fontSize:1,fontWeight:4,color:"grey",children:u("stakingNodes.earnings")}),(0,R.jsx)(m.A,{placement:"top",message:u("stakingNodes.earnings"),children:(0,R.jsx)(q.A,{size:"15",ml:2,color:"grey"})})]}),(0,R.jsx)(A.A,{flexDirection:["center","column"],alignItems:["center","flex-end"],justifyContent:"flex-start",width:"100%",mt:[1,0],children:(0,R.jsx)(S.A,{loading:void 0===O,children:(0,R.jsx)(L.A,{textAlign:"right",title:"".concat(null!==(t=null===O||void 0===O?void 0:O.times(100))&&void 0!==t?t:"--","%"),children:u("stakingNodes.apy",{value:null!==(n=null===O||void 0===O?void 0:O.times(100).round(2,J.A.roundHalfUp).toString())&&void 0!==n?n:"--"})})})})]}),(0,R.jsx)(G.A,{expanded:h,hide:!p&&!f,children:(0,R.jsx)(A.A,{alignItems:"center",justifyContent:["flex-start","flex-end"],children:!l&&(0,R.jsx)(ae,{...Q,onRedeemClick:Y,isPerformingAnAction:f,setIsPerformingAnAction:y,isRedeemDisabled:void 0===E||void 0===b||!c(U.A.eth2snRedeem)&&(0,_.dh)(i)})})})]})};var de=n(27226);const ce=()=>{const{t:e}=(0,v.B)("wallets");return(0,R.jsx)(de.A,{columns:[{id:"asset",label:e("stakingNodes.asset"),width:"36%"},{id:"native",label:e("stakingNodes.native"),justify:"flex-end",width:"13%"},{id:"pooled",label:e("stakingNodes.pooled"),justify:"flex-end",width:"13%"},{id:"earnings",label:e("stakingNodes.earnings"),justify:"flex-end",width:"13%"},{id:"actions",justify:"flex-end",width:"25%"}]})},{getCrypto:ue}=i.Ay.resources.docs.gettingStarted,pe=e=>{const{t:t}=(0,v.B)("wallets"),n=(0,r.F7)(),i=(0,r.Sq)(),{selectedAccount:k,stakingNodes:f,investAssetsLoading:y,investAssetsError:j}=(0,z.b)(),w=(0,s.A)(k),{networkName:b}=(0,r.AE)(),[T,S]=(0,x.useState)(3),C=(0,l.A)(!1,E),W=(0,a.WQ)(f,n),I=!n,M=y||!i||W,P=!!j,F=!P&&!f.length,B=(0,x.useCallback)((e=>C.open({asset:e})),[C]);return F?null:(0,R.jsxs)(u.A,{title:t("stakingNodes.header",{network:b}),...e,children:[(0,R.jsxs)(g.A,{mt:[3,"24px"],children:[(0,R.jsxs)(p.A,{children:[(0,R.jsx)(ce,{}),(0,R.jsxs)("tbody",{children:[(0,R.jsxs)(h.A,{span:5,show:!M&&F,loading:M&&F,error:I&&t("queryStatuses.noAccount")||P&&t("queryStatuses.error"),children:[t("queryStatuses.noResults"),(0,R.jsx)(c.A,{href:ue,title:t("queryStatuses.getCrypto"),children:t("queryStatuses.getCrypto")})]}),(0,R.jsx)(d.i,{children:!I&&f.slice(0,T).map(((e,t)=>(0,R.jsx)(re,{rowIndex:t,tokenToRender:e,selectedAccount:w,onRedeemClick:B},e.id)))})]})]}),f.length>T&&(0,R.jsx)(A.A,{alignItems:"center",justifyContent:"center",mt:3,children:(0,R.jsx)(m.A,{placement:"top",message:"Load more",children:(0,R.jsx)(o.A,{onClick:e=>{e.stopPropagation(),S((e=>e+3))},cursor:"pointer",color:"near-black"})})})]}),C.modal]})}},50044:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var o=n(29007),i=n(40040),s=n(69092),l=n(82488),a=n(67286),r=n(6218),d=n(85597),c=n.n(d),u=n(78122),p=n.n(u),h=n(92109),m=n(83843),x=n(71310),v=n(636),g=n(4155),A=n(1107),k=n(86668),f=n(62322),y=n(52253),j=n(34206),w=n(63668),b=n(38202),T=n(24537);const S=e=>{const{t:t}=(0,m.B)("wallets"),{isSm:n,isXs:o,isLg:i}=(0,y.A)(),{hideSmallBalances:s,toggleHideSmallBalances:l}=(0,b.b)();return n||o?null:(0,T.jsx)(w.A,{placement:"top",message:t("switchTooltip"),children:(0,T.jsxs)(v.A,{mr:[1,2,2,4],alignItems:"center",children:[(0,T.jsx)(j.A,{...e,checked:s,onChange:(e,t)=>l(t)}),i?(0,T.jsx)(k.A.span,{color:"grey",fontWeight:4,ml:2,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t("switchLabel")}):(0,T.jsx)(f.A,{size:"15",ml:2,color:"grey"})]})})},C=(0,s.Ng)((e=>{let{user:{accounts:t,id:n}}=e;return{accounts:t,userId:n}}))((e=>{var t;let{accounts:n}=e;const s=(0,l.F7)(),{t:d}=(0,m.B)(["wallets"]),u=(0,x.W6)(),{selectedAccount:f,setSelectedAccount:y,userUsdBalance:j}=(0,b.b)(),w=(0,h.useMemo)((()=>[...p()([...(0,o.Wz)(s),...c()(n||[],"address")]).map((e=>{var t;return{value:(0,l.yI)(e),label:(null===(t=n.find((0,i.Lj)("address",e)))||void 0===t?void 0:t.label)||"",connected:!!s&&(0,l.af)(s,e)}})),{value:"",label:d("walletSelector.addAddress")}]),[s,n,d]),C=(0,h.useCallback)((e=>{e?(""===e.value&&u.push("/passport#my-addresses"),null===y||void 0===y||y((0,l.yI)(e.value))):null===y||void 0===y||y(void 0)}),[u,y]);return(0,h.useEffect)((()=>{const{preselectedAddress:e}=u.location.state||{};if(e){const t=w.find((0,i.Lj)("value",(0,l.yI)(e)))||null;C(t)}else{const e=w.find((e=>{let{connected:t}=e;return!!t}))||null;C(e)}}),[w,C,u.location.state]),(0,T.jsxs)(v.A,{width:"100%",alignItems:"flex-start",flexDirection:["column","row"],justifyContent:"space-between",mb:"24px",children:[(0,T.jsxs)(g.A,{flexGrow:"1",maxWidth:["100%","532px"],width:"100%",children:[(0,T.jsx)(A.A,{as:"h4",fontSize:[1,2],lineHeight:"copy",fontWeight:4,m:0,color:"near-black",children:d("walletSelector.selectedAddress")}),(0,T.jsx)(g.A,{mt:2,children:(0,T.jsx)(a.A,{options:w,onChange:C,value:f?{value:(0,l.yI)(f),label:(null===(t=w.find((0,i.Lj)("value",(0,l.yI)(f))))||void 0===t?void 0:t.label)||""}:null})})]}),(0,T.jsxs)(g.A,{mt:[3,0],ml:2,children:[(0,T.jsx)(A.A,{as:"h4",fontSize:[1,2],lineHeight:"copy",fontWeight:4,m:0,color:"near-black",textAlign:["left","right"],children:d("walletSelector.walletTotalValue")}),(0,T.jsxs)(v.A,{alignItems:"center",mt:2,children:[(0,T.jsx)(S,{}),(0,T.jsx)(k.A,{fontWeight:4,color:"near-black",fontSize:4,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(0,T.jsx)(r.A,{balance:null===j||void 0===j?void 0:j.totalUsdBalance,base:0,symbol:"USD"})})]})]})]})}))},38202:(e,t,n)=>{"use strict";n.d(t,{x:()=>P,b:()=>M});var o=n(81746),i=n(1500),s=n(7970),l=n.n(s),a=n(92109),r=n(2738),d=n(97706),c=n(61336),u=n(79135),p=n(21870),h=n(12225),m=n(27958),x=n(3421),v=n(82488),g=n(86807);const A=["0x02ba39888444c6277f7a6dfcb9a58b64fb3beff3","0x08bf1dac72eae7fc2c407123038f4563fd79c3ad","0x345d87f34b7b830d89c2a98d89a2a0af54bb6fd0","0x3fa010f813ccde2597cf907df714b3a8743028ef","0x80f8ade10c21514eed63fa52928ea41de33c5365","0x8ce654f90ace2ab4c5c512010c314b5c6e15cc77","0xcf9ac0929e2195a4d1f0327d3e54efa9d3d83523","0xd98388bf3e062fc77a1a456a634f2b2dc5d1bb6e","0xf3cda4e9f10d81151ffbffd2c1527e42093b4542","0xf46ea5498474d45c3e84f59b35e1d0277c7a44b6","0xfc8e461c10badf7d3342cc01c4c332fbeacdd5a2"],k=(e,t)=>{const{networkId:n}=(0,v.AE)(),o=(0,c.or)(),{data:s,error:k,loading:f}=(0,i.I)(u.a$,{variables:{id:null===e||void 0===e?void 0:e.address.toLowerCase()},pollInterval:p.a0,skip:!(null!==e&&void 0!==e&&e.address)}),y=(0,a.useMemo)((()=>(e=>(0,h.Bi)(e)?[p.L4]:[p.LJ,p.yn])(n)),[n]),{allTokens:j,loading:w,error:b}=(0,g.A)(u.c1,{variables:{filter:t}});console.log(j);const T=(0,x.U4)((0,a.useMemo)((()=>[...j,...y].filter((e=>!A.includes(e.id)))),[y,j]),(0,a.useMemo)((()=>[(0,x.Ew)(),(0,x.BD)(),(0,x.ZZ)(null===e||void 0===e?void 0:e.address),(0,x.qX)(null===e||void 0===e?void 0:e.address),(0,x.qd)(null===e||void 0===e?void 0:e.address),(0,x.Sc)(null===e||void 0===e?void 0:e.address),e=>({enable:(0,r.of)((async()=>{var t;return null!==o&&void 0!==o&&o.address?null===(t=await d.v.getInstance(e.id))||void 0===t?void 0:t.enableToken(o.address):void 0})),disable:(0,r.of)((async()=>{var t;return null!==o&&void 0!==o&&o.address?null===(t=await d.v.getInstance(e.id))||void 0===t?void 0:t.disableToken(o.address):void 0}))})]),[null===o||void 0===o?void 0:o.address,null===e||void 0===e?void 0:e.address])),S=(0,a.useMemo)((()=>{var e;return null!==(e=null===T||void 0===T?void 0:T.map((e=>{var t,n,o,i,l;const a=null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.sharesOwned.filter((t=>{var n;return null===(n=t.poolId)||void 0===n?void 0:n.tokens.some((t=>{var n,o;return(0,v.af)(null===(n=t.xToken)||void 0===n?void 0:n.id,null===(o=e.xToken)||void 0===o?void 0:o.id)}))})).map((t=>{var n,o;const i=null===(n=t.poolId)||void 0===n?void 0:n.tokens.find((t=>{var n,o;return(0,v.af)(null===(n=t.xToken)||void 0===n?void 0:n.id,null===(o=e.xToken)||void 0===o?void 0:o.id)}));return(0,m.BL)((0,m.lW)(null===i||void 0===i?void 0:i.balance).times(t.balance),null===(o=t.poolId)||void 0===o?void 0:o.totalShares)})).reduce(((e,t)=>e.add(t)),m.f2),r=null===a||void 0===a?void 0:a.times(null!==(n=e.exchangeRate)&&void 0!==n?n:0),d=null===(o=(0,m.lW)(null!==r&&void 0!==r?r:0))||void 0===o?void 0:o.add(null!==(i=null===(l=e.userBalances)||void 0===l?void 0:l.usd)&&void 0!==i?i:0);return{...e,fullUsdBalance:d,pooledTokenBalance:null!==a&&void 0!==a?a:m.f2,usdPooledTokenBalance:r}})))&&void 0!==e?e:[]}),[T,s]),C=(0,a.useMemo)((()=>l()([b,k])),[b,k]),W=(0,a.useMemo)((()=>(0,x.WQ)(T)),[T]);return(0,a.useMemo)((()=>({tokens:S,loading:w||f||W,errors:C})),[W,C,S,w,f])};var f=n(30280),y=n(1641),j=n(52253),w=n(32916),b=n(17705),T=n(45119),S=n(12551);const C=new S.sj("wallet-hide-low-balances",(0,S.nJ)(),(0,S.rR)(!1));var W=n(24537);const I=(0,a.createContext)({userUsdBalance:{nativeTokens:0,poolTokens:0,totalUsdBalance:0},setPoolTokensBalance:()=>{},selectedAccount:void 0,setSelectedAccount:()=>{},hideSmallBalances:!1,toggleHideSmallBalances:()=>{},assetTokens:[],assetTokensLoading:!1,assetTokensError:[],stakingNodes:[],stockTokens:[],brandTokens:[],indexTokens:[],bonds:[],investAssetsLoading:!1,investAssetsError:void 0}),M=()=>(0,a.useContext)(I),P=e=>{const t=(0,v.F7)(),[n,i]=(0,a.useState)(t?(0,v.yI)(t):t),s=(0,y.A)(n),[l,r]=(0,o.A)(0),{tokens:d,loading:c,errors:u}=k(s,(0,w.Xs)("Token",{isLPT:!1,paused:!1})),p=(0,a.useMemo)((()=>{const e=d.reduce(((e,t)=>{var n;let{userBalances:o}=t;return e+(null!==(n=null===o||void 0===o?void 0:o.usd)&&void 0!==n?n:0)}),0);return(0,b.f)(e)}),[d]),h=(0,a.useMemo)((()=>p+l),[p,l]),{isSm:m,isXs:x}=(0,j.A)(),{value:g,setValue:A}=(0,T.j)(C),S=(0,a.useCallback)((e=>{m||x||A("boolean"===typeof e?e:e=>!e)}),[m,x,A]),{investAssets:M,stakingNodes:P,stockTokens:F,indexTokens:B,bonds:O,investAssetsError:N,investAssetsLoading:L,brandingTokens:R}=(0,f.A)(),E=(0,a.useMemo)((()=>d.filter((e=>!(null!==M&&void 0!==M&&M.some((t=>(0,v.af)(e.id,t.id))))))),[d,M]),z=(0,a.useMemo)((()=>P.map((e=>{const t=d.find((t=>{let{id:n}=t;return(0,v.af)(n,e.id)}));return{...e,...t}}))),[P,d]),D=(0,a.useMemo)((()=>F.map((e=>{const t=d.find((t=>{let{id:n}=t;return(0,v.af)(n,e.id)}));return{...e,...t}}))),[F,d]),q=(0,a.useMemo)((()=>O.map((e=>{const t=d.find((t=>{let{id:n}=t;return(0,v.af)(n,e.id)}));return{...e,...t}}))),[O,d]),U=(0,a.useMemo)((()=>B.map((e=>{const t=d.find((t=>{let{id:n}=t;return(0,v.af)(n,e.id)}));return{...e,...t}}))),[B,d]),_=(0,a.useMemo)((()=>R.map((e=>{const t=d.find((t=>{let{id:n}=t;return(0,v.af)(n,e.id)}));return{...e,...t}}))),[R,d]),G=(0,a.useMemo)((()=>({userUsdBalance:{nativeTokens:p,poolTokens:l,totalUsdBalance:h},setPoolTokensBalance:r,selectedAccount:n,setSelectedAccount:i,hideSmallBalances:m||x||g,toggleHideSmallBalances:S,assetTokens:E,assetTokensLoading:c,assetTokensError:u,stakingNodes:z,stockTokens:D,indexTokens:U,bonds:q,brandTokens:_,investAssetsError:N,investAssetsLoading:L})),[p,l,h,r,n,m,x,g,S,E,c,u,z,D,U,q,_,N,L]);return(0,W.jsx)(I.Provider,{value:G,...e})}},77686:(e,t,n)=>{"use strict";n.d(t,{F:()=>T});var o=n(49742),i=n(5421),s=n(61336),l=n(75328),a=n(76876),r=n(97646),d=n.n(r),c=n(64349),u=n(27958),p=n(82488),h=n(48016);const m=(e,t,n,o,i)=>{const s=(0,h.tn)([...t,...n]);return["swap","exitPool","exitPoolSingleOut"].includes(e)?n.reduce(((e,t,n)=>(0,u.lW)(i[n]).times(s[t].exchangeRate||0).plus(e)),u.f2).toString():["joinPool","joinPoolSingleIn"].includes(e)?t.reduce(((e,t,n)=>(0,u.lW)(o[n]).times(s[t].exchangeRate||0).plus(e)),u.f2).toString():"0"},x=async function(e,t,n,o,i){var s;let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"swap",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.x.pending;const u=i.transactionResponse,h=e.map((e=>e.id)),x=t.map((e=>e.id)),v={id:u.hash,timestamp:Math.floor((new Date).getTime()/1e3),tokensIn:e,tokensOut:t,tokensInAddresses:h,tokensOutAddresses:x,tokenAmountsIn:n,tokenAmountsOut:o,userAddress:{id:null!==(s=p.oh.getValue())&&void 0!==s?s:""},status:r,value:m(l,h,x,n,o),action:l},g=await p.MZ.getValue().getTransaction(u.hash),A={...v,tokensIn:v.tokensIn.map((e=>{let{xToken:t,...n}=e;return{...d()(t,["id","name","symbol","decimals"]),token:d()(n,["id","name","symbol","decimals"])}})),tokensOut:v.tokensOut.map((e=>{let{xToken:t,...n}=e;return{...d()(t,["id","name","symbol","decimals"]),token:d()(n,["id","name","symbol","decimals"])}}))},k=c.AD.get();c.AD.set([...k,A]),g.wait(1).then((()=>{c.AD.set((e=>e.map((e=>e.id===g.hash?{...e,status:a.x.completed}:e))))})).catch((()=>{c.AD.set((e=>e.map((e=>e.id===g.hash?{...e,status:a.x.failed}:e))))}))};var v,g=n(21870),A=n(53840),k=n(35779),f=n(56133),y=n(3421),j=n(10015);const{bPoolProxyAddress:w}=(0,l.wc)(),b=new j.KA(i.A.BPoolProxy);class T extends o.x{constructor(){super(...arguments),this.viewSplitExactIn=async(e,t,n,o)=>{try{var i,s;await this.init();const l=await(null===(i=this.contract)||void 0===i?void 0:i.viewSplitExactIn(e,t,n,o));return{swaps:(null===l||void 0===l?void 0:l.swaps)||[],totalReturn:(null===l||void 0===l||null===(s=l.totalOutput)||void 0===s?void 0:s.toString())||"0"}}catch{return{swaps:[],totalReturn:"0"}}},this.viewSplitExactOut=async(e,t,n,o)=>{try{var i,s;await this.init();const l=await(null===(i=this.contract)||void 0===i?void 0:i.viewSplitExactOut(e,t,n,o));return{swaps:(null===l||void 0===l?void 0:l.swaps)||[],totalReturn:(null===l||void 0===l||null===(s=l.totalInput)||void 0===s?void 0:s.toString())||"0"}}catch{return{swaps:[],totalReturn:"0"}}}}static async joinswapPoolAmountOut(e,t,n,o){var i,l,a;(0,f.MX)(!!w,"BPoolProxy address is missing");const r=await(0,s.rz)();(0,f.MX)(!!r,"Could not obtain CPK"),await(null===r||void 0===r?void 0:r.setXTokenWrapperAddress());const d=(0,A.fO)(t,o,n);(0,f.MX)((0,y.Ol)(n,d),"Not enough allowance"),null!==(i=n.cpkBalance)&&void 0!==i&&i.lt(d)&&(null===r||void 0===r||r.transferTokenFrom(e,n.id,d.minus(n.cpkBalance||0))),null===r||void 0===r||r.approveCpkTokenFor(n.id,"erc20",null===r||void 0===r?void 0:r.xTokenWrapperAddress,d),null===r||void 0===r||r.wrapToken(n.id,d),null===r||void 0===r||r.approveCpkTokenFor((null===(l=n.xToken)||void 0===l?void 0:l.id)||"","xToken",w,d);const c=[t.id,null===(a=n.xToken)||void 0===a?void 0:a.id,(0,u.NU)(o,g.Fx).toFixed(0),d.toFixed(0)];null===r||void 0===r||r.patchTxs({to:w||"",data:b.encodeFunctionData("joinswapPoolAmountOut",c)});return await(null===r||void 0===r?void 0:r.execStoredTxs().then((e=>{var i;return x([n],[{id:t.id,symbol:t.liquidityPoolToken.symbol,name:t.liquidityPoolToken.name,xToken:{id:null!==(i=t.xPoolTokenAddress)&&void 0!==i?i:""}}],[(0,u.S8)(d,n.decimals).toFixed(n.decimals)],[(0,u.lW)(o).toFixed(g.Fx)],e,"joinPoolSingleIn"),e}),(e=>{throw e})))}static async joinswapExternAmountIn(e,t,n,o){var i,l,a,r,d,c;(0,f.MX)(!!w,"BPoolProxy address is missing");const p=await(0,s.rz)();(0,f.MX)(!!p,"Could not obtain CPK"),await(null===p||void 0===p?void 0:p.setXTokenWrapperAddress());const h=(0,A.fO)(t,o,n),m=(0,u.NU)(null!==(i=null===(l=n.xToken)||void 0===l?void 0:l.cpkBalance)&&void 0!==i?i:0,null!==(a=n.decimals)&&void 0!==a?a:0),v=m.lt(h)?h.minus(m):u.f2,k=(0,u.S8)(v,n.decimals);(0,f.MX)((0,y.Ol)(n,k),"Not enough allowance"),v.gt(0)&&(null===p||void 0===p||p.transferTokenFrom(e,n.id,v),null===p||void 0===p||p.approveCpkTokenFor(n.id,"erc20",null===p||void 0===p?void 0:p.xTokenWrapperAddress,v),null===p||void 0===p||p.wrapToken(n.id,v)),null===p||void 0===p||p.approveCpkTokenFor((null===(r=n.xToken)||void 0===r?void 0:r.id)||"","xToken",w,h);const j=[t.id,null===(d=n.xToken)||void 0===d?void 0:d.id,(0,u.NU)(h,null===(c=n.xToken)||void 0===c?void 0:c.decimals).toFixed(0),(0,u.NU)(o,g.Fx).toFixed(0)];null===p||void 0===p||p.patchTxs({to:w||"",data:b.encodeFunctionData("joinswapExternAmountIn",j)});return await(null===p||void 0===p?void 0:p.execStoredTxs().then((e=>{var i;return x([n],[{id:t.id,symbol:t.liquidityPoolToken.symbol,name:t.liquidityPoolToken.name,xToken:{id:null!==(i=t.xPoolTokenAddress)&&void 0!==i?i:""}}],[(0,u.S8)(h,n.decimals).toFixed(n.decimals)],[(0,u.lW)(o).toFixed(g.Fx)],e,"joinPoolSingleIn"),e}),(e=>{throw e})))}static async joinPoolMultiple(e,t,n,o){(0,f.MX)(!!w,"BPoolProxy address is missing");const i=await(0,s.rz)();(0,f.MX)(!!i,"Could not obtain CPK"),await(null===i||void 0===i?void 0:i.setXTokenWrapperAddress());const l=n.map((e=>(0,A.XC)(t,o,e))),a=n.map(((e,t)=>{var n;let{xToken:o,decimals:i}=e;const s=(0,u.NU)(null!==(n=null===o||void 0===o?void 0:o.cpkBalance)&&void 0!==n?n:0,null!==i&&void 0!==i?i:0);return s.lt(l[t])?l[t].minus(s):u.f2}));(0,f.MX)(n.some(((e,t)=>(0,y.Ol)(e,(0,u.S8)(a[t],e.decimals)))),"Not enough allowance"),n.filter(((e,t)=>a[t].gt(0))).forEach(((t,n)=>{let{address:o}=t;null===i||void 0===i||i.transferTokenFrom(e,o,a[n]),null===i||void 0===i||i.approveCpkTokenFor(o,"erc20",null===i||void 0===i?void 0:i.xTokenWrapperAddress,a[n]),null===i||void 0===i||i.wrapToken(o,a[n])})),n.forEach(((e,t)=>{let{xToken:n}=e;return null===i||void 0===i?void 0:i.approveCpkTokenFor((null===n||void 0===n?void 0:n.id)||"","xToken",w,l[t])}));const r=[t.id,(0,u.NU)(o,g.Fx).toFixed(0),t.tokensList.map((e=>l[n.findIndex((0,k.Lj)("xToken.id",e))].toFixed(0)))];null===i||void 0===i||i.patchTxs({to:w||"",data:b.encodeFunctionData("joinPool",r)});return await(null===i||void 0===i?void 0:i.execStoredTxs().then((e=>{var i;return x(n,[{id:t.id,symbol:t.liquidityPoolToken.symbol,name:t.liquidityPoolToken.name,xToken:{id:null!==(i=t.xPoolTokenAddress)&&void 0!==i?i:""}}],l.map(((e,t)=>(0,u.S8)(e.toFixed(0),n[t].decimals).toString())),[(0,u.lW)(o).toFixed(g.Fx).toString()],e,"joinPool"),e}),(e=>{throw e})))}static async joinPool(e,t,n,o){return Array.isArray(n)?this.joinPoolMultiple(e,t,n,o):this.joinswapExternAmountIn(e,t,n,o)}static async exitPoolMultiple(e,t,n,o){(0,f.MX)(!!w,"BPoolProxy address is missing");const i=await(0,s.rz)();(0,f.MX)(!!i,"Could not obtain CPK"),await(null===i||void 0===i?void 0:i.setXTokenWrapperAddress());const l=(0,u.NU)(o,g.Fx),a=n.map((e=>(0,A.Ss)(t,o,e)));null===i||void 0===i||i.approveCpkTokenFor((null===t||void 0===t?void 0:t.xPoolTokenAddress)||"","xToken",w,l);const r=[t.id,l.toFixed(0),t.tokensList.map((e=>a[n.findIndex((0,k.Lj)("xToken.id",e))].toFixed(0)))];null===i||void 0===i||i.patchTxs({to:w||"",data:b.encodeFunctionData("exitPool",r)});const d=n.map(((e,t)=>{var n;let{xToken:o,decimals:i}=e;return a[t].add((0,u.NU)(null!==(n=null===o||void 0===o?void 0:o.cpkBalance)&&void 0!==n?n:0,null!==i&&void 0!==i?i:0))}));n.forEach(((e,t)=>{let{xToken:n}=e;return null===i||void 0===i?void 0:i.approveCpkTokenFor((null===n||void 0===n?void 0:n.id)||"","xToken",null===i||void 0===i?void 0:i.xTokenWrapperAddress,d[t])})),n.forEach(((e,t)=>{let{xToken:n}=e;return null===i||void 0===i?void 0:i.unwrapXToken((null===n||void 0===n?void 0:n.id)||"",d[t])})),n.forEach(((t,n)=>{let{address:o}=t;return null===i||void 0===i?void 0:i.transferToken(e,o,d[n])}));return await(null===i||void 0===i?void 0:i.execStoredTxs().then((e=>{var o;return x([{id:t.id,symbol:t.liquidityPoolToken.symbol,name:t.liquidityPoolToken.name,xToken:{id:null!==(o=t.xPoolTokenAddress)&&void 0!==o?o:""}}],n,[(0,u.S8)(l.toFixed(0),g.Fx).toString()],a.map(((e,t)=>(0,u.S8)(e.toFixed(0),n[t].decimals).toString())),e,"exitPool"),e}),(e=>{throw e})))}static async exitPoolSingle(e,t,n,o){var i,l,a,r,d,c;(0,f.MX)(!!w,"BPoolProxy address is missing");const p=await(0,s.rz)();(0,f.MX)(!!p,"Could not obtain CPK"),await(null===p||void 0===p?void 0:p.setXTokenWrapperAddress());const h=(0,u.NU)(o,g.Fx),m=(0,A._Y)(t,o,n);null===p||void 0===p||p.approveCpkTokenFor((null===t||void 0===t?void 0:t.xPoolTokenAddress)||"","xToken",w,h);const v=[t.id,null===(i=n.xToken)||void 0===i?void 0:i.id,h.toFixed(0),m.toFixed(0)];null===p||void 0===p||p.patchTxs({to:w||"",data:b.encodeFunctionData("exitswapPoolAmountIn",v)});const k=m.add((0,u.NU)(null!==(l=null===(a=n.xToken)||void 0===a?void 0:a.cpkBalance)&&void 0!==l?l:0,null!==(r=n.decimals)&&void 0!==r?r:0));null===p||void 0===p||p.approveCpkTokenFor((null===n||void 0===n||null===(d=n.xToken)||void 0===d?void 0:d.id)||"","xToken",null===p||void 0===p?void 0:p.xTokenWrapperAddress,k),null===p||void 0===p||p.unwrapXToken((null===n||void 0===n||null===(c=n.xToken)||void 0===c?void 0:c.id)||"",k),null===p||void 0===p||p.transferToken(e,n.address,k);return await(null===p||void 0===p?void 0:p.execStoredTxs().then((e=>{var o;return x([{id:t.id,symbol:t.liquidityPoolToken.symbol,name:t.liquidityPoolToken.name,xToken:{id:null!==(o=t.xPoolTokenAddress)&&void 0!==o?o:""}}],[n],[(0,u.S8)(h.toFixed(0),g.Fx).toString()],[(0,u.S8)(m.toFixed(0),n.decimals).toString()],e,"exitPoolSingleOut"),e}),(e=>{throw e})))}static async exitPool(e,t,n,o){return Array.isArray(n)?this.exitPoolMultiple(e,t,n,o):this.exitPoolSingle(e,t,n,o)}static async multihopBatchSwapExactInStatic(e,t,n,o,i,l,a){var r,d,c,p,h,m,x,v,g,A,k;(0,f.MX)(!!w,"BPoolProxy address is missing");const j=(0,s.rz)();(0,f.MX)(!!j,"Could not obtain CPK"),await(null===j||void 0===j?void 0:j.setXTokenWrapperAddress());const T="undefined"!==typeof a,S=T?(0,u.lW)(l):u.f2,C=t.reduce(((e,t)=>{let[{swapAmount:n}]=t;return e.plus(n)}),u.f2),W=(0,u.NU)(i,o.decimals),I=(0,u.NU)(null!==(r=null===(d=n.xToken)||void 0===d?void 0:d.cpkBalance)&&void 0!==r?r:0,null!==(c=n.decimals)&&void 0!==c?c:0),M=C.add(T?0:l),P=I.lt(M)?M.minus(I):u.f2;if(P.gt(0)){const t=(0,u.S8)(P,n.decimals);(0,f.MX)((0,y.Ol)(n,t),"Not enough allowance"),null===j||void 0===j||j.transferTokenFrom(e,n.id,P),null===j||void 0===j||j.approveCpkTokenFor(n.id,"erc20",null===j||void 0===j?void 0:j.xTokenWrapperAddress,P),null===j||void 0===j||j.wrapToken(n.id,P)}if(T&&a){var F,B;const t=(0,u.NU)(null!==(F=null===a||void 0===a?void 0:a.cpkBalance)&&void 0!==F?F:0,null!==(B=null===a||void 0===a?void 0:a.decimals)&&void 0!==B?B:0),n=t.lt(S)?S.minus(t):u.f2,o=(0,u.S8)(n,a.decimals);(0,f.MX)((0,y.Ol)(a,o),"Not enough allowance (SMT)"),n.gt(0)&&(null===j||void 0===j||j.transferTokenFrom(e,a.id,n)),null===j||void 0===j||j.approveCpkTokenFor((null===a||void 0===a?void 0:a.id)||"","erc20",w,S)}null===j||void 0===j||j.approveCpkTokenFor((null===(p=n.xToken)||void 0===p?void 0:p.id)||"","xToken",w,M);const O=[t,null===(h=n.xToken)||void 0===h?void 0:h.id,null===(m=o.xToken)||void 0===m?void 0:m.id,C.toFixed(0),W.toFixed(0),T];null===j||void 0===j||j.patchTxs({to:w||"",data:b.encodeFunctionData("multihopBatchSwapExactIn",O)});const N=(0,u.NU)(null!==(x=null===(v=o.xToken)||void 0===v?void 0:v.cpkBalance)&&void 0!==x?x:0,null!==(g=o.decimals)&&void 0!==g?g:0),L=W.add(N);return null===j||void 0===j||j.approveCpkTokenFor((null===(A=o.xToken)||void 0===A?void 0:A.id)||"","xToken",null===j||void 0===j?void 0:j.xTokenWrapperAddress,L),null===j||void 0===j||j.unwrapXToken((null===(k=o.xToken)||void 0===k?void 0:k.id)||"",L),null===j||void 0===j||j.transferToken(e,o.id,L),{cpk:j,storedTxs:j.storedTxs,minOut:W,swapExactInAmount:C}}static async multihopBatchSwapExactIn(e,t,n,o,i,s,l){const{cpk:a,swapExactInAmount:r,minOut:d}=await this.multihopBatchSwapExactInStatic(e,t,n,o,i,s,l);return null===a||void 0===a?void 0:a.execStoredTxs().then((e=>(x([n],[o],[(0,u.S8)(r.toFixed(0),n.decimals).toString()],[(0,u.S8)(d.toFixed(0),o.decimals).toString()],e,"swap"),e)),(e=>{throw e}))}static async multihopBatchSwapExactOutStatic(e,t,n,o,i,l,a){var r,d,c,p,h,m,x,v,g,A;(0,f.MX)(!!w,"BPoolProxy address is missing");const k=(0,s.rz)();(0,f.MX)(!!k,"Could not obtain CPK"),await(null===k||void 0===k?void 0:k.setXTokenWrapperAddress());const j="undefined"!==typeof a,T=j?(0,u.lW)(l):u.f2,S=(0,u.NU)(i,n.decimals),C=t.reduce(((e,t)=>e.add(t[t.length-1].swapAmount)),u.f2),W=(0,u.NU)(null!==(r=null===(d=n.xToken)||void 0===d?void 0:d.cpkBalance)&&void 0!==r?r:0,null!==(c=n.decimals)&&void 0!==c?c:0),I=S.add(j?0:l),M=W.lt(I)?I.minus(W):u.f2;if(M.gt(0)&&((0,f.MX)((0,y.Ol)(n,M),"Not enough allowance"),null===k||void 0===k||k.transferTokenFrom(e,n.id,M),null===k||void 0===k||k.approveCpkTokenFor(n.id,"erc20",null===k||void 0===k?void 0:k.xTokenWrapperAddress,M),null===k||void 0===k||k.wrapToken(n.id,M)),j&&a){var P,F;const t=(0,u.NU)(null!==(P=null===a||void 0===a?void 0:a.cpkBalance)&&void 0!==P?P:0,null!==(F=null===a||void 0===a?void 0:a.decimals)&&void 0!==F?F:0),n=t.lt(T)?T.minus(t):u.f2;n.gt(0)&&((0,f.MX)((0,y.Ol)(a,n),"Not enough allowance (SMT)"),null===k||void 0===k||k.transferTokenFrom(e,a.id,n)),null===k||void 0===k||k.approveCpkTokenFor(a.id,"erc20",w,T)}null===k||void 0===k||k.approveCpkTokenFor((null===(p=n.xToken)||void 0===p?void 0:p.id)||"","xToken",w,I);const B=[t,null===(h=n.xToken)||void 0===h?void 0:h.id,null===(m=o.xToken)||void 0===m?void 0:m.id,S.toFixed(0),j];null===k||void 0===k||k.patchTxs({to:w||"",data:b.encodeFunctionData("multihopBatchSwapExactOut",B)});const O=(0,u.NU)(null!==(x=null===(v=o.xToken)||void 0===v?void 0:v.cpkBalance)&&void 0!==x?x:0,null!==(g=o.decimals)&&void 0!==g?g:0),N=C.add(O);return null===k||void 0===k||k.unwrapXToken((null===(A=o.xToken)||void 0===A?void 0:A.id)||"",N),null===k||void 0===k||k.transferToken(e,o.id,N),{cpk:k,storedTxs:null===k||void 0===k?void 0:k.storedTxs,maxSwapAmountIn:S,tokenOutAmount:N}}static async multihopBatchSwapExactOut(e,t,n,o,i,s,l){const{cpk:a,maxSwapAmountIn:r,tokenOutAmount:d}=await this.multihopBatchSwapExactOutStatic(e,t,n,o,i,s,l);return null===a||void 0===a?void 0:a.execStoredTxs().then((e=>(x([n],[o],[(0,u.S8)(r.toFixed(0),n.decimals).toString()],[(0,u.S8)(d,o.decimals).toString()],e,"swap"),e)),(e=>{throw e}))}}v=T,T.instances={},T.xTokenWrapperAddress=void 0,T.registryAddress=void 0,T.protocolFeeAddress=void 0,T.smtPriceFeedAddress=void 0,T.utilityToken=void 0,T.getInstance=async()=>(v.instances[w]||(v.instances[w]=new v,await v.instances[w].init()),v.instances[w])},91164:(e,t,n)=>{"use strict";n.d(t,{G:()=>m});var o=n(82350),i=n(97706),s=n(92584),l=n(61336),a=n(75328),r=n(76958),d=n(10015),c=n(44607),u=n(62004);const{crpoolProxyAddress:p}=(0,a.wc)(),h=new d.KA(u.A.CRPoolProxy);class m extends o.A{constructor(e,t){super(e,u.A.CRPoolProxy,t),this.contract=void 0}static async getInstance(){if(!p)throw new Error("CRPoolProxy doesn't exist on this network");return void 0===m.instances[p]&&(m.instances[p]=new m(p),await m.instances[p].init()),m.instances[p]}async getUpdateWeightCost(e,t,n){if(this.init(),void 0===this.contract)return;const o=await this.contract.getUpdateWeightCost(e,t,n);return(0,r.lW)(o.toString())}async getUpdateWeightEarnings(e,t,n){if(this.init(),void 0===this.contract)return;const o=await this.contract.getUpdateWeightEarnings(e,t,n);return(0,r.lW)(o.toString())}async getRemoveTokenCost(e,t){if(this.init(),void 0===this.contract)return;const n=await this.contract.getRemoveTokenCost(e,t);return(0,r.lW)(n.toString())}async getRemoveTokenEarnings(e,t){if(this.init(),void 0===this.contract)return;const n=await this.contract.getRemoveTokenEarnings(e,t);return(0,r.lW)(n.toString())}async getJoinPoolAmountsIn(e,t,n){if(this.init(),void 0===this.contract)return;return(await this.contract.getJoinPoolAmountsIn(e,t,n)).map((e=>(0,r.lW)(e.toString())))}async getJoinswapExternAmountInPoolAmountOut(e,t,n,o){if(this.init(),void 0===this.contract)return;const i=await this.contract.getJoinswapExternAmountInPoolAmountOut(e,t,n,o);return(0,r.lW)(i.toString())}async getExitPoolAmountsOut(e,t,n){if(this.init(),void 0===this.contract)return;return(await this.contract.getExitPoolAmountsOut(e,t,n)).map((e=>(0,r.lW)(e.toString())))}async getExitswapPoolAmountInTokenOutAmount(e,t,n,o){if(this.init(),void 0===this.contract)return;const i=await this.contract.getExitswapPoolAmountInTokenOutAmount(e,t,n,o);return(0,r.lW)(i.toString())}async applyToken(e,t,n,o){if(this.init(),void 0===this.contract)return;this.updateSigner();const i=await(0,l.rz)();if(null===i||void 0===i)return;await i.setXTokenWrapperAddress();const a=(0,r.lW)(o);i.transferTokenFrom(e,n,a),i.approveCpkTokenFor(n,"erc20",i.xTokenWrapperAddress,a),i.wrapToken(n,a);const d=await s.L.tokenToXToken(n);i.approveCpkTokenFor(d,"xToken",this.address,a);const c=await this.contract.populateTransaction.applyAddToken(t);return i.patchTxs(c),i.execStoredTxs()}async removeToken(e,t,n){if(this.init(),void 0===this.contract)return;this.updateSigner();const o=await(0,l.rz)();if(null===o||void 0===o)return;const i=await s.L.tokenToXToken(n),a=await this.getRemoveTokenCost(t,i);if(void 0===a)return;const r=await this.getRemoveTokenEarnings(t,i);if(void 0===r)return;const d=await s.L.tokenToXToken(t);o.approveCpkTokenFor(d,"xToken",this.address,a);const c=await this.contract.populateTransaction.removeToken(t,i);return o.patchTxs(c),o.approveCpkTokenFor(i,"xToken",o.xTokenWrapperAddress,r),o.unwrapXToken(i,r),o.transferToken(e,n,r),o.execStoredTxs()}async updateWeightInstantly(e,t,n,o,i){if(this.init(),void 0===this.contract)return;this.updateSigner();const a=await(0,l.rz)();if(null===a||void 0===a)return;await a.setXTokenWrapperAddress();const r=i.gt(o),d=await s.L.tokenToXToken(n),c=await this.getUpdateWeightCost(t,d,i);if(void 0===c)return;const u=await this.getUpdateWeightEarnings(t,d,i);if(void 0===u)return;if(r){a.transferTokenFrom(e,n,c),a.approveCpkTokenFor(n,"erc20",a.xTokenWrapperAddress,c),a.wrapToken(n,c),a.approveCpkTokenFor(d,"xToken",this.address,c);const o=await this.contract.populateTransaction.updateWeight(t,d,i);return a.patchTxs(o),a.execStoredTxs()}const p=await s.L.tokenToXToken(t);a.approveCpkTokenFor(p,"xToken",this.address,c);const h=await this.contract.populateTransaction.updateWeight(t,d,i);return a.patchTxs(h),a.approveCpkTokenFor(d,"xToken",a.xTokenWrapperAddress,u),a.unwrapXToken(d,u),a.transferToken(e,n,u),a.execStoredTxs()}async joinswapExternAmountIn(e,t,n,o,a){this.init(),this.updateSigner();const d=(0,l.rz)();await d.setXTokenWrapperAddress();const c=await s.L.tokenToXToken(n),u=await i.v.getInstance(c),p=await u.balanceOf(d.address),m=(0,r.lW)(o.toString()).minus(p);return m.gt(0)&&(d.transferTokenFrom(e,n,m),d.approveCpkTokenFor(n,"erc20",d.xTokenWrapperAddress,m),d.wrapToken(n,m)),d.approveCpkTokenFor(c,"xToken",this.address,(0,r.lW)(o.toString())),d.patchTxs({to:this.address,data:h.encodeFunctionData("joinswapExternAmountIn",[t,c,o,a])}),d.execStoredTxs()}async joinPool(e,t,n,o,a){this.init(),this.updateSigner();const d=(0,l.rz)();await d.setXTokenWrapperAddress();const u=await Promise.all(n.map(s.L.xTokenToToken)),p=await Promise.all(n.map((async e=>(await i.v.getInstance(e)).balanceOf(d.address))));return o.map(((e,t)=>void 0===e?c.XK:e.sub(p[t].toFixed(0)))).forEach(((t,n)=>{if(t.isZero())return;const o=u[n],i=(0,r.lW)(t.toString());d.transferTokenFrom(e,o,i),d.approveCpkTokenFor(o,"erc20",d.xTokenWrapperAddress,i),d.wrapToken(o,i)})),o.forEach(((e,t)=>{void 0!==e&&d.approveCpkTokenFor(n[t],"xToken",this.address,(0,r.lW)(e.toString()))})),d.patchTxs({to:this.address,data:h.encodeFunctionData("joinPool",[t,a,o])}),d.execStoredTxs()}async exitswapPoolAmountIn(e,t,n,o,a){this.init(),this.updateSigner();const d=(0,l.rz)();await d.setXTokenWrapperAddress();const c=await s.L.tokenToXToken(n),u=await s.L.tokenToXToken(t);d.approveCpkTokenFor(u,"xToken",this.address,(0,r.lW)(o.toString())),d.patchTxs({to:this.address,data:h.encodeFunctionData("exitswapPoolAmountIn",[t,c,o,a])});const p=await i.v.getInstance(c),m=(await p.balanceOf(d.address)).add(a.toString());return d.approveCpkTokenFor(c,"xToken",d.xTokenWrapperAddress,m),d.unwrapXToken(c,m),d.transferToken(e,n,m),d.execStoredTxs()}async exitPool(e,t,n,o,a){this.init(),this.updateSigner();const d=(0,l.rz)();await d.setXTokenWrapperAddress();const c=await s.L.tokenToXToken(t);d.approveCpkTokenFor(c,"xToken",this.address,(0,r.lW)(o.toString())),d.patchTxs({to:this.address,data:h.encodeFunctionData("exitPool",[t,o,a])});const u=(await Promise.all(n.map((async e=>(await i.v.getInstance(e)).balanceOf(d.address))))).map(((e,t)=>{const n=a[t];return void 0===n?r.f2:e.add(n.toString())})),p=await Promise.all(n.map(s.L.xTokenToToken));return u.forEach(((t,o)=>{if(t.eq(r.f2))return;const i=n[o],s=p[o];d.approveCpkTokenFor(i,"xToken",d.xTokenWrapperAddress,t),d.unwrapXToken(i,t),d.transferToken(e,s,t)})),d.execStoredTxs()}}m.instances={}},62004:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const o=n(8532),i=Object.fromEntries(o.keys().map((e=>[e.replace("./","").replace(".json",""),o(e)])))},98251:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(30280),i=n(92109);const s=()=>{const{investAssetsLoading:e,investAssets:t}=(0,o.A)({options:{includeAssetTokenAttrs:!1}}),n=(0,i.useMemo)((()=>t.map((e=>{var t;return null===(t=e.xToken)||void 0===t?void 0:t.id}))),[t]);return(0,i.useCallback)((t=>!!t&&!e&&(null===t||void 0===t?void 0:t.tokensList.some((e=>n.includes(e.toLowerCase()))))),[e,n])}},18923:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var o=n(1500),i=n(79135),s=n(21870),l=n(76958),a=n(82488),r=n(2090),d=n(68996),c=n(73790),u=n(92109),p=n(35839),h=n(61336),m=n(41681),x=n(12974),v=n(8074),g=n(983),A=n(92859),k=n(51920),f=n(3421),y=n(2738),j=n(50837);const w=e=>{const t=(0,a.F7)(),n=(0,h.or)(),o=(0,u.useMemo)((()=>({contract:(0,v.A)(),exchangeRate:(0,g.A)(0),balance:(0,A.A)(t),usdBalance:(0,k.A)(t),cpkBalance:(0,A.A)(null===n||void 0===n?void 0:n.address),cpkAllowance:(0,x.Ay)(t,null===n||void 0===n?void 0:n.address),xToken:e=>null!==e&&void 0!==e&&e.xToken?(0,A.A)(null===n||void 0===n?void 0:n.address)(null===e||void 0===e?void 0:e.xToken).pipe((0,j.n)((t=>(0,y.of)({...null===e||void 0===e?void 0:e.xToken,cpkBalance:t})))):(0,y.of)(null===e||void 0===e?void 0:e.xToken)})),[t,null===n||void 0===n?void 0:n.address]);return(0,m.A)(o,(0,u.useMemo)((()=>{var t;return null!==e&&void 0!==e&&e.tokensList&&null!==e&&void 0!==e&&null!==(t=e.tokens)&&void 0!==t&&t.length?e.tokensList.map(((t,n)=>{const o=e.tokens.find((e=>{var n;return(0,a.af)(t,null===(n=e.xToken)||void 0===n?void 0:n.id)}));if(void 0===o)throw new Error("Couldn't find a pair token from pool.tokenList and pool.tokens");const i=(0,f.iJ)({...o,weight:(0,l.BL)(o.denormWeight,e.totalWeight).toNumber()});let s;if(null!==e.newCRPoolToken){const t=parseFloat(e.totalWeight)+parseFloat(e.newCRPoolToken.denormWeight);s=(0,l.BL)(i.denormWeight,t)}else if(e.crpoolGradualWeightsUpdate){const t=e.crpoolGradualWeightsUpdate.newWeights.reduce(((e,t)=>e+parseFloat(t)),0);s=(0,l.BL)(e.crpoolGradualWeightsUpdate.newWeights[n],t)}return{...i,...void 0!==s&&{targetWeight:s.times(100).toString()}}})):[]}),[e]))},b=e=>{const t=(0,a.F7)(),{current:n}=(0,u.useRef)((0,r.A)((0,d.default)((0,c.default)(Date.now()),1))),{data:h,loading:m,error:x,refetch:v}=(0,o.I)(i.Nm,(0,u.useMemo)((()=>({variables:{...e&&{id:e},currentTimestamp:n},skip:!e,pollInterval:s.a0})),[e,n])),g=(0,u.useMemo)((()=>{var e;if(void 0!==h)return null===h.pool?null:{...h.pool.liquidityPoolToken,name:(null===(e=h.pool.liquidityPoolToken.xToken)||void 0===e?void 0:e.name)||"Swarm Pool Token"}}),[h]),A=(0,u.useMemo)((()=>h&&h.pool&&(0,p.Wf)(h.pool,t)),[h,t]),k=w(A),f=(0,u.useCallback)((async()=>{e&&await v({id:e,currentTimestamp:n})}),[e,n,v]),y=(0,u.useMemo)((()=>{var e;return null!==h&&void 0!==h&&null!==(e=h.pool)&&void 0!==e&&e.newCRPoolToken?{...h.pool.newCRPoolToken,weight:(0,l.BL)(h.pool.newCRPoolToken.denormWeight,parseFloat(h.pool.totalWeight)+parseFloat(h.pool.newCRPoolToken.denormWeight)).times(100).toNumber()}:null}),[null===h||void 0===h?void 0:h.pool]);return(0,u.useMemo)((()=>{var t;return{pool:A&&{...A,isAnyAssetPaused:k.some((e=>{let{xToken:t}=e;return null===t||void 0===t?void 0:t.paused})),xPoolTokenAddress:null===g||void 0===g||null===(t=g.xToken)||void 0===t?void 0:t.id,tokens:k,newCRPoolToken:y},poolToken:g,loading:m||!!e&&(void 0===A||void 0===g),error:x,refetch:f}}),[A,k,g,y,m,e,x,f])}},82794:(e,t,n)=>{"use strict";n.d(t,{$f:()=>s.$f,Fd:()=>o,PD:()=>s.PD,JM:()=>i,L6:()=>s.L6,Un:()=>s.Un});const o=80,i=1;var s=n(69854)},69854:(e,t,n)=>{"use strict";n.d(t,{$f:()=>l,L6:()=>s,PD:()=>o,Un:()=>i});const o=10,i=[{value:.1,label:"0.1%"},{value:.5,label:"0.5%"},{value:1,label:"1%"},{value:null,custom:!0}],s={tolerance:1,autoPaySmtDiscount:!0},l="advanced-settings"},11286:(e,t,n)=>{"use strict";n.d(t,{J1:()=>o});n(51710),n(2614),n(70771);let o=function(e){return e["my-pools"]="my-pools",e.smart="smart",e.fixed="fixed",e}({})},51710:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});let o=function(e){return e.add="success",e.remove="danger",e}({})},41128:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});var o=n(16823);const{poolsToExclude:i}=o.Ay,s=function(){let{id:e,addressListToExclude:t=[],addressToExclude:n,tokenListContains:o=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...(t.length||(null===i||void 0===i?void 0:i.length))&&{id_not_in:[...t,...i]},...(null===o||void 0===o?void 0:o.length)&&{tokensList_contains:o},...e&&{id:e},...n&&{id_not:n}}}},95467:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var o=n(82488),i=n(11286);function s(e,t){return e.holders.some((e=>(0,o.af)(e,t)))?i.J1["my-pools"]:e.crp?i.J1.smart:i.J1.fixed}},35839:(e,t,n)=>{"use strict";n.d(t,{nX:()=>i,cs:()=>l,Wf:()=>r,yl:()=>d});var o=n(76958);const i=e=>{const t=e.tokens.filter((e=>{let{exchangeRate:t,poolBalance:n}=e;return t&&n}));if(t.length){const[n,i]=t.reduce(((t,n)=>{const i=(0,o.lW)(n.poolBalance).times(n.exchangeRate||0);return[t[0].plus((0,o.lW)(n.denormWeight).div(e.totalWeight).toNumber()),t[1].plus(i)]}),[o.f2,o.f2]);if(n.gt(0))return i.div(n).toNumber()}return 0},s=e=>{let{balance:t=o.f2,poolBalance:n=1}=e;return(null===t||void 0===t?void 0:t.div(n).toNumber())||0},l=e=>{const t=e.reduce(((e,t)=>s(t)<=s(e)?t:e),e[0]);return s(t)};var a=n(82488);const r=(e,t)=>{if(e&&e.shares&&e.shares.length>0){const n=e.shares.find((e=>(0,a.af)(e.userAddress.id,t)));return{...e,userShare:n?(0,o.lW)(n.balance):o.f2}}return e};function d(e){return null!==e.cap&&(0,o.lW)(e.totalShares).gte(e.cap)}},43337:(e,t,n)=>{"use strict";n.d(t,{E:()=>a,b:()=>l});var o=n(15627),i=n(29007),s=n(82794);const l=()=>{const e=sessionStorage.getItem(s.$f),t=(()=>{const e=(0,i.mv)();return e===o.yE.mattereum||e===o.yE.fintiv?{autoPaySmtDiscount:!1}:{}})();if(!e)return sessionStorage.setItem(s.$f,JSON.stringify(s.L6)),{...s.L6,...t};const n=JSON.parse(e);return{...s.L6,...n,...t}},a=e=>sessionStorage.setItem(s.$f,JSON.stringify(e))},95646:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var o,i=n(82350),s=n(75328),l=n(5421);const{xGoldBundleAddress:a}=(0,s.wc)();class r extends i.A{constructor(){super(a,l.A.XGoldBundle),this.contract=void 0,this.depositNewAssets=async e=>{var t;this.init(),this.updateSigner();const n=e.map((e=>({assetAddress:e.address,tokenId:e.tokenId,amount:1,assetType:2})));return null===(t=this.contract)||void 0===t?void 0:t.addNewAssets(n)},this.withdrawAssets=async e=>{var t;this.init(),this.updateSigner();const n=e.map((e=>({assetAddress:e.address,tokenId:e.tokenId,amount:1,assetType:2})));return null===(t=this.contract)||void 0===t?void 0:t.withdrawAssets(n)}}}o=r,r.instances={},r.getInstance=async()=>(o.instances[a]||(o.instances[a]=new o,await o.instances[a].init()),o.instances[a]),r.depositNewAssets=async e=>(await o.getInstance()).depositNewAssets(e),r.withdrawAssets=async e=>(await o.getInstance()).withdrawAssets(e)},92584:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var o,i=n(82350),s=n(49742),l=n(5421);class a extends i.A{constructor(e,t){super(e,l.A.XTokenWrapper,t),this.tokenToXToken=async e=>{if(this.init(),!a.mapping[e])try{var t,n;a.mapping[e]=null===(t=await(null===(n=this.contract)||void 0===n?void 0:n.tokenToXToken(e)))||void 0===t?void 0:t.toLowerCase(),a.reverseMapping[a.mapping[e]]=e}catch{}return a.mapping[e]},this.getTokenFromXToken=async e=>{if(this.init(),!a.reverseMapping[e])try{var t,n;a.reverseMapping[e]=null===(t=await(null===(n=this.contract)||void 0===n?void 0:n.xTokenToToken(e)))||void 0===t?void 0:t.toLowerCase(),a.mapping[a.reverseMapping[e]]=e}catch{}return a.reverseMapping[e]}}}o=a,a.instances={},a.mapping={},a.reverseMapping={},a.getInstance=async()=>{const e=await s.x.getXTokenWrapperAddress();return o.instances[e]||(o.instances[e]=new o(e),await o.instances[e].init()),o.instances[e]},a.tokenToXToken=async e=>(await o.getInstance()).tokenToXToken(e),a.xTokenToToken=async e=>(await o.getInstance()).getTokenFromXToken(e)},30280:(e,t,n)=>{"use strict";n.d(t,{A:()=>X});var o,i=n(1500),s=n(14894),l=n.n(s),a=n(92109),r=n(61336),d=n(75328),c=n(79135),u=n(83860),p=n(36988),h=n(78791),m=n(2738),x=n(81347),v=n(50837),g=n(98225),A=n(97706),k=n(32303),f=n(76958),y=n(5421);class j extends A.v{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.A.AssetToken,arguments.length>2?arguments[2]:void 0),this.getKya=async()=>{try{var e;this.init();return await(null===(e=this.contract)||void 0===e?void 0:e.kya())}catch(t){return}},this.requestRedeem=async(e,t)=>{var n,o;if(this.init(),this.updateSigner(),void 0===this.contract)throw new Error("AssetToken Contract is not initialized");const i=await(null===(n=this.contract)||void 0===n?void 0:n.populateTransaction.requestRedemption((0,f.lW)(e).toFixed(0),t)),s=await(0,k.BN)(i,this.signer);return null===(o=this.contract)||void 0===o?void 0:o.requestRedemption((0,f.lW)(e).toFixed(0),t,{gasLimit:s})}}static parseMintTransactionAmountMinted(e,t){try{var n;const o=j.parseLogs(y.A.AssetToken,e.logs,["MintApproved"]),i=null===o||void 0===o||null===(n=o[0])||void 0===n?void 0:n.args[2];return i?(0,f.S8)(i,t):null}catch(o){return null}}}o=j,j.instances={},j.getInstance=async e=>(o.instances[e]||(o.instances[e]=new o(e),await o.instances[e].init()),o.instances[e]);var w,b=n(61839),T=n(56307),S=n(82350),C=(0,T.A)("ONE");class W extends S.A{constructor(e,t){super(e,y.A.AssetTokenIssuer,t),Object.defineProperty(this,C,{writable:!0,value:void 0}),this.fee=void 0,this.getOne=async()=>{if(void 0===(0,b.A)(this,C)[C]){var e;const t=await(null===(e=this.contract)||void 0===e?void 0:e.DECIMALS());(0,b.A)(this,C)[C]=t.toString()}return(0,b.A)(this,C)[C]},this.getFee=async()=>{var e;void 0===this.fee&&(this.fee=await(null===(e=this.contract)||void 0===e?void 0:e.feeBPS()));return this.fee},this.calculateAmountToRequestMint=async(e,t)=>{var n;if((0,f.lW)(t).eq(0))return(0,f.lW)(0);const o=await(null===(n=this.contract)||void 0===n?void 0:n.calculateAmountToRequestMint(e,(0,f.lW)(t).toFixed(0)));return(0,f.BL)(o,await this.getOne())},this.mint=async(e,t)=>{var n,o;if(this.init(),this.updateSigner(),void 0===this.contract)throw new Error("AssetTokenIssuer at (".concat(this.address,") Contract is not initialized"));const i=(0,f.NU)(t,e.decimals).toFixed(0),s=await(null===(n=this.contract)||void 0===n?void 0:n.populateTransaction.mint(e.id,i,"1")),l=await(0,k.BN)(s,this.signer);return null===(o=this.contract)||void 0===o?void 0:o.mint(e.id,i,"1",{gasLimit:l})},this.getAmountToMint=async(e,t,n)=>{var o;if((0,f.lW)(n).eq(0))return f.f2;const i=(0,f.NU)(n,t),s=await(null===this||void 0===this||null===(o=this.contract)||void 0===o?void 0:o.getAmountToMint(e,i.toFixed(0)));return s?(0,f.BL)(s,await this.getOne()):null}}}w=W,W.SWARM_ISSUER_NAME="AssetTokenIssuer",W.instances={},W.getInstance=async e=>(w.instances[e]||(w.instances[e]=new w(e),await w.instances[e].init()),w.instances[e]);var I,M=n(29007),P=n(56133),F=n(37575),B=n(69752),O=n(21870),N=n(82488);class L extends S.A{constructor(e){super(e,y.A.AssetTokenData),this.address=e,this.decimals=void 0,this.interestRates=new Map,this.getDecimals=async()=>{if(void 0===this.decimals)try{var e;this.decimals=(0,B.miF)((await(null===this||void 0===this||null===(e=this.contract)||void 0===e?void 0:e.DECIMALS())).toString())}catch(t){return(0,B.miF)(10**27)}return this.decimals},this.getInterestRate=async e=>{const t=(0,N.yI)(e);if(null!==this&&void 0!==this&&this.contract){var n,o,i,s;const e=await(null===(n=this.contract)||void 0===n?void 0:n.provider.getBlockNumber());if(!this.interestRates.has(t)||Number(null===(o=this.interestRates.get(t))||void 0===o?void 0:o.blockNumber)>e)try{var l,a;const[[e,n],o,i]=await Promise.all([null===(l=this.contract)||void 0===l?void 0:l.getInterestRate(t),null===(a=this.contract)||void 0===a?void 0:a.provider.getBlockNumber(),this.getDecimals()]);this.interestRates.set(t,{rate:(0,B.miF)(e.toString()).times(n?1:-1).div(i),blockNumber:o})}catch(r){return null}return null!==(i=null===(s=this.interestRates.get(t))||void 0===s?void 0:s.rate)&&void 0!==i?i:null}return null},this.getNetApy=async e=>{const t=await this.getInterestRate(e);if(null===t)return null;const n=t.add(1).pow(O.SP).sub(1);return(0,f.lW)(n.toString())},this.getApy=async e=>{const t=await this.getNetApy(e);return null===t?null:t.div(.9)}}}I=L,L.instances={},L.getInstance=async e=>(I.instances[e]||(I.instances[e]=new I(e),await I.instances[e].init()),I.instances[e]);var R=n(983),E=n(23161),z=n(35779),D=n(39114);var q=n(32916),U=n(2287),_=n(50433),G=n(30499);const X=e=>{var t,n;const o=(0,_.F7)(),s=(0,N.Op)(),A=(0,r.or)(),{usdcAddress:k,nativeUsdcAddress:y}=(0,d.wc)(),w=null===(t=null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.includeAssetTokenAttrs)||void 0===t||t,{data:b,loading:T,error:S}=(0,i.I)(c.NL,{variables:{assetTokenFilter:(0,q.Xs)("Token",{frozen:!1,isOnSafeGuard:!1,enabled:!0}),tokenFilter:{id_in:[(0,N.kX)(k),(0,N.kX)(y)]}},skip:[p.S.ArbitrumSepolia].includes(s),client:u.A}),C=(0,a.useMemo)((()=>(null===b||void 0===b?void 0:b.assetTokens.filter((e=>{var t;const n=(0,M.Pw)(null===(t=e.kyaInformation)||void 0===t?void 0:t.assetType);return(0,M.u_)({assetType:n})})))||[]),[null===b||void 0===b?void 0:b.assetTokens]),{token:I,loading:B}=(0,G.A)(),X=(0,a.useMemo)((()=>I&&{...I,issuer:{id:"0x2CB863237Ec1E7cc017729cb7102fc00a0B5cd45",name:"SwarmX GmBH"},rate:1}),[I]),H=(0,U.U4)((0,a.useMemo)((()=>{var e;return(null===(e=[...C,...X?[X]:[]])||void 0===e?void 0:e.map((e=>{var t;const n=(0,M.Pw)(null===(t=e.kyaInformation)||void 0===t?void 0:t.assetType),o=l()(null===b||void 0===b?void 0:b.tokens,(e=>e.id===k)),i=null===b||void 0===b?void 0:b.tokens.find((t=>(0,N.af)(t.id,e.id)));return{...e,...(null===i||void 0===i?void 0:i.tvl)&&{tvl:(0,f.S8)(i.tvl,i.decimals)},authorizedAssets:o||[],assetType:n}})))||[]}),[null===b||void 0===b?void 0:b.tokens,C,k,X]),(0,a.useMemo)((()=>[(0,U.c$)(),(0,U.ZZ)(o),...w?[e=>{const t=(0,h.H)(j.getInstance(e.id)),n=(0,m.of)(e.issuer).pipe((0,v.n)((e=>null!==e&&e.name===W.SWARM_ISSUER_NAME?(0,h.H)(W.getInstance(e.id)):(0,m.of)(void 0))),(0,x.Z)(void 0));return{kyaData:(0,m.of)(e.kya).pipe((0,v.n)((e=>void 0===e||null===e?(0,m.of)(e):(0,P.A5)(e)?(0,h.H)((0,P.sp)(e)):(0,m.of)(null))),(0,x.Z)(void 0)),requestRedeem:t.pipe((0,g.T)((e=>null===e||void 0===e?void 0:e.requestRedeem)),(0,x.Z)(void 0)),issuerContract:n,mint:n.pipe((0,g.T)((e=>null===e||void 0===e?void 0:e.mint))),getAmountToMint:n.pipe((0,g.T)((e=>null===e||void 0===e?void 0:e.getAmountToMint))),...(0,M.Ly)(e)&&(e=>{const t=(0,m.of)(e.kya).pipe((0,v.n)((e=>void 0===e||null===e?(0,m.of)(e):(0,P.A5)(e)?(0,h.H)((0,P.sp)(e)):(0,m.of)(null))),(0,x.Z)(void 0));return{netApy:(0,h.H)(L.getInstance(e.assetTokenData.id)).pipe((0,v.n)((t=>(0,h.H)(t.getNetApy(e.id)))),(0,x.Z)(void 0)),apy:(0,h.H)(L.getInstance(e.assetTokenData.id)).pipe((0,v.n)((t=>(0,h.H)(t.getApy(e.id)))),(0,x.Z)(void 0)),underlyingToken:t.pipe((0,v.n)((t=>{var n,o,i,s,l,a,r;if(void 0===t||null===t)return(0,m.of)(t);const d=null===t||void 0===t||null===(n=t.properties)||void 0===n||null===(o=n.find((0,z.Lj)("property_type","underlying_asset_blockchain")))||void 0===o?void 0:o.value,c=(0,D.y)(d,null===(i=O.bR.get((0,N.hY)()))||void 0===i?void 0:i.networkName),u=null===t||void 0===t||null===(s=t.properties)||void 0===s||null===(l=s.find((0,z.Lj)("property_type","underlying_asset")))||void 0===l?void 0:l.value,p=null===t||void 0===t||null===(a=t.properties)||void 0===a||null===(r=a.find((0,z.Lj)("property_type","underlying_asset_ticker")))||void 0===r?void 0:r.value;return u&&c&&!(0,N.af)(u,e.id)?(0,h.H)((0,E.Q)(u).then((e=>({...e,...p&&{symbol:p}})))):(0,m.of)({id:e.id,...p&&{symbol:p}})})),(0,v.n)((e=>(0,F.z)([(0,m.of)(e),e?(0,R.A)()(e):(0,m.of)(void 0)]))),(0,v.n)((e=>{let[t,n]=e;return t?(0,m.of)({...t,exchangeRate:n}):(0,m.of)(t)})),(0,x.Z)(void 0)),redemptionToken:t.pipe((0,v.n)((e=>{var t,n,o,i;if(void 0===e||null===e)return(0,m.of)(e);const s=null===(t=e.properties)||void 0===t||null===(n=t.find((0,z.Lj)("property_type","redemption_asset_address")))||void 0===n?void 0:n.value,l=null===e||void 0===e||null===(o=e.properties)||void 0===o||null===(i=o.find((0,z.Lj)("property_type","redemption_asset_ticker")))||void 0===i?void 0:i.value;return s?(0,h.H)((0,E.Q)(s).then((e=>({...e,...l&&{symbol:l}})))):(0,m.of)(null)})),(0,v.n)((e=>(0,F.z)([(0,m.of)(e),e?(0,R.A)()(e):(0,m.of)(e)]))),(0,v.n)((e=>{let[t,n]=e;return t?(0,m.of)({...t,exchangeRate:n}):(0,m.of)(t)})),(0,x.Z)(void 0))}})(e)}}]:[],(0,U.D)(null===A||void 0===A?void 0:A.address),(0,U.qd)(o),(0,U.BD)()]),[o,null===A||void 0===A?void 0:A.address,w])),K=(0,a.useMemo)((()=>H.filter(M.cw)),[H]),V=(0,a.useMemo)((()=>H.filter(M.Ly)),[H]),Z=(0,a.useMemo)((()=>H.filter(M._W)),[H]),$=(0,a.useMemo)((()=>H.filter(M.UF)),[H]),J=(0,a.useMemo)((()=>H.filter(M.jE)),[H]),Q=(0,a.useMemo)((()=>H.find((e=>(0,N.af)(e.id,null===I||void 0===I?void 0:I.id)))),[H,null===I||void 0===I?void 0:I.id]),Y=(0,a.useMemo)((()=>[...K,...V,...Z,...$,...Q?[Q]:[]]),[Z,$,V,K,Q]),ee=T||B;return(0,a.useMemo)((()=>({stockTokens:K,stakingNodes:V,brandingTokens:J,bonds:Z,indexTokens:$,investAssets:Y,investAssetsLoading:ee,investAssetsError:S})),[K,V,J,Z,$,Y,ee,S])}},1641:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(92109),i=n(61336),s=n(2302),l=n(82488);const a=e=>{const t=(0,l.F7)(),n=(0,i.or)(),a=(0,s.g1)(e);return(0,o.useMemo)((()=>e&&a?{address:e,cpkAddress:a}:t&&(0,l.af)(e,t)&&null!==n&&void 0!==n&&n.address?{address:t,cpkAddress:null===n||void 0===n?void 0:n.address}:void 0),[t,e,null===n||void 0===n?void 0:n.address,a])}},30499:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});let o=function(e){return e.Gold="Gold",e.NotSet="notSet",e}({});var i=n(54411),s=n(95646),l=n(75328),a=n(11480),r=n(45844);const{xGoldBundleAddress:d}=(0,l.wc)(),c=()=>{const e=r.A.checkSupported(r.s.xGoldToken),{token:t,loading:n}=(0,a.A)(d,{enabled:e}),{data:l,isLoading:c}=(0,i.I)({queryFn:async()=>{var t;if(!e)return;return null===(t=(await s.D.getInstance()).contract)||void 0===t?void 0:t.tokenKya()},queryKey:["xGoldKya",d],enabled:e}),u=n||c;return{token:t&&e?{...t,kya:l,rwaType:o.Gold}:null,loading:u}}},18158:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var o=n(83843);const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return(0,o.B)(e,{...n,keyPrefix:t.join(".")})}},37530:(e,t,n)=>{"use strict";n.d(t,{iO:()=>u,_Y:()=>c,Ay:()=>m});var o=n(1500),i=n(32522),s=n(92109),l=n(99297),a=n(79135),r=n(73790),d=n(68996);const c={called:!1,loading:!1,refetching:!1,hasMore:!1,refetch:()=>Promise.resolve(null),fetchMore:()=>{},data:void 0,error:void 0,options:{}},u=(0,r.default)((0,d.default)(new Date,14)),p={dateFrom:u,skip:0};var h=n(2090);const m=e=>{var t,n,r;const d=(0,s.useMemo)((()=>(e=>{let{tokens:t,dateFrom:n,userAddress:o,limit:i}=e;return{filter:{tokenIn_in:t,tokenOut_in:t,timestamp_gt:n&&(0,h.A)(n),...o&&{userAddress:null===o||void 0===o?void 0:o.toLowerCase()}},limit:i}})({...p,...e})),[e]),c=!e.tokens||0===e.tokens.length,[u,m]=(0,s.useState)(!c),{data:x,loading:v,error:g,networkStatus:A,refetch:k,called:f,fetchMore:y}=(0,o.I)(a.ZU,{variables:d,skip:c||e.ignore,notifyOnNetworkStatusChange:!0}),j=(0,s.useCallback)((async e=>c||v?Promise.resolve(null):k({...d,limit:e||(null===x||void 0===x?void 0:x.swaps.length)||d.limit})),[null===x||void 0===x?void 0:x.swaps.length,v,k,c,d]),w=(0,s.useCallback)((async()=>{var e;if(c||v)return;const{data:{swaps:t}}=await y({variables:{...d,skip:null===x||void 0===x||null===(e=x.swaps)||void 0===e?void 0:e.length}});m(!!t.length&&t.length===d.limit)}),[null===x||void 0===x||null===(t=x.swaps)||void 0===t?void 0:t.length,v,y,c,d]);return(0,l.A)((()=>{j(e.limit)}),[c,null===(n=e.tokens)||void 0===n?void 0:n[0],null===(r=e.tokens)||void 0===r?void 0:r[1],e.limit]),(0,s.useEffect)((()=>{m(!c)}),[c]),(0,s.useMemo)((()=>({data:x,called:f,loading:v||![i.pT.ready,i.pT.error].includes(A),error:g,refetching:A===i.pT.refetch,refetch:j,fetchMore:w,hasMore:u,options:e})),[f,x,g,w,u,v,A,j,e])}},75223:(e,t,n)=>{"use strict";n.d(t,{o:()=>v});var o=n(92387),i=n(2738),s=n(60823),l=n(50837),a=n(51123),r=n(43501),d=n(64155),c=n(81347),u=n(36597),p=n(61336),h=n(52007),m=n(86633);const x=(0,o.v)((()=>p.vj.pipe((0,l.n)((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.isProxyDeployed())&&void 0!==t?t:(0,i.of)(!1)})),(0,a.F)(),(0,r.Z)((e=>(0,s.T)((()=>!e),m.Y.pipe((0,l.n)((()=>{try{return(0,p.rz)().isProxyDeployed()}catch{return(0,i.of)(!1)}})),(0,a.F)(),(0,d.v)((e=>!e))),(0,i.of)(e)))),(0,c.Z)(!1),(0,u.t)(1)))),v=()=>(0,h.A)(x,!1)},11480:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var o=n(54411),i=n(17266),s=n(92109),l=n(81185),a=n(15627),r=n(3421),d=n(82488),c=n(44890);const u=(e,t)=>{const{type:n,...u}=null!==t&&void 0!==t?t:{},p=null!==n&&void 0!==n?n:a.ks.erc20,h=(0,d.F7)(),{data:m,refetch:x,isLoading:v,error:g}=(0,o.I)({queryFn:()=>e&&(0,i.isAddress)(e)?l.A.getTokenMetadata(e):null,queryKey:["tokenMetadata",e],...u}),A=(0,s.useMemo)((()=>void 0===m||null===m||v||!e?null:(0,c.EE)(e,p,m)),[e,v,m,p]),k=(0,r.U4)(A?[A]:[],(0,s.useMemo)((()=>(0,r.vs)(null===t||void 0===t?void 0:t.type)?[]:[(0,r.ZZ)(h)]),[h,null===t||void 0===t?void 0:t.type]));return{token:k.length?k[0]:null,loading:v,refetch:x,error:g}}},45844:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,s:()=>l});var o=n(15627),i=n(82488);let s,l=function(e){return e.goldNfts="gold-nfts",e.investAssets="invest-assets",e.xGoldToken="x-gold-token",e}({});!function(e){const t={[l.goldNfts]:[o.SS.Polygon,o.SS.Ethereum,o.SS.ArbitrumSepolia],[l.investAssets]:[o.SS.Polygon,o.SS.Ethereum],[l.xGoldToken]:[o.SS.Ethereum,o.SS.ArbitrumSepolia]},n=e.checkSupported=e=>{const n=(0,i.hY)();return t[e].includes(n)};e.ifSupported=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n(e)?t:o}}(s||(s={}));const a=s},86633:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var o=n(10407),i=n(50837),s=n(13376),l=n(82488);const a=(e=>l.wI.pipe((0,i.n)((t=>(0,o.R)(t,e))),(0,s.u)()))("block")},76876:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});let o=function(e){return e.pending="pending",e.completed="completed",e.failed="failed",e}({})},42615:(e,t,n)=>{"use strict";n.d(t,{W:()=>a,i:()=>l});var o=n(92109),i=n(24537);const s=(0,o.createContext)({highlightedIndex:null,setHighlightedIndex:()=>{}}),l=e=>{let{children:t}=e;const[n,l]=(0,o.useState)(null);return(0,i.jsx)(s.Provider,{value:(0,o.useMemo)((()=>({highlightedIndex:n,setHighlightedIndex:l})),[n]),children:t})},a=e=>{const{highlightedIndex:t,setHighlightedIndex:n}=(0,o.useContext)(s);return{toggleHighlight:(0,o.useCallback)((t=>n(void 0===t?t=>t===e?null:e:t?e:null)),[e,n]),highlighted:(0,o.useMemo)((()=>t===e),[t,e])}}},60581:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(25421),i=n(636),s=n(1107),l=n(24537);const a=e=>{let{title:t,badge:n,children:a,...r}=e;return(0,l.jsxs)(o.A,{p:[3,"24px"],borderRadius:1,boxShadow:4,border:"0",width:"100%",flexDirection:"column",...r,children:[(0,l.jsxs)(i.A,{alignItems:"center",justifyContent:["space-between","flex-start"],children:[t&&(0,l.jsx)(s.A,{as:"h3",fontSize:[2,3],lineHeight:["24px","28px"],fontWeight:5,color:"grey",m:0,flexGrow:"1",children:t}),n]}),a]})}},79474:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=n(90479).Ay.td(["display:",";opacity:",";transition:0.1s;@media (min-width:","){display:table-cell;}"],(e=>{let{expanded:t}=e;return t?"block":"none"}),(e=>{let{hide:t}=e;return t?"0":"1"}),(e=>{let{theme:t}=e;return null===t||void 0===t?void 0:t.breakpoints[0]}))},28363:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var o=n(42615),i=n(31466),s=n(24537);const l=e=>{let{rowIndex:t,children:n,onClick:l,...a}=e;const{toggleHighlight:r}=(0,o.W)(t);return(0,s.jsx)(i.A,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:l,...a,children:n})}},27226:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var o=n(90479),i=n(636),s=n(15310),l=n(63668),a=n(24537);const r=o.Ay.thead(["display:none;@media (min-width:","){display:table-header-group;}"],(e=>{let{theme:t}=e;return null===t||void 0===t?void 0:t.breakpoints[0]})),d=e=>{let{columns:t,invisible:n=!1}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("colgroup",{children:t.map((e=>{let{id:t,width:n}=e;return(0,a.jsx)("col",{...n&&{style:{width:n}}},t)}))}),!n&&(0,a.jsx)(r,{children:(0,a.jsx)("tr",{children:t.map((e=>{let{id:t,label:n,justify:o,help:r}=e;return(0,a.jsx)("th",{children:n&&(0,a.jsxs)(i.A,{alignItems:"center",...o&&{justifyContent:o},children:[n,r&&(0,a.jsx)(l.A,{placement:"top",message:r,children:(0,a.jsx)(s.A,{size:"16px",name:"Help",ml:1,mt:-1,style:{cursor:"pointer"}})})]})},t)}))})})]})}},67922:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var o=n(86668),i=n(9336),s=n(24537);const l=e=>{let{children:t,span:n=4,show:l=!1,loading:a=!1,error:r=!1}=e;return a||l||r?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:n,children:(0,s.jsxs)(o.A.span,{fontWeight:2,color:"grey",textAlign:"center",children:[a&&(0,s.jsx)(i.A,{size:"30px",m:"auto"}),!a&&(r||t)]})})}):null}},31466:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=n(90479).Ay.tr(["display:flex;flex-direction:column;"," &:hover{background-color:",";}@media (min-width:","){display:table-row;}"],(e=>e.onClick?"cursor: pointer;":""),(e=>{let{theme:t}=e;return null===t||void 0===t?void 0:t.colors["primary-alpha-03"]}),(e=>{let{theme:t}=e;return null===t||void 0===t?void 0:t.breakpoints[0]}))},40076:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var o=n(29007),i=n(35779),s=n(49534),l=n(82488),a=n(7970),r=n.n(a),d=n(85597),c=n.n(d),u=n(78122),p=n.n(u),h=n(92109),m=n(83843),x=n(67286),v=n(24537);const g=e=>{let{selectedAddress:t,onChange:n,...a}=e;const{t:d}=(0,m.B)(["invest","popups","common"]),u=(0,l.F7)(),g=(0,s.Hu)(),A=(0,h.useMemo)((()=>{const e=p()([...(0,o.Wz)(u),...c()(g||[],"address")]);return[...r()(e.map((e=>{const t=0===g.length?{label:"",address:u}:g.find((0,i.Lj)("address",e));var n;if(null!==t&&void 0!==t&&t.address)return{value:t.address,label:null!==(n=t.label)&&void 0!==n?n:"",connected:!!u&&(0,l.af)(u,e)}})))]}),[u,g]),k=(0,h.useMemo)((()=>{var e;return t?{value:t,label:(null===(e=A.find((e=>(0,l.af)(e.value,t))))||void 0===e?void 0:e.label)||""}:null}),[A,t]);return(0,v.jsx)(x.A,{...a,label:d("invest:redeemModal.selectAddress"),options:A,onChange:n,value:k})}},67286:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var o=n(90479),i=n(38842),s=n.n(i),l=n(25614),a=n(4155),r=n(86668),d=n(45704),c=n(77292),u=n(86453),p=n(24537);const h=e=>{let{selectProps:t}=e;return t.menuIsOpen?(0,p.jsx)(c.A,{mr:["6px","10px"],color:"primary"}):(0,p.jsx)(u.A,{mr:["6px","10px"],color:"primary"})};var m=n(82488),x=n(29007),v=n(40608),g=n(636),A=n(56392);const k=e=>{var t;let{value:n,label:o,disabled:i}=e;const s=(0,m.F7)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(g.A,{children:[(0,p.jsx)(v.A,{address:n}),o?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.A,{ml:[2,"10px"],mr:"4px",color:i?"grey":"text",children:o}),n&&(0,p.jsxs)(r.A,{ml:[2,"10px"],mr:"4px",color:"grey",flexGrow:1,children:["(",(0,x.hA)(null!==n&&void 0!==n?n:"").replace("x","\xd7"),")"]})]}):(0,p.jsx)(r.A,{ml:[2,"10px"],mr:"4px",overflow:"hidden",style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},flexGrow:1,children:(null!==(t=null!==n&&void 0!==n?n:s)&&void 0!==t?t:"").replace("x","\xd7")})]}),(0,m.af)(n,s)&&(0,p.jsx)(A.A,{iconSize:"12px",iconColor:"success",content:""})]})},f=o.Ay.div(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:6px 10px;width:100%;max-width:calc(100% - 24px);&:hover{cursor:",";}@media (min-width:","){padding:12px;}"],(e=>{let{disabled:t}=e;return t?"default":"pointer"}),(e=>{let{theme:t}=e;return t.breakpoints[0]})),y=e=>{let{data:t,innerRef:n,innerProps:o}=e;return(0,p.jsx)(f,{ref:n,...o,disabled:t.isDisabled,children:(0,p.jsx)(k,{value:t.value,label:t.label,disabled:t.isDisabled})})};var j=n(52057);const w=o.Ay.div(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;"]),b=e=>{const{data:t}=e;return(0,p.jsx)(j.c.SingleValue,{...e,children:(0,p.jsx)(w,{children:(0,p.jsx)(k,{value:t.value,label:t.label})})})},T=(0,o.Ay)(l.Ay)(["&.Select{width:100%;.Select-value{display:inline-flex;align-items:center;}.Dropdown__control{border-color:",";","}.Dropdown__indicator-separator{display:none;}.Dropdown__menu{margin-top:4px;}}& .Select-placeholder{font-size:smaller;}"],(e=>{let{theme:t}=e;return t.colors.grey}),d.uJ),S=e=>{let{label:t,...n}=e;return(0,p.jsxs)(a.A,{children:[!!t&&(0,p.jsx)(r.A.span,{color:"near-black",fontSize:1,children:t}),(0,p.jsx)(T,{...s()(n,["theme"]),isSearchable:!1,className:"Select",classNamePrefix:"Dropdown",styles:{valueContainer:e=>({...e,cursor:"pointer"}),singleValue:e=>({...e,width:"100%"})},components:{Option:y,DropdownIndicator:h,SingleValue:b}})]})}},2409:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(15627),i=n(39318),s=n(15310),l=n(24537);const a=e=>{let{allowanceStatus:t}=e;return(0,i.A)(t).equals(o.hH.NOT_ALLOWED).then((0,l.jsx)(s.A,{name:"LockOutline",title:"Locked",size:"16",color:"red"})).equals(o.hH.LIMITED).then((0,l.jsx)(s.A,{name:"LockOpen",title:"Enabled & Limited",size:"16",color:"success"})).equals(o.hH.INFINITE).then((0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.A,{name:"LockOpen",title:"Enabled & Unlimited",size:"16",color:"success"}),(0,l.jsx)("sup",{children:(0,l.jsx)(s.A,{title:"Enabled & Limited",name:"AllInclusive",size:"12",color:"success"})})]})).else(null)}},51937:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var o=n(70985),i=n(2302),s=n(82488),l=n(21870),a=n(83843),r=n(99297),d=n(92109),c=n(87585);const u=e=>{let{display:t,once:n=!1,message:o,...i}=e;const{addAlert:s}=(0,c.dh)(),[l,a]=(0,d.useState)(!1);return(0,r.A)((()=>{t&&!l&&(s(o,i),a(n))}),[t]),null};var p=n(24361),h=n(24537);const m=()=>{const e=(0,s.F7)(),{t:t}=(0,a.B)("alerts"),n=(0,i.oN)(),r=(0,o.A)((()=>l.cZ.includes(n)),[e,n]);return(0,h.jsx)(u,{display:r,message:t("transactionForbidden"),variant:p.w.warning})}},27713:()=>{},20806:e=>{"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"swapFee","type":"uint256"}],"name":"setSwapFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newCap","type":"uint256"}],"name":"setCap","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"publicSwap","type":"bool"}],"name":"setPublicSwap","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"denormalizedWeight","type":"uint256"}],"name":"commitAddToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"newWeights","type":"uint256[]"},{"internalType":"uint256","name":"startBlock","type":"uint256"},{"internalType":"uint256","name":"endBlock","type":"uint256"}],"name":"updateWeightsGradually","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"pokeWeights","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"provider","type":"address"}],"name":"whitelistLiquidityProvider","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"provider","type":"address"}],"name":"removeWhitelistedLiquidityProvider","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},27194:e=>{"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_token","type":"address"},{"internalType":"uint256","name":"_newWeight","type":"uint256"}],"name":"getUpdateWeightCost","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_token","type":"address"},{"internalType":"uint256","name":"_newWeight","type":"uint256"}],"name":"getUpdateWeightEarnings","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_token","type":"address"}],"name":"getRemoveTokenCost","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_token","type":"address"}],"name":"getRemoveTokenEarnings","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"uint256","name":"_poolAmountOut","type":"uint256"},{"internalType":"uint256[]","name":"_maxAmountsIn","type":"uint256[]"}],"name":"getJoinPoolAmountsIn","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_tokenIn","type":"address"},{"internalType":"uint256","name":"_tokenAmountIn","type":"uint256"},{"internalType":"uint256","name":"_minPoolAmountOut","type":"uint256"}],"name":"getJoinswapExternAmountInPoolAmountOut","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"uint256","name":"_poolAmountIn","type":"uint256"},{"internalType":"uint256[]","name":"_minAmountsOut","type":"uint256[]"}],"name":"getExitPoolAmountsOut","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_tokenOut","type":"address"},{"internalType":"uint256","name":"_poolAmountIn","type":"uint256"},{"internalType":"uint256","name":"_minAmountOut","type":"uint256"}],"name":"getExitswapPoolAmountInTokenOutAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"}],"name":"applyAddToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_token","type":"address"}],"name":"removeToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_token","type":"address"},{"internalType":"uint256","name":"_newWeight","type":"uint256"}],"name":"updateWeight","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_tokenIn","type":"address"},{"internalType":"uint256","name":"_tokenAmountIn","type":"uint256"},{"internalType":"uint256","name":"_minPoolAmountOut","type":"uint256"}],"name":"joinswapExternAmountIn","outputs":[{"internalType":"uint256","name":"_poolAmountOut","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"uint256","name":"_poolAmountOut","type":"uint256"},{"internalType":"uint256[]","name":"_maxAmountsIn","type":"uint256[]"}],"name":"joinPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"address","name":"_tokenOut","type":"address"},{"internalType":"uint256","name":"_poolAmountIn","type":"uint256"},{"internalType":"uint256","name":"_minAmountOut","type":"uint256"}],"name":"exitswapPoolAmountIn","outputs":[{"internalType":"uint256","name":"_tokenAmountOut","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_crpool","type":"address"},{"internalType":"uint256","name":"_poolAmountIn","type":"uint256"},{"internalType":"uint256[]","name":"_minAmountsOut","type":"uint256[]"}],"name":"exitPool","outputs":[],"stateMutability":"nonpayable","type":"function"}]')}}]);
//# sourceMappingURL=6140.3f6f6c79.chunk.js.map